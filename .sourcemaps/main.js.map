{"version":3,"sources":["../../src/helpers/utility.ts","../../src/models/data.ts","../../src/providers/statistics.ts","../../src/providers/resources.ts","../../src/pages/home/home.ts","../../src/pages/books/surf/surf.ts","../../src/pages/search/search.ts","../../src/pages/accounts/signin/signin.ts","../../src/pages/accounts/profile/profile.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/helpers/events.ts","../../src/models/objects.ts","../../src/providers/configuration.ts","../../src/helpers/api.ts","../../src/providers/authentication.ts","../../src/pages/books/info/info.ts","../../src/pages/books/options/options.ts","../../src/pages/accounts/search/search.ts","../../src/providers/accounts.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/helpers/crypto.ts","../../src/providers/books.ts","../../src/pages/books/read/read.ts","../../src/app/app.component.ts","../../src/helpers/rtu.ts"],"names":[],"mappings":"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AM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,OAAO;QAEP,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,OAAO;QAEP,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM;QAEN,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM;QAEN,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM;QAEN,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM;QAEN,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM;QAEN,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM;QAEN,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM;QAEN,MAAM,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","file":"main.js","sourcesContent":["import { Keyboard } from \"@ionic-native/keyboard\";\r\nimport { List } from \"linqts\";\r\n\r\nimport { AppCrypto } from \"./crypto\";\r\nimport { AppData } from \"../models/data\";\r\n\r\nexport namespace AppUtility {\r\n\t/** Checks to see the object is boolean and equals to true */\r\n\texport function isTrue(obj?: any) {\r\n\t\treturn obj != undefined && typeof obj == \"boolean\" && obj === true;\r\n\t}\r\n\r\n\t/** Checks to see the object is boolean (or not defined) and equals to false */\r\n\texport function isFalse(obj?: any) {\r\n\t\treturn obj == undefined || (typeof obj == \"boolean\" && obj === false);\r\n\t}\r\n\r\n\t/**\r\n\t  * Checks to see the object is really object or not\r\n\t  * @param obj The object for checking\r\n\t  * @param notNull true to check null of the object\r\n\t*/\r\n\texport function isObject(obj?: any, notNull?: boolean) {\r\n\t\treturn obj != undefined && typeof obj == \"object\" && (isTrue(notNull) ? obj != null : true);\r\n\t}\r\n\r\n\t/** Checks to see the object is array or not */\r\n\texport function isArray(obj?: any) {\r\n\t\treturn obj instanceof Array;\r\n\t}\r\n\r\n\t/** Checks to see the object is date or not */\r\n\texport function isDate(obj?: any) {\r\n\t\treturn obj instanceof Date;\r\n\t}\r\n\r\n\t/** Checks to see the object is null or not */\r\n\texport function isNull(obj?: any) {\r\n\t\treturn obj == undefined || obj == null;\r\n\t}\r\n\r\n\t/** Checks to see the object is defined and null or not */\r\n\texport function isNotNull(obj?: any) {\r\n\t\treturn obj != undefined && obj != null;\r\n\t}\r\n\r\n\t/** Checks to see the string is defined and not empty */\r\n\texport function isNotEmpty(obj?: string) {\r\n\t\treturn isNotNull(obj) && typeof obj == \"string\" && obj.trim() != \"\";\r\n\t}\r\n\r\n\t/** Gets the state that determines the emai address is valid or not */\r\n\texport function isValidEmail(email?: string) {\r\n\t\tvar atPos = isNotEmpty(email) ? email.indexOf(\"@\") : -1;\r\n\t\tvar dotPos = isNotEmpty(email) ? email.indexOf(\".\", atPos + 1) : -1;\r\n\t\treturn atPos > 0 && dotPos > atPos;\r\n\t}\r\n\r\n\t/** Checks the error to see that is security exception or not */\r\n\texport function isGotSecurityException(error?: any) {\r\n\t\treturn isObject(error, true) && isNotEmpty(error.Type)\r\n\t\t\t? new List(securityExceptions).FirstOrDefault(e => e == error.Type) != undefined\r\n\t\t\t: false;\r\n\t}\r\n\r\n\tconst securityExceptions: Array<string> = [\r\n\t\t\"UnauthorizedException\", \"AccessDeniedException\",\r\n\t\t\"SessionNotFoundException\", \"SessionExpiredException\", \"SessionInformationRequiredException\", \"InvalidSessionException\",\r\n\t\t\"TokenNotFoundException\", \"TokenExpiredException\", \"TokenRevokedException\", \"InvalidTokenException\", \"InvalidTokenSignatureException\"\r\n\t];\r\n\r\n\texport function isGotWrongAccountOrPasswordException(error?: any) {\r\n\t\treturn isObject(error, true) && isNotEmpty(error.Type)\r\n\t\t\t? error.Type == \"WrongAccountException\"\r\n\t\t\t: false;\r\n\t}\r\n\r\n\texport function isGotCaptchaException(error?: any) {\r\n\t\treturn isObject(error, true) && isNotEmpty(error.Type) && isNotEmpty(error.Message)\r\n\t\t\t? error.Type == \"InformationInvalidException\" && error.Message.indexOf(\"Captcha code is invalid\") > -1\r\n\t\t\t: false;\r\n\t}\r\n\r\n\t/** Gets the state that determines is native app */\r\n\texport function isNativeApp() {\r\n\t\treturn AppData.Configuration.app.mode == \"NTA\";\r\n\t}\r\n\r\n\t/** Gets the state that determines is web progressive app */\r\n\texport function isWebApp() {\r\n\t\treturn AppData.Configuration.app.mode == \"PWA\";\r\n\t}\r\n\r\n\t/** Gets the state that determines the app is running on Apple iOS */\r\n\texport function isAppleOS() {\r\n\t\treturn AppData.Configuration.app.platform.indexOf(\"iOS\") > -1;\r\n\t}\r\n\r\n\t/** Gets the state that determines the app is running on Apple Safari */\r\n\texport function isAppleSafari() {\r\n\t\treturn /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n\t}\r\n\r\n\t/** Gets the state that determines the app is running on Windows Phone */\r\n\texport function isWindowsPhoneOS() {\r\n\t\treturn AppData.Configuration.app.platform.indexOf(\"Windows Phone\") > -1;\r\n\t}\r\n\r\n\t/** Gets the state that determines the app is running in debug mode */\r\n\texport function isDebug() {\r\n\t\treturn AppData.Configuration.app.debug;\r\n\t}\r\n\r\n\t/**\r\n\t * Copys data from the source (object or JSON) into the objects' properties\r\n\t * @param {any} source The source (object or JSON) to copy data from\r\n\t * @param {any} obj The instance of an object to copy data into\r\n\t * @param {function} onPreCompleted The handler to run when copying process is completed\r\n\t*/\r\n\texport function copy(source: any, obj: any, onPreCompleted?: (data: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet data = isNotEmpty(source)\r\n\t\t\t? JSON.parse(source)\r\n\t\t\t: isObject(source, true)\r\n\t\t\t\t? source\r\n\t\t\t\t: {};\r\n\r\n\t\t\tfor (let name in data) {\r\n\t\t\t\tlet type = typeof obj[name];\r\n\t\t\t\tif (type !== \"undefined\" && type !== \"function\") {\r\n\t\t\t\t\tobj[name] = isDate(obj[name])\r\n\t\t\t\t\t\t? new Date(data[name])\r\n\t\t\t\t\t\t: data[name];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tonPreCompleted != undefined && onPreCompleted(data);\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Utility]: Error occurred while copying object\", e, source);\r\n\t\t}\t\r\n\t}\r\n\r\n\t/**\r\n\t  * Clones the object (means do stringify the source object and re-parse via JSON (need to re-update all special attributes, like Date, Collection, ... manually)\r\n\t  * @param source The source object for cloning\r\n\t  * @param beRemoved The array of attributes of the cloning object to be removed before returing\r\n\t*/\r\n\texport function clone(source?: any, beRemoved?: Array<string>): any {\r\n\t\tvar exists = [];\r\n\t\tvar json = JSON.stringify(source, (key: string, value: any) => {\r\n\t\t\tif (isObject(value, true)) {\r\n\t\t\t\tif (exists.indexOf(value) !== -1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\texists.push(value);\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t});\r\n\t\tvar obj = JSON.parse(json);\r\n\t\tif (beRemoved != undefined) {\r\n\t\t\tnew List(beRemoved).ForEach(a => delete obj[a]);\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\r\n\t/**\r\n\t  * Sets focus into a control\r\n\t  * @param control The control to set focus\r\n\t  * @param keyboard The keyboard of the device to show (not work on iOS because the OS's limits)\r\n\t  * @param defer Defer time (in miliseconds)\r\n\t*/\r\n\texport function focus(control: any, keyboard?: Keyboard, defer?: number) {\r\n\t\tif (isObject(control, true) && typeof control.setFocus == \"function\") {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tcontrol.setFocus();\r\n\t\t\t\tisNotNull(keyboard) && isNativeApp() && keyboard.show();\r\n\t\t\t}, defer || (isNativeApp() ? 567 : 234));\r\n\t\t}\r\n\t}\r\n\r\n\t/** Gets the position of the sub-string in the string */\r\n\texport function indexOf(str: string, substr: string, start?: number) {\r\n\t\treturn isNotEmpty(str) && isNotEmpty(substr)\r\n\t\t\t? str.indexOf(substr, start)\r\n\t\t\t: -1;\r\n\t}\r\n\r\n\t/** Finds the index of an item in the sequence base on a predicate */\r\n\texport function find<T>(items: Array<T>, predicate: (item: T) => boolean): number {\r\n\t\tfor (let index = 0; index < items.length; index++) {\r\n\t\t\tif (predicate(items[index])) {\r\n\t\t\t\treturn index;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/** Removes items in the sequence base on number that count from end */\r\n\texport function splice<T>(items: Array<T>, number?: number) {\r\n\t\tnumber = number || 1;\r\n\t\tlet index = items.length - number;\r\n\t\tif (index > 0 && index < items.length) {\r\n\t\t\titems.splice(index, number);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets time-out to run a function\r\n\t * @param func The function to run\r\n\t * @param defer The defer times (in miliseconds)\r\n\t */\r\n\texport function setTimeout(func: () => void, defer?: number) {\r\n\t\tfunc != undefined && window.setTimeout(() => {\r\n\t\t\tfunc();\r\n\t\t}, defer || 0);\r\n\t}\r\n\r\n\t/** Splits the string into the array of strings */\r\n\texport function toArray(obj: any, seperator?: string): Array<string> | Array<any> {\r\n\t\tif (isArray(obj)) {\r\n\t\t\treturn obj as Array<any>;\r\n\t\t}\r\n\t\telse if (isNotEmpty(obj)) {\r\n\t\t\tlet array = indexOf(obj as string, seperator != undefined ? seperator : \",\") > 0\r\n\t\t\t\t? (obj as string).split(seperator != undefined ? seperator : \",\")\r\n\t\t\t\t: [obj as string];\r\n\t\t\treturn new List(array).Select(i => isNotEmpty(i) ? i.trim() : \"\").ToArray();\r\n\t\t}\r\n\t\telse if (isObject(obj, true)) {\r\n\t\t\tlet array = new Array<any>();\r\n\t\t\tfor (let i of obj) {\r\n\t\t\t\tarray.push(i);\r\n\t\t\t}\r\n\t\t\treturn array;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn [obj];\r\n\t\t}\r\n\t}\r\n\r\n\t/** Gets the cover image of a book */\r\n\texport function getCoverImage(cover?: string, noCover?: string) {\r\n\t\treturn isNotEmpty(cover)\r\n\t\t\t? cover\r\n\t\t\t: isNotEmpty(noCover)\r\n\t\t\t\t? noCover\r\n\t\t\t\t: AppData.Configuration.app.uris.files + \"books/media-files/no/cover/image.png\";\r\n\t}\r\n\r\n\t/** Gets the avatar image (using services of Gravatar.com) */\r\n\texport function getGravatarImage(email?: string, noAvatar?: string) {\r\n\t\tnoAvatar = isNotEmpty(noAvatar)\r\n\t\t\t? noAvatar\r\n\t\t\t: AppData.Configuration.app.uris.files + \"avatars/\" + AppData.Configuration.app.host + \"-no-avatar.png\";\r\n\t\treturn isNotEmpty(email)\r\n\t\t\t? \"https://secure.gravatar.com/avatar/\" + AppCrypto.md5(email.toLowerCase().trim()) + \"?s=300&d=\" + encodeURIComponent(noAvatar)\r\n\t\t\t: noAvatar;\r\n\t}\r\n\r\n\t/** Gets the avatar image */\r\n\texport function getAvatarImage(info?: any, noAvatar?: string) {\r\n\t\tlet avatar: string = isObject(info, true) && isNotEmpty(info.Avatar)\r\n\t\t\t? info.Avatar\r\n\t\t\t: isObject(info, true) && isNotEmpty(info.Gravatar)\r\n\t\t\t\t? info.Gravatar\r\n\t\t\t\t: \"\";\r\n\t\treturn avatar == \"\" && isObject(info, true)\r\n\t\t\t? getGravatarImage(isObject(info.Contact, true) ? info.Contact.Email : info.Email, noAvatar)\r\n\t\t\t: avatar;\r\n\t}\r\n\r\n\t/** Gets the query from JSON */\r\n\texport function getQuery(json: any): string {\r\n\t\ttry {\r\n\t\t\tlet query = \"\";\r\n\t\t\tif (isObject(json, true)) {\r\n\t\t\t\tfor(let name in json) {\r\n\t\t\t\t\tquery += (query != \"\" ? \"&\" : \"\") + name + \"=\" + encodeURIComponent(json[name]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn query;\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t}\r\n\r\n\t/** Gets the JSON of a query param (means decode by Base64Url and parse to JSON) */\r\n\texport function getQueryParamJson(value: string): any {\r\n\t\ttry {\r\n\t\t\treturn isNotEmpty(value)\r\n\t\t\t\t? JSON.parse(AppCrypto.urlDecode(value))\r\n\t\t\t\t: {};\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t}\r\n\r\n\t/** Gets the string parameter for making request to REST API (means stringify the JSON and encode by Base64Url) */\r\n\texport function getBase64UrlParam(json: any) {\r\n\t\treturn isObject(json, true)\r\n\t\t\t? AppCrypto.urlEncode(JSON.stringify(json))\r\n\t\t\t: \"\";\r\n\t}\r\n\r\n\t/** Gets the current host name */\r\n\texport function getHost() {\r\n\t\tif (indexOf(window.location.hostname, \".\") < 0) {\r\n\t\t\treturn window.location.hostname;\r\n\t\t}\r\n\t\tlet info = toArray(window.location.hostname, \".\");\r\n\t\tlet host = info[info.length - 2] + \".\" + info[info.length - 1];\r\n\t\tif (info.length > 2 && info[info.length - 3] != \"www\") {\r\n\t\t\thost = info[info.length - 3] + \".\" + host;\r\n\t\t}\r\n\t\treturn host;\r\n\t}\r\n\r\n\t/** Gets the current uri */\r\n\texport function getUri() {\r\n\t\treturn indexOf(window.location.hostname, \".\") < 0\r\n\t\t\t? window.location.href\r\n\t\t\t: window.location.protocol + \"//\" + window.location.hostname + \"/\";\r\n\t}\r\n\r\n\t/** Gets the CSS classes for working with input control */\r\n\texport function getInputCss() {\r\n\t\treturn \"text-input \"\r\n\t\t\t+ (isAppleOS()\r\n\t\t\t\t? \"text-input-ios\"\r\n\t\t\t\t: isWindowsPhoneOS()\r\n\t\t\t\t\t? \"text-input-wp\"\r\n\t\t\t\t\t: \"text-input-md\");\r\n\t}\r\n\r\n\t/** Gets the array of objects with random scoring number (for ordering) */\r\n\texport function getTopScores(objects: Array<any>, take?: number, excluded?: string, dontAddRandomScore?: boolean, nameOfRandomScore?: string) {\r\n\t\tdontAddRandomScore = dontAddRandomScore != undefined\r\n\t\t\t? dontAddRandomScore\r\n\t\t\t: false;\r\n\t\tnameOfRandomScore = nameOfRandomScore != undefined\r\n\t\t\t? nameOfRandomScore\r\n\t\t\t: \"Score\";\r\n\r\n\t\tvar list = new List(objects);\r\n\t\tif (excluded != undefined) {\r\n\t\t\tlist = list.Where(o => excluded != o.ID);\r\n\t\t}\r\n\t\tlist = list.Select(o => {\r\n\t\t\tlet i = clone(o);\r\n\t\t\tif (isFalse(dontAddRandomScore)) {\r\n\t\t\t\ti[nameOfRandomScore] = Math.random();\r\n\t\t\t}\r\n\t\t\treturn i;\r\n\t\t});\r\n\t\tif (isFalse(dontAddRandomScore)) {\r\n\t\t\tlist = list.OrderByDescending(i => i[nameOfRandomScore]);\r\n\t\t}\r\n\t\tif (take != undefined) {\r\n\t\t\tlist = list.Take(take);\r\n\t\t}\r\n\t\treturn list.ToArray();\r\n\t}\r\n\r\n\tvar counties: any = {};\r\n\r\n\t/** Gets the listing of counties of a specified country */\r\n\texport function getCounties(country?: string) {\r\n\t\tcountry = isNotEmpty(country)\r\n\t\t\t? country\r\n\t\t\t: AppData.Configuration.meta.country;\r\n\t\tif (!counties[country]) {\r\n\t\t\tlet theCounties: Array<any> = [];\r\n\t\t\tnew List<any>(AppData.Configuration.meta.provinces[country]\r\n\t\t\t\t? AppData.Configuration.meta.provinces[country].provinces\r\n\t\t\t\t: []\r\n\t\t\t).ForEach(p => {\r\n\t\t\t\tnew List<any>(p.counties).ForEach(c => {\r\n\t\t\t\t\ttheCounties.push({\r\n\t\t\t\t\t\tcounty: c.title,\r\n\t\t\t\t\t\tprovince: p.title,\r\n\t\t\t\t\t\tcountry: country,\r\n\t\t\t\t\t\ttitle: c.title + \", \" + p.title + \", \" + country,\r\n\t\t\t\t\t\ttitleANSI: toANSI(c.title + \", \" + p.title + \", \" + country)\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tcounties[country] = theCounties;\r\n\t\t}\r\n\t\treturn counties[country] as Array<any>;\r\n\t}\r\n\r\n\t/** Initializes an address for working with type-a-head */\r\n\texport function initializeAddress(address?: any): { current: any, addresses: Array<any> } {\r\n\t\tvar info = {\r\n\t\t\taddresses: getCounties(),\r\n\t\t\tcurrent: undefined\r\n\t\t};\r\n\r\n\t\taddress = isObject(address, true)\r\n\t\t\t? {\r\n\t\t\t\t\tcounty: isNotEmpty(address.county) ? address.county : isNotEmpty(address.County) ? address.County : \"\",\r\n\t\t\t\t\tprovince: isNotEmpty(address.province) ? address.province : isNotEmpty(address.Province) ? address.Province : \"\",\r\n\t\t\t\t\tcountry: isNotEmpty(address.country) ? address.country : isNotEmpty(address.Country) ? address.Country : \"\"\r\n\t\t\t\t}\r\n\t\t\t: {\r\n\t\t\t\t\tcounty: \"\",\r\n\t\t\t\t\tprovince: \"\",\r\n\t\t\t\t\tcountry: \"\"\r\n\t\t\t\t};\r\n\r\n\t\tinfo.current = address.county == \"\" && address.province == \"\" && address.country == \"\"\r\n\t\t\t? undefined\r\n\t\t\t: new List(info.addresses).FirstOrDefault(a => a.county == address.county && a.province == address.province && a.country == address.country);\r\n\r\n\t\treturn info;\r\n\t}\r\n\r\n\t/** Opens Google Maps by address or location via query */\r\n\texport function openGoogleMaps(info: string) {\r\n\t\twindow.open(\"https://www.google.com/maps?q=\" + encodeURIComponent(info));\r\n\t}\r\n\r\n\t/** Normalizes the HTML content */\r\n\texport function normalizeHtml(html?: string, removeTags?: boolean) {\r\n\t\tvar wellHtml = isNotEmpty(html)\r\n\t\t\t? isTrue(removeTags)\r\n\t\t\t\t? html.replace(/<\\/?[^>]+(>|$)/g, \"\")\r\n\t\t\t\t: html\r\n\t\t\t: \"\";\r\n\t\treturn wellHtml != \"\"\r\n\t\t\t? wellHtml.replace(/\\&/g, \"&amp;\").replace(/>/g, \"&gt;\").replace(/</g, \"&lt;\").replace(/\\n/g, \"<br/>\")\r\n\t\t\t: \"\";\r\n\t}\r\n\r\n\t/** Removes tags from the HTML content */\r\n\texport function removeTags(html?: string) {\r\n\t\treturn isNotEmpty(html)\r\n\t\t\t? html.replace(/<\\/?[^>]+(>|$)/g, \"\")\r\n\t\t\t: \"\";\r\n\t}\r\n\r\n\t/** Gets all the available characters (0 and A-Z) */\r\n\texport function getChars() {\r\n\t\tvar chars = new Array<string>(\"0\");\r\n\t\tfor (let code = 65; code < 91; code++) {\r\n\t\t\tchars.push(String.fromCharCode(code));\r\n\t\t}\r\n\t\treturn chars;\r\n\t}\r\n\r\n\t/** Converts the Vietnamese string to ANSI string */\r\n\texport function toANSI(input?: string): string {\r\n\t\tif (!isNotEmpty(input) || input.trim() == \"\") {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\r\n\t\tvar result = input.trim();\r\n\r\n\t\tresult = result.replace(/\\u00E1/g, \"a\");\r\n\t\tresult = result.replace(/\\u00C1/g, \"A\");\r\n\t\tresult = result.replace(/\\u00E0/g, \"a\");\r\n\t\tresult = result.replace(/\\u00C0/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EA3/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EA2/g, \"A\");\r\n\t\tresult = result.replace(/\\u00E3/g, \"a\");\r\n\t\tresult = result.replace(/\\u00C3/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EA1/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EA0/g, \"A\");\r\n\t\t//á Á\r\n\r\n\t\tresult = result.replace(/\\u0103/g, \"a\");\r\n\t\tresult = result.replace(/\\u0102/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EAF/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EAE/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EB1/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EB0/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EB3/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EB2/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EB5/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EB4/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EB7/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EB6/g, \"A\");\r\n\t\t//a A \r\n\r\n\t\tresult = result.replace(/\\u00E2/g, \"a\");\r\n\t\tresult = result.replace(/\\u00C2/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EA5/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EA4/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EA7/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EA6/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EA9/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EA8/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EAB/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EAA/g, \"A\");\r\n\t\tresult = result.replace(/\\u1EAD/g, \"a\");\r\n\t\tresult = result.replace(/\\u1EAC/g, \"A\");\r\n\t\t// â Â \r\n\r\n\t\tresult = result.replace(/\\u00E9/g, \"e\");\r\n\t\tresult = result.replace(/\\u00C9/g, \"E\");\r\n\t\tresult = result.replace(/\\u00E8/g, \"e\");\r\n\t\tresult = result.replace(/\\u00C8/g, \"E\");\r\n\t\tresult = result.replace(/\\u1EBB/g, \"e\");\r\n\t\tresult = result.replace(/\\u1EBA/g, \"E\");\r\n\t\tresult = result.replace(/\\u1EBD/g, \"e\");\r\n\t\tresult = result.replace(/\\u1EBC/g, \"E\");\r\n\t\tresult = result.replace(/\\u1EB9/g, \"e\");\r\n\t\tresult = result.replace(/\\u1EB8/g, \"E\");\r\n\t\t// é É \r\n\r\n\t\tresult = result.replace(/\\u00EA/g, \"e\");\r\n\t\tresult = result.replace(/\\u00CA/g, \"E\");\r\n\t\tresult = result.replace(/\\u1EBF/g, \"e\");\r\n\t\tresult = result.replace(/\\u1EBE/g, \"E\");\r\n\t\tresult = result.replace(/\\u1EC1/g, \"e\");\r\n\t\tresult = result.replace(/\\u1EC0/g, \"E\");\r\n\t\tresult = result.replace(/\\u1EC3/g, \"e\");\r\n\t\tresult = result.replace(/\\u1EC2/g, \"E\");\r\n\t\tresult = result.replace(/\\u1EC5/g, \"e\");\r\n\t\tresult = result.replace(/\\u1EC4/g, \"E\");\r\n\t\tresult = result.replace(/\\u1EC7/g, \"e\");\r\n\t\tresult = result.replace(/\\u1EC6/g, \"E\");\r\n\t\t// ê Ê\r\n\r\n\t\tresult = result.replace(/\\u00ED/g, \"i\");\r\n\t\tresult = result.replace(/\\u00CD/g, \"I\");\r\n\t\tresult = result.replace(/\\u00EC/g, \"i\");\r\n\t\tresult = result.replace(/\\u00CC/g, \"I\");\r\n\t\tresult = result.replace(/\\u1EC9/g, \"i\");\r\n\t\tresult = result.replace(/\\u1EC8/g, \"I\");\r\n\t\tresult = result.replace(/\\u0129/g, \"i\");\r\n\t\tresult = result.replace(/\\u0128/g, \"I\");\r\n\t\tresult = result.replace(/\\u1ECB/g, \"i\");\r\n\t\tresult = result.replace(/\\u1ECA/g, \"I\");\r\n\t\t// í Í\r\n\r\n\t\tresult = result.replace(/\\u00F3/g, \"o\");\r\n\t\tresult = result.replace(/\\u00D3/g, \"O\");\r\n\t\tresult = result.replace(/\\u00F2/g, \"o\");\r\n\t\tresult = result.replace(/\\u00D2/g, \"O\");\r\n\t\tresult = result.replace(/\\u1ECF/g, \"o\");\r\n\t\tresult = result.replace(/\\u1ECE/g, \"O\");\r\n\t\tresult = result.replace(/\\u00F5/g, \"o\");\r\n\t\tresult = result.replace(/\\u00D5/g, \"O\");\r\n\t\tresult = result.replace(/\\u1ECD/g, \"o\");\r\n\t\tresult = result.replace(/\\u1ECC/g, \"O\");\r\n\t\t// ó Ó\r\n\r\n\t\tresult = result.replace(/\\u01A1/g, \"o\");\r\n\t\tresult = result.replace(/\\u01A0/g, \"O\");\r\n\t\tresult = result.replace(/\\u1EDB/g, \"o\");\r\n\t\tresult = result.replace(/\\u1EDA/g, \"O\");\r\n\t\tresult = result.replace(/\\u1EDD/g, \"o\");\r\n\t\tresult = result.replace(/\\u1EDC/g, \"O\");\r\n\t\tresult = result.replace(/\\u1EDF/g, \"o\");\r\n\t\tresult = result.replace(/\\u1EDE/g, \"O\");\r\n\t\tresult = result.replace(/\\u1EE1/g, \"o\");\r\n\t\tresult = result.replace(/\\u1EE0/g, \"O\");\r\n\t\tresult = result.replace(/\\u1EE3/g, \"o\");\r\n\t\tresult = result.replace(/\\u1EE2/g, \"O\");\r\n\t\t// o O\r\n\r\n\t\tresult = result.replace(/\\u00F4/g, \"o\");\r\n\t\tresult = result.replace(/\\u00D4/g, \"O\");\r\n\t\tresult = result.replace(/\\u1ED1/g, \"o\");\r\n\t\tresult = result.replace(/\\u1ED0/g, \"O\");\r\n\t\tresult = result.replace(/\\u1ED3/g, \"o\");\r\n\t\tresult = result.replace(/\\u1ED2/g, \"O\");\r\n\t\tresult = result.replace(/\\u1ED5/g, \"o\");\r\n\t\tresult = result.replace(/\\u1ED4/g, \"O\");\r\n\t\tresult = result.replace(/\\u1ED7/g, \"o\");\r\n\t\tresult = result.replace(/\\u1ED6/g, \"O\");\r\n\t\tresult = result.replace(/\\u1ED9/g, \"o\");\r\n\t\tresult = result.replace(/\\u1ED8/g, \"O\");\r\n\t\t// ô Ô\r\n\r\n\t\tresult = result.replace(/\\u00FA/g, \"u\");\r\n\t\tresult = result.replace(/\\u00DA/g, \"U\");\r\n\t\tresult = result.replace(/\\u00F9/g, \"u\");\r\n\t\tresult = result.replace(/\\u00D9/g, \"U\");\r\n\t\tresult = result.replace(/\\u1EE7/g, \"u\");\r\n\t\tresult = result.replace(/\\u1EE6/g, \"U\");\r\n\t\tresult = result.replace(/\\u0169/g, \"u\");\r\n\t\tresult = result.replace(/\\u0168/g, \"U\");\r\n\t\tresult = result.replace(/\\u1EE5/g, \"u\");\r\n\t\tresult = result.replace(/\\u1EE4/g, \"U\");\r\n\t\t// ú Ú\r\n\r\n\t\tresult = result.replace(/\\u01B0/g, \"u\");\r\n\t\tresult = result.replace(/\\u01AF/g, \"U\");\r\n\t\tresult = result.replace(/\\u1EE9/g, \"u\");\r\n\t\tresult = result.replace(/\\u1EE8/g, \"U\");\r\n\t\tresult = result.replace(/\\u1EEB/g, \"u\");\r\n\t\tresult = result.replace(/\\u1EEA/g, \"U\");\r\n\t\tresult = result.replace(/\\u1EED/g, \"u\");\r\n\t\tresult = result.replace(/\\u1EEC/g, \"U\");\r\n\t\tresult = result.replace(/\\u1EEF/g, \"u\");\r\n\t\tresult = result.replace(/\\u1EEE/g, \"U\");\r\n\t\tresult = result.replace(/\\u1EF1/g, \"u\");\r\n\t\tresult = result.replace(/\\u1EF0/g, \"U\");\r\n\t\t// u U\r\n\r\n\t\tresult = result.replace(/\\u00FD/g, \"y\");\r\n\t\tresult = result.replace(/\\u00DD/g, \"Y\");\r\n\t\tresult = result.replace(/\\u1EF3/g, \"y\");\r\n\t\tresult = result.replace(/\\u1EF2/g, \"Y\");\r\n\t\tresult = result.replace(/\\u1EF7/g, \"y\");\r\n\t\tresult = result.replace(/\\u1EF6/g, \"Y\");\r\n\t\tresult = result.replace(/\\u1EF9/g, \"y\");\r\n\t\tresult = result.replace(/\\u1EF8/g, \"Y\");\r\n\t\tresult = result.replace(/\\u1EF5/g, \"y\");\r\n\t\tresult = result.replace(/\\u1EF4/g, \"Y\");\r\n\t\t// ý Ý\r\n\r\n\t\tresult = result.replace(/\\u00D0/g, \"D\");\r\n\t\tresult = result.replace(/\\u0110/g, \"D\");\r\n\t\tresult = result.replace(/\\u0111/g, \"d\");\r\n\t\t// d Ð\r\n\r\n\t\tresult = result.replace(/\\s\\s/g, \" \");\r\n\t\t// double spaces\r\n\r\n\t\treturn result.trim();\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/utility.ts","import * as Collections from \"typescript-collections\";\r\n\r\nimport { AppUtility } from \"../helpers/utility\";\r\nimport { AppModels } from \"./objects\";\r\n\r\nexport namespace AppData {\r\n\r\n\t/** App configuration settings */\r\n\texport var Configuration = {\r\n\t\tapp: {\r\n\t\t\turis: {\r\n\t\t\t\tapis: \"https://apis.vieapps.net/\",\r\n\t\t\t\tfiles: \"https://afs.vieapps.net/\",\r\n\t\t\t},\r\n\t\t\tdebug: true,\r\n\t\t\toffline: false,\r\n\t\t\tmode: \"\",\r\n\t\t\tplatform: \"\",\r\n\t\t\tname: \"viebooks.net\",\r\n\t\t\thost: \"\",\r\n\t\t\ttracking: {\r\n\t\t\t\tgoogle: \"UA-3060572-8\",\r\n\t\t\t\tgoogleDomains: [\"chomuonsach.com\"],\r\n\t\t\t\tfacebook: \"\"\r\n\t\t\t},\r\n\t\t\trefer: {\r\n\t\t\t\tid: null,\r\n\t\t\t\tsection: null\r\n\t\t\t}\r\n\t\t},\r\n\t\tsession: {\r\n\t\t\tid: null,\r\n\t\t\tjwt: null,\r\n\t\t\taccount: null,\r\n\t\t\tkeys: null,\r\n\t\t\tdevice: \"\",\r\n\t\t\tcaptcha: {\r\n\t\t\t\tcode: \"\",\r\n\t\t\t\turi: \"\"\r\n\t\t\t}\r\n\t\t},\r\n\t\treading: {\r\n\t\t\toptions: {\r\n\t\t\t\tfont: \"default\",\r\n\t\t\t\tsize: \"normal\",\r\n\t\t\t\tcolor: \"white\",\r\n\t\t\t\tparagraph: \"one\",\r\n\t\t\t\talign: \"align-left\"\r\n\t\t\t},\r\n\t\t\tbookmarks: new Collections.Dictionary<string, AppModels.Bookmark>()\r\n\t\t},\r\n\t\tmeta: {\r\n\t\t\tcountry: \"VN\",\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: {}\r\n\t\t},\r\n\t\tresources: {},\r\n\t\tfacebook: {\r\n\t\t\tid: null,\r\n\t\t\ttoken: null,\r\n\t\t\turl: null,\r\n\t\t\tversion: \"v2.9\",\r\n\t\t}\r\n\t};\r\n\r\n\t/** Statistics */\r\n\texport var Statistics = new AppModels.Statistics();\r\n\r\n\t/** Accounts */\r\n\texport var Accounts = new Collections.Dictionary<string, AppModels.Account>();\r\n\r\n\t/** Books */\r\n\texport var Books = new Collections.Dictionary<string, AppModels.Book>();\r\n\r\n\t/** Paginations */\r\n\texport var Paginations = {\r\n\t\tinfo: {},\r\n\r\n\t\tgetFilterBy: (info?: any) => {\r\n\t\t\treturn AppUtility.isObject(info, true) && AppUtility.isObject(info.FilterBy, true)\r\n\t\t\t\t? info.FilterBy\r\n\t\t\t\t: undefined;\r\n\t\t},\r\n\r\n\t\tgetQuery: (info?: any) => {\r\n\t\t\tvar filterby = Paginations.getFilterBy(info);\r\n\t\t\treturn AppUtility.isObject(filterby, true) && AppUtility.isObject(filterby.FilterBy, true) && AppUtility.isNotEmpty(filterby.FilterBy.Query)\r\n\t\t\t\t? filterby.FilterBy.Query as string\r\n\t\t\t\t: undefined;\r\n\t\t},\r\n\r\n\t\tgetSortBy: (info?: any) => {\r\n\t\t\treturn AppUtility.isObject(info, true) && AppUtility.isObject(info.SortBy, true)\r\n\t\t\t\t? info.SortBy\r\n\t\t\t\t: undefined;\r\n\t\t},\r\n\r\n\t\tgetKey: (info?: any, prefix?: string) => {\r\n\t\t\tif (Paginations.getQuery(info) != null) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\tvar filterby = Paginations.getFilterBy(info);\r\n\t\t\tvar sortby = Paginations.getSortBy(info);\r\n\t\t\tsortby = AppUtility.isObject(sortby, true) && AppUtility.isNotEmpty(sortby.LastUpdated)\r\n\t\t\t\t? sortby.LastUpdated as string\r\n\t\t\t\t: \"Descending\";\r\n\r\n\t\t\tvar key: string = undefined;\r\n\r\n\t\t\t// libraries\r\n\t\t\tprefix = prefix != undefined || prefix == null ? prefix : \"B\";\r\n\t\t\t// e-books\r\n\t\t\tif (prefix == \"B\") {\r\n\t\t\t\tkey = \"Descending\" != sortby \r\n\t\t\t\t\t? null\r\n\t\t\t\t\t: filterby && filterby.And && filterby.And.Category && AppUtility.isNotEmpty(filterby.And.Category.Equals)\r\n\t\t\t\t\t\t? prefix + \"CAT-\" + filterby.And.Category.Equals\r\n\t\t\t\t\t\t: filterby && filterby.And && filterby.And.Author && AppUtility.isNotEmpty(filterby.And.Author.Equals)\r\n\t\t\t\t\t\t\t? prefix + \"AUT-\" + filterby.And.Author.Equals\r\n\t\t\t\t\t\t\t: null;\r\n\t\t\t}\r\n\r\n\t\t\t// others\r\n\t\t\telse {\r\n\t\t\t\tkey = prefix + \"-\";\r\n\t\t\t}\r\n\r\n\t\t\treturn key;\r\n\t\t},\r\n\r\n\t\t/** Gets the default pagination */\r\n\t\tdefault: (info?: any): { TotalRecords: number, TotalPages: number, PageSize: number, PageNumber: number } => {\r\n\t\t\tvar pagination = info != undefined\r\n\t\t\t\t? info.Pagination\r\n\t\t\t\t: undefined;\r\n\r\n\t\t\treturn AppUtility.isObject(pagination, true)\r\n\t\t\t\t? {\r\n\t\t\t\t\tTotalRecords: pagination.TotalRecords ? pagination.TotalRecords : -1,\r\n\t\t\t\t\tTotalPages: pagination.TotalPages ? pagination.TotalPages : 0,\r\n\t\t\t\t\tPageSize: pagination.PageSize ? pagination.PageSize : 20,\r\n\t\t\t\t\tPageNumber: pagination.PageNumber ? pagination.PageNumber : 0\r\n\t\t\t\t}\r\n\t\t\t\t: {\r\n\t\t\t\t\tTotalRecords: -1,\r\n\t\t\t\t\tTotalPages: 0,\r\n\t\t\t\t\tPageSize: 20,\r\n\t\t\t\t\tPageNumber: 0\r\n\t\t\t\t};\r\n\t\t},\r\n\r\n\t\t/** Computes the total of records */\r\n\t\tcomputeTotal: (pageNumber: number, pagination?: any) => {\r\n\t\t\tvar totalRecords = pageNumber * (AppUtility.isObject(pagination, true) ? pagination.PageSize : 20);\r\n\t\t\tif (AppUtility.isObject(pagination, true) && totalRecords > pagination.TotalRecords) {\r\n\t\t\t\ttotalRecords = pagination.TotalRecords;\r\n\t\t\t}\r\n\t\t\treturn totalRecords;\r\n\t\t},\r\n\r\n\t\t/** Gets a pagination */\r\n\t\tget: (info?: any, prefix?: string) => {\r\n\t\t\tvar key = Paginations.getKey(info, prefix);\r\n\t\t\treturn key ? Paginations.info[key] : undefined;\r\n\t\t},\r\n\r\n\t\t/** Sets a pagination */\r\n\t\tset: (info?: any, prefix?: string) => {\r\n\t\t\tvar key = Paginations.getKey(info, prefix);\r\n\t\t\tif (key) {\r\n\t\t\t\tPaginations.info[key] = Paginations.default(info);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/** Removes a pagination */\r\n\t\tremove: (info?: any, prefix?: string) => {\r\n\t\t\tvar key = Paginations.getKey(info, prefix);\r\n\t\t\tif (key) {\r\n\t\t\t\tdelete Paginations.info[key];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/** Builds the well-formed request for working with REST API */\r\n\texport function buildRequest(filterBy?: any, sortBy?: any, pagination?: any, onPreCompleted?: (request: { FilterBy: any, SortBy: any, Pagination: any }) => void): { FilterBy: any, SortBy: any, Pagination: any } {\r\n\t\tvar request = {\r\n\t\t\tFilterBy: AppUtility.isObject(filterBy, true)\r\n\t\t\t\t? AppUtility.clone(filterBy)\r\n\t\t\t\t: {},\r\n\t\t\tSortBy: AppUtility.isObject(sortBy, true)\r\n\t\t\t\t? AppUtility.clone(sortBy)\r\n\t\t\t\t: {},\r\n\t\t\tPagination: Paginations.default({\r\n\t\t\t\tPagination: AppUtility.isObject(pagination, true)\r\n\t\t\t\t\t? AppUtility.clone(pagination)\r\n\t\t\t\t\t: undefined \r\n\t\t\t})\r\n\t\t};\r\n\t\tonPreCompleted != undefined && onPreCompleted(request);\r\n\t\treturn request;\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/data.ts","import { Injectable } from \"@angular/core\";\r\nimport { Http } from \"@angular/http\";\r\nimport { Storage } from \"@ionic/storage\";\r\nimport { List } from \"linqts\";\r\nimport \"rxjs/add/operator/toPromise\";\r\n\r\nimport { AppUtility } from \"../helpers/utility\";\r\nimport { AppEvents } from \"../helpers/events\";\r\nimport { AppRTU } from \"../helpers/rtu\";\r\nimport { AppAPI } from \"../helpers/api\";\r\nimport { AppData } from \"../models/data\";\r\nimport { AppModels } from \"../models/objects\";\r\n\r\nimport { ConfigurationService } from \"./configuration\";\r\n\r\n@Injectable()\r\nexport class StatisticsService {\r\n\r\n\tconstructor(public http: Http, public storage: Storage, public configSvc: ConfigurationService) {\r\n\t\tAppAPI.setHttp(this.http);\r\n\t}\r\n\r\n\t// working with status\r\n\tasync loadStatusAsync(onCompleted?: (d: any) => void) {\r\n\t\tvar data = await this.storage.get(\"VIEApps-Status\");\r\n\t\tif (AppUtility.isNotEmpty(data)) {\r\n\t\t\tAppData.Statistics.Status = new List<any>(JSON.parse(data as string))\r\n\t\t\t\t.Select(d => AppModels.StatisticBase.deserialize(d))\r\n\t\t\t\t.ToArray();\r\n\t\t\tAppEvents.broadcast(\"StatusAreUpdated\");\r\n\t\t}\r\n\t\tonCompleted != undefined && onCompleted(AppData.Statistics.Status);\r\n\t}\r\n\r\n\tasync saveStatusAsync(onCompleted?: (d: any) => void) {\r\n\t\tvar status = new List<AppModels.StatisticBase>(AppData.Statistics.Status)\r\n\t\t\t.Where(s => s.Name != \"OnlineUsers\")\r\n\t\t\t.ToArray();\r\n\t\tawait this.storage.set(\"VIEApps-Status\", JSON.stringify(status));\r\n\t\tonCompleted != undefined && onCompleted(AppData.Statistics.Status);\r\n\t}\r\n\r\n\tasync updateStatusAsync(data: any, onCompleted?: (d: any) => void) {\r\n\t\tif (AppUtility.isArray(data)) {\r\n\t\t\tAppData.Statistics.Status = new List<any>(data)\r\n\t\t\t\t.Select(d => AppModels.StatisticBase.deserialize(d))\r\n\t\t\t\t.ToArray();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet online = new List<AppModels.StatisticBase>(AppData.Statistics.Status)\r\n\t\t\t\t.Where(s => s.Name == \"OnlineUsers\")\r\n\t\t\t\t.FirstOrDefault();\r\n\r\n\t\t\tif (online != undefined) {\r\n\t\t\t\tonline.Counters = data as number;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tAppData.Statistics.Status.push(AppModels.StatisticBase.deserialize({ Name: \"OnlineUsers\", Counters: data as number }));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tawait this.saveStatusAsync(onCompleted);\r\n\t}\r\n\r\n\tasync fetchStatusAsync(onNext?: (d: any) => void, onError?: (e: any) => void) {\r\n\t\tif (AppRTU.isReady()) {\r\n\t\t\tAppRTU.call(\"books\", \"statistic\", \"GET\", { \"object-identity\": \"status\" });\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await AppAPI.GetAsync(\"books/statistic/status\");\r\n\t\t\t\tlet data = response.json();\r\n\t\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\t\tawait this.updateStatusAsync(data.Data.Objects);\r\n\t\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.error(\"[Statistics]: Error occurred while fetching status\");\r\n\t\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tonError != undefined && onError(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// working with categories\r\n\tasync loadCategoriesAsync(onCompleted?: (d: any) => void) {\r\n\t\tvar data = await this.storage.get(\"VIEApps-Categories\");\r\n\t\tif (AppUtility.isNotEmpty(data)) {\r\n\t\t\tAppData.Statistics.Categories = new List<any>(JSON.parse(data as string))\r\n\t\t\t\t.Select(c => AppModels.StatisticInfo.deserialize(c))\r\n\t\t\t\t.ToArray();\r\n\t\t\tif (AppData.Statistics.Categories.length > 0) {\r\n\t\t\t\tAppEvents.broadcast(\"CategoriesAreUpdated\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tonCompleted != undefined && onCompleted(AppData.Statistics.Categories);\r\n\t}\r\n\r\n\tasync saveCategoriesAsync(onCompleted?: (d: any) => void) {\r\n\t\tawait this.storage.set(\"VIEApps-Categories\", JSON.stringify(AppData.Statistics.Categories));\r\n\t\tAppEvents.broadcast(\"CategoriesAreUpdated\");\r\n\t\tonCompleted != undefined && onCompleted(AppData.Statistics.Categories);\r\n\t}\r\n\r\n\tasync updateCategoriesAsync(categories: Array<any>, onCompleted?: (d: any) => void) {\r\n\t\tAppData.Statistics.Categories = new List(categories)\r\n\t\t\t.Select(c => AppModels.StatisticInfo.deserialize(c))\r\n\t\t\t.ToArray();\r\n\t\tawait this.saveCategoriesAsync(onCompleted);\r\n\t}\r\n\r\n\tasync fetchCategoriesAsync(onNext?: (d: any) => void, onError?: (e: any) => void) {\r\n\t\tif (AppRTU.isReady()) {\r\n\t\t\tAppRTU.call(\"books\", \"statistic\", \"GET\", { \"object-identity\": \"categories\" });\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await AppAPI.GetAsync(\"books/statistic/categories\");\r\n\t\t\t\tlet data = response.json();\r\n\t\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\t\tawait this.updateCategoriesAsync(data.Data.Objects);\r\n\t\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.error(\"[Statistics]: Error occurred while fetching categories\");\r\n\t\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tonError != undefined && onError(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// working with authors\r\n\tAuthors: { Index, Chars } = null;\r\n\r\n\tasync loadAuthorsAsync(onCompleted?: (d: any) => void) {\r\n\t\tvar tasks: Array<Promise<any>> = [];\r\n\t\tnew List(AppUtility.getChars()).ForEach((c) => {\r\n\t\t\ttasks.push(\r\n\t\t\t\tthis.storage.get(\"VIEApps-Authors-\" + c).then((data: any) => {\r\n\t\t\t\t\tif (AppUtility.isNotEmpty(data)) {\r\n\t\t\t\t\t\tAppData.Statistics.Authors.setValue(\r\n\t\t\t\t\t\t\tc,\r\n\t\t\t\t\t\t\tnew List<any>(JSON.parse(data as string))\r\n\t\t\t\t\t\t\t\t.Select(a => AppModels.StatisticBase.deserialize(a))\r\n\t\t\t\t\t\t\t\t.ToArray()\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t});\r\n\t\tawait Promise.all(tasks);\r\n\t\tAppEvents.broadcast(\"AuthorsAreUpdated\");\r\n\t\tonCompleted != undefined && onCompleted(AppData.Statistics.Authors);\r\n\t}\r\n\r\n\tasync saveAuthorsAsync(char: string, onCompleted?: (d: any) => void) {\r\n\t\tawait this.storage.set(\"VIEApps-Authors-\" + char, JSON.stringify(AppData.Statistics.Authors.getValue(char)));\r\n\t\tonCompleted != undefined && onCompleted(AppData.Statistics.Authors.getValue(char));\r\n\t}\r\n\r\n\tasync updateAuthorsAsync(char: string, authors: Array<any>, onCompleted?: (d: any) => void) {\r\n\t\tAppData.Statistics.Authors.setValue(\r\n\t\t\tchar,\r\n\t\t\tnew List(authors)\r\n\t\t\t\t.Select(a => AppModels.StatisticBase.deserialize(a))\r\n\t\t\t\t.ToArray()\r\n\t\t);\r\n\t\tawait this.saveAuthorsAsync(char, onCompleted);\r\n\t}\r\n\r\n\tasync fetchAuthorsAsync(onCompleted?: (d: any) => void) {\r\n\t\tif (this.Authors == null) {\r\n\t\t\tthis.Authors = {\r\n\t\t\t\tIndex: -1,\r\n\t\t\t\tChars: AppUtility.getChars()\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tthis.Authors.Index++;\r\n\r\n\t\tif (this.Authors.Index < this.Authors.Chars.length) {\r\n\t\t\ttry {\r\n\t\t\t\tlet path = \"books/statistic/authors\"\r\n\t\t\t\t\t+ \"?char=\" + this.Authors.Chars[this.Authors.Index]\r\n\t\t\t\tlet response = await AppAPI.GetAsync(path);\r\n\t\t\t\tlet data = response.json();\r\n\t\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\t\tawait this.updateAuthorsAsync(this.Authors.Chars[this.Authors.Index], data.Data.Objects);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.error(\"[Statistics]: Error occurred while fetching authors [\" + this.Authors.Chars[this.Authors.Index] + \"]\");\r\n\t\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\t}\r\n\r\n\t\t\t\twindow.setTimeout(() => {\r\n\t\t\t\t\tthis.fetchAuthorsAsync(onCompleted);\r\n\t\t\t\t}, 13);\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tconsole.error(\"[Statistics]: Error occurred while fetching authors [\" + this.Authors.Chars[this.Authors.Index] + \"]\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tAppEvents.broadcast(\"AuthorsAreUpdated\");\r\n\t\t\tonCompleted != undefined && onCompleted(AppData.Statistics.Authors);\r\n\t\t}\r\n\t}\r\n\r\n\t// load all statistics\r\n\tasync loadStatisticsAsync() {\r\n\t\tawait Promise.all([\r\n\t\t\tthis.loadCategoriesAsync(),\r\n\t\t\tthis.loadAuthorsAsync(),\r\n\t\t\tthis.loadStatusAsync()\r\n\t\t]);\r\n\t}\r\n\r\n\t// fetch all statistics\r\n\tfetchStatistics() {\r\n\t\t// fetch statistics\r\n\t\tif (AppRTU.isReady()) {\r\n\t\t\tAppRTU.send({\r\n\t\t\t\tServiceName: \"books\",\r\n\t\t\t\tObjectName: \"statistic\",\r\n\t\t\t\tVerb: \"GET\",\r\n\t\t\t\tQuery: {\r\n\t\t\t\t\t\"object-identity\": \"all\"\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tAppUtility.setTimeout(async () => {\r\n\t\t\t\tawait Promise.all([\r\n\t\t\t\t\tthis.fetchCategoriesAsync(),\r\n\t\t\t\t\tthis.fetchAuthorsAsync(),\r\n\t\t\t\t\tthis.fetchStatusAsync()\r\n\t\t\t\t]);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// process RTU message\r\n\tprocessRTU(message: any) {\r\n\t\t// parse\r\n\t\tvar info = AppRTU.parse(message.Type);\r\n\r\n\t\t// status\r\n\t\tif (info.ObjectName == \"Statistic#Status\") {\r\n\t\t\tthis.updateStatusAsync(message.Data.Objects);\r\n\t\t}\r\n\t\t\r\n\t\t// categories\r\n\t\telse if (info.ObjectName == \"Statistic#Categories\") {\r\n\t\t\tthis.updateCategoriesAsync(message.Data.Objects);\r\n\t\t}\r\n\r\n\t\t// authors\r\n\t\telse if (info.ObjectName == \"Statistic#Authors\") {\r\n\t\t\tthis.updateAuthorsAsync(message.Data.Char, message.Data.Objects);\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/statistics.ts","import { Injectable } from \"@angular/core\";\r\nimport { Http } from \"@angular/http\";\r\nimport { Storage } from \"@ionic/storage\";\r\nimport \"rxjs/add/operator/toPromise\";\r\n\r\nimport { AppUtility } from \"../helpers/utility\";\r\nimport { AppAPI } from \"../helpers/api\";\r\nimport { AppEvents } from \"../helpers/events\";\r\n\r\nimport { AppData } from \"../models/data\";\r\n\r\n@Injectable()\r\nexport class ResourcesService {\r\n\r\n\tconstructor(public http: Http, public storage: Storage) {\r\n\t\tAppAPI.setHttp(this.http);\r\n\t}\r\n\r\n\t// working with remote resources\r\n\tasync fetchResourceAsync(onNext?: () => void, onError?: (e: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet path = \"statics/services/books.json\";\r\n\t\t\tlet response = await AppAPI.GetAsync(path);\r\n\t\t\tAppData.Configuration.resources = response.json()\r\n\t\t\tonNext != undefined && onNext();\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Resources]: Error occurred while fetching the remote resource\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t// working with geo-meta\r\n\tasync loadGeoMetaAsync() {\r\n\t\tlet data = await this.storage.get(\"VIEApps-GeoMeta\");\r\n\t\tif (AppUtility.isNotEmpty(data)) {\r\n\t\t\tAppData.Configuration.meta = JSON.parse(data as string);\r\n\t\t}\r\n\r\n\t\tif (!AppUtility.isNotEmpty(AppData.Configuration.meta.country)) {\r\n\t\t\tAppData.Configuration.meta.country = \"VN\";\r\n\t\t}\r\n\r\n\t\tif (!AppData.Configuration.meta.provinces[AppData.Configuration.meta.country]) {\r\n\t\t\tawait this.loadGeoProvincesAsync(AppData.Configuration.meta.country, () => {\r\n\t\t\t\tAppData.Configuration.meta.countries.length < 1 && window.setTimeout(async () => {\r\n\t\t\t\t\tawait this.loadGeoCountriesAsync();\r\n\t\t\t\t}, 123);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tAppEvents.broadcast(\"GeoMetaIsLoaded\", AppData.Configuration.meta);\r\n\t\t\tAppData.Configuration.meta.countries.length < 1 && window.setTimeout(async () => {\r\n\t\t\t\tawait this.loadGeoCountriesAsync();\r\n\t\t\t}, 123);\r\n\t\t}\r\n\t}\r\n\r\n\tasync loadGeoCountriesAsync(onCompleted?: () => void) {\r\n\t\ttry {\r\n\t\t\tlet path = \"statics/geo/countries.json\";\r\n\t\t\tlet response = await AppAPI.GetAsync(path);\r\n\t\t\tawait this.saveGeoMetaAsync(response.json(), onCompleted);\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Resources]: Error occurred while fetching the meta countries\", e);\r\n\t\t}\r\n\t}\r\n\r\n\tasync loadGeoProvincesAsync(country?: string, onCompleted?: () => void) {\r\n\t\ttry {\r\n\t\t\tlet path = \"statics/geo/provinces/\" + (country || AppData.Configuration.meta.country) + \".json\";\r\n\t\t\tlet response = await AppAPI.GetAsync(path);\r\n\t\t\tawait this.saveGeoMetaAsync(response.json(), onCompleted);\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Resources]: Error occurred while fetching the meta provinces\", e);\r\n\t\t}\r\n\t}\r\n\r\n\tasync saveGeoMetaAsync(data: any, onCompleted?: () => void) {\r\n\t\tif (AppUtility.isObject(data, true) && AppUtility.isNotEmpty(data.code) && AppUtility.isArray(data.provinces)) {\r\n\t\t\tAppData.Configuration.meta.provinces[data.code] = data;\r\n\t\t}\r\n\t\telse if (AppUtility.isObject(data, true) && AppUtility.isArray(data.countries)) {\r\n\t\t\tAppData.Configuration.meta.countries = data.countries;\r\n\t\t}\r\n\r\n\t\tawait this.storage.set(\"VIEApps-GeoMeta\", JSON.stringify(AppData.Configuration.meta));\r\n\t\tAppEvents.broadcast(\"GeoMetaIsLoaded\", AppData.Configuration.meta);\r\n\t\tonCompleted != undefined && await onCompleted();\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/resources.ts","import { Component } from \"@angular/core\";\r\nimport { NavController, NavParams } from \"ionic-angular\";\r\nimport { List } from \"linqts\";\r\n\r\nimport { AppUtility } from \"../../helpers/utility\";\r\nimport { AppEvents } from \"../../helpers/events\";\r\nimport { AppData } from \"../../models/data\";\r\nimport { AppModels } from \"../../models/objects\";\r\n\r\nimport { ConfigurationService } from \"../../providers/configuration\";\r\nimport { ResourcesService } from \"../../providers/resources\";\r\nimport { BooksService } from \"../../providers/books\";\r\n\r\nimport { ReadBookPage } from \"../books/read/read\";\r\n\r\n@Component({\r\n\tselector: \"page-home\",\r\n\ttemplateUrl: \"home.html\"\r\n})\r\nexport class HomePage {\r\n\r\n\tconstructor(\r\n\t\tpublic navCtrl: NavController,\r\n\t\tpublic navParams: NavParams,\r\n\t\tpublic configSvc: ConfigurationService,\r\n\t\tpublic resourcesSvc: ResourcesService,\r\n\t\tpublic booksSvc: BooksService\r\n\t){\r\n\t}\r\n\r\n\t// attributes\r\n\tinfo = {\r\n\t\ttitle: \"Trang nhất\",\r\n\t\tintroduction: \"\",\r\n\t\tbooks: undefined,\r\n\t\tisAppleOS: AppUtility.isAppleOS()\r\n\t}\r\n\r\n\t// events\r\n\tionViewDidLoad() {\r\n\t\tAppEvents.on(\r\n\t\t\t\"AppIsInitialized\",\r\n\t\t\t() => {\r\n\t\t\t\tthis.prepare();\r\n\t\t\t},\r\n\t\t\t\"UpdateHomePageWhenAppIsInitializedEventHandler\"\r\n\t\t);\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\tif (this.info.books != undefined) {\r\n\t\t\tthis.update();\r\n\t\t}\r\n\t\telse if (this.configSvc.isReady()) {\r\n\t\t\tthis.prepare();\r\n\t\t}\r\n\t}\r\n\r\n\tionViewWillUnload() {\r\n\t\tAppEvents.off(\"AppIsInitialized\", \"UpdateHomePageWhenAppIsInitializedEventHandler\");\r\n\t}\r\n\r\n\t// helpers\r\n\tprepare() {\r\n\t\t// introduction\r\n\t\tif (!AppData.Configuration.resources[\"introduction\"]) {\r\n\t\t\tthis.resourcesSvc.fetchResourceAsync(() => {\r\n\t\t\t\tthis.info.introduction = AppData.Configuration.resources[\"introduction\"];\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// newest books\r\n\t\tif (this.info.books != undefined) {\r\n\t\t\tthis.update();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (AppData.Books.size() < 1) {\r\n\t\t\t\tthis.booksSvc.fetchAsync(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tFilterBy: {},\r\n\t\t\t\t\t\tSortBy: {},\r\n\t\t\t\t\t\tPagination: AppData.Paginations.default() \r\n\t\t\t\t\t},\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdate() {\r\n\t\t// introduction\r\n\t\tif (AppData.Configuration.resources[\"introduction\"]) {\r\n\t\t\tthis.info.introduction = AppData.Configuration.resources[\"introduction\"];\r\n\t\t}\r\n\r\n\t\t// newest books\r\n\t\tthis.info.books = new List(AppData.Books.values())\r\n\t\t\t.OrderByDescending(b => b.LastUpdated)\r\n\t\t\t.Take(20)\r\n\t\t\t.ToArray();\r\n\t\tthis.info.books = AppUtility.getTopScores(this.info.books, 12);\r\n\t}\r\n\r\n\ttrackBy(index: number, book: AppModels.Book) {\r\n\t\treturn book.ID;\r\n\t}\r\n\r\n\topenBook(book: AppModels.Book) {\r\n\t\tthis.navCtrl.push(ReadBookPage, { ID: book.ID });\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Component, ViewChild } from \"@angular/core\";\r\nimport { NavController, NavParams, ActionSheetController, AlertController, Searchbar, InfiniteScroll, Content } from \"ionic-angular\";\r\nimport { Keyboard } from \"@ionic-native/keyboard\";\r\nimport { List } from \"linqts\";\r\n\r\nimport { AppUtility } from \"../../../helpers/utility\";\r\nimport { AppEvents } from \"../../../helpers/events\";\r\nimport { AppData } from \"../../../models/data\";\r\nimport { AppModels } from \"../../../models/objects\";\r\n\r\nimport { AuthenticationService } from \"../../../providers/authentication\";\r\nimport { BooksService } from \"../../../providers/books\";\r\n\r\nimport { SearchPage } from \"../../search/search\";\r\nimport { ReadBookPage } from \"../read/read\";\r\n\r\n@Component({\r\n\tselector: \"page-surf-books\",\r\n\ttemplateUrl: \"surf.html\"\r\n})\r\nexport class SurfBooksPage {\r\n\tconstructor(\r\n\t\tpublic navCtrl: NavController,\r\n\t\tpublic navParams: NavParams,\r\n\t\tpublic actionSheetCtrl: ActionSheetController,\r\n\t\tpublic alertCtrl: AlertController,\r\n\t\tpublic keyboard: Keyboard,\r\n\t\tpublic authSvc: AuthenticationService,\r\n\t\tpublic booksSvc: BooksService\r\n\t){\r\n\t}\r\n\r\n\t// attributes\r\n\tinfo = {\r\n\t\tfilterBy: {\r\n\t\t\tQuery: undefined,\r\n\t\t\tAnd: {\r\n\t\t\t\tCategory: {\r\n\t\t\t\t\tEquals: undefined\r\n\t\t\t\t},\r\n\t\t\t\tAuthor: {\r\n\t\t\t\t\tEquals: undefined\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortBy: \"\",\r\n\t\tpagination: AppData.Paginations.default(),\r\n\t\ttitle: \"Loading...\",\r\n\t\tprocessing: false,\r\n\t\tfiltering: false,\r\n\t\ttotalRecords: 0,\r\n\t\tpageNumber: 0,\r\n\t\tdisplayPages: 3,\r\n\t\toffset: 96,\r\n\t\tmode: \"auto\",\r\n\t\tisAppleOS: AppUtility.isAppleOS()\r\n\t};\r\n\tsorts: Array<any> = [];\r\n\tbooks: Array<AppModels.Book> = [];\r\n\tratings = {};\r\n\r\n\t// controls\r\n\t@ViewChild(Searchbar) searchBarCtrl: Searchbar;\r\n\t@ViewChild(Content) contentCtrl: Content;\r\n\t\r\n\t// when the page has loaded (only once)\r\n\tionViewDidLoad() {\r\n\t\tthis.sorts = [\r\n\t\t{\r\n\t\t\tlabel: \"Tiêu đề (A - Z)\",\r\n\t\t\tvalue: \"Title\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Mới cập nhật\",\r\n\t\t\tvalue: \"LastUpdated\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Nhiều chương/phần\",\r\n\t\t\tvalue: \"Chapters\"\r\n\t\t}];\r\n\t\tthis.info.sortBy = this.sorts[1].value;\r\n\r\n\t\tthis.info.filterBy.And.Category.Equals = this.navParams.get(\"Category\");\r\n\t\tthis.info.filterBy.And.Category.Equals = this.info.filterBy.And.Category.Equals || \"\";\r\n\r\n\t\tthis.info.filterBy.And.Author.Equals = this.navParams.get(\"Author\");\r\n\t\tthis.info.filterBy.And.Author.Equals = this.info.filterBy.And.Author.Equals || \"\";\r\n\r\n\t\tthis.info.title = this.info.filterBy.And.Category.Equals != \"\"\r\n\t\t\t? \"Thể loại: \" + this.info.filterBy.And.Category.Equals\r\n\t\t\t: \"Tác giả: \" + this.info.filterBy.And.Author.Equals;\r\n\t}\r\n\t\r\n\t// when the page has active\r\n\tionViewDidEnter() {\r\n\t\t// set active page\r\n\t\tAppEvents.broadcast(\"UpdateActiveNav\", { name: \"SurfBooksPage\", component: SurfBooksPage, params: this.navParams.data });\r\n\r\n\t\t// books\r\n\t\tif (this.books.length < 1) {\r\n\t\t\tvar request = AppData.buildRequest(this.info.filterBy, undefined, this.info.pagination, r => {\r\n\t\t\t\tif (!AppUtility.isNotEmpty(r.FilterBy.And.Category.Equals)) {\r\n\t\t\t\t\tr.FilterBy.And.Category.Equals = undefined;\r\n\t\t\t\t}\r\n\t\t\t\tif (!AppUtility.isNotEmpty(r.FilterBy.And.Author.Equals)) {\r\n\t\t\t\t\tr.FilterBy.And.Author.Equals = undefined;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.info.pagination = AppData.Paginations.get(request, \"B\");\r\n\t\r\n\t\t\tif (this.info.pagination == undefined) {\r\n\t\t\t\tthis.search();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.info.pageNumber = 1;\r\n\t\t\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\t\t\tthis.build();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// books\r\n\tget(onepage: boolean = true, pageNumber?: number) {\r\n\t\t// initialize\r\n\t\tvar books = new List(AppData.Books.values());\r\n\t\t\r\n\t\t// filter\r\n\t\tvar query = this.info.filtering && AppUtility.isNotEmpty(this.info.filterBy.Query)\r\n\t\t\t? AppUtility.toANSI(this.info.filterBy.Query).trim().toLowerCase()\r\n\t\t\t: \"\";\r\n\t\tvar filterByCategory = this.info.filterBy.And.Category.Equals != \"\";\r\n\t\tvar filterByAuthor = this.info.filterBy.And.Author.Equals != \"\";\r\n\r\n\t\tif (query != \"\" || filterByCategory || filterByAuthor) {\r\n\t\t\tbooks = books.Where(b => {\r\n\t\t\t\treturn (query != \"\" ? AppUtility.indexOf(b.ANSITitle, query) > -1 : true)\r\n\t\t\t\t\t&& (filterByCategory ? AppUtility.indexOf(b.Category, this.info.filterBy.And.Category.Equals) == 0 : true)\r\n\t\t\t\t\t&& (filterByAuthor ? b.Author == this.info.filterBy.And.Author.Equals : true);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// sort\r\n\t\tswitch (this.info.sortBy) {\r\n\t\t\tcase \"LastUpdated\":\r\n\t\t\t\tbooks = books.OrderByDescending(b => b.LastUpdated);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Chapters\":\r\n\t\t\t\tbooks = books.OrderByDescending(b => b.TotalChapters).ThenBy(a => a.LastUpdated);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbooks = books.OrderBy(b => b.Title).ThenByDescending(a => a.LastUpdated);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// pagination\r\n\t\tpageNumber = pageNumber || this.info.pageNumber;\r\n\t\tif (onepage) {\r\n\t\t\tif (pageNumber > 1) {\r\n\t\t\t\tbooks = books.Skip((pageNumber - 1) * this.info.pagination.PageSize);\r\n\t\t\t}\r\n\t\t\tbooks = books.Take(this.info.pagination.PageSize);\r\n\t\t}\r\n\t\telse if (!this.info.filtering) {\r\n\t\t\tbooks = books.Take(pageNumber * this.info.pagination.PageSize);\r\n\t\t}\r\n\r\n\t\t// return the array of books\r\n\t\treturn books.ToArray();\r\n\t}\r\n\r\n\tsearch(onPreCompleted?: () => void, onPostCompleted?: () => void) {\r\n\t\tvar request = AppData.buildRequest(this.info.filterBy, undefined, this.info.pagination, r => {\r\n\t\t\tif (!AppUtility.isNotEmpty(r.FilterBy.And.Category.Equals)) {\r\n\t\t\t\tr.FilterBy.And.Category.Equals = undefined;\r\n\t\t\t}\r\n\t\t\tif (!AppUtility.isNotEmpty(r.FilterBy.And.Author.Equals)) {\r\n\t\t\t\tr.FilterBy.And.Author.Equals = undefined;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tthis.booksSvc.fetchAsync(request, (data?: any) => {\r\n\t\t\tthis.info.pagination = AppData.Paginations.get(request, \"B\");\r\n\t\t\tthis.info.pageNumber = this.info.pagination.PageNumber;\r\n\t\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\t\tthis.build(\"down\", onPreCompleted, onPostCompleted);\r\n\t\t});\r\n\t}\r\n\t\r\n\tbuild(direction: string = \"down\", onPreCompleted?: () => void, onPostCompleted?: () => void) {\r\n\t\t// pre handler\r\n\t\tonPreCompleted != undefined && onPreCompleted();\r\n\t\t\r\n\t\t// books\r\n\t\t/*\r\n\t\tif (direction == \"up\") {\r\n\t\t\tlet books = new Array<AppModels.Book>();\r\n\t\t\tif (this.info.pageNumber > 1) {\r\n\t\t\t\tbooks = this.get(true, this.info.pageNumber - 1).concat(books);\r\n\t\t\t}\r\n\t\t\tif (this.info.pageNumber > 2) {\r\n\t\t\t\tbooks = this.get(true, this.info.pageNumber - 2).concat(books);\r\n\t\t\t}\r\n\t\t\tthis.books = new List(books.concat(this.books)).Distinct().ToArray();\r\n\t\t\tAppUtility.setTimeout(() => {\r\n\t\t\t\tif (this.books.length > this.info.displayPages * this.info.pagination.PageSize) {\r\n\t\t\t\t\tAppUtility.splice(this.books, this.books.length - (this.info.displayPages * this.info.pagination.PageSize));\r\n\t\t\t\t}\r\n\t\t\t}, 678);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.books = this.books.concat(this.get());\r\n\t\t\tAppUtility.setTimeout(() => {\r\n\t\t\t\tif (this.books.length > this.info.displayPages * this.info.pagination.PageSize) {\r\n\t\t\t\t\tthis.books.splice(0, this.books.length - (this.info.displayPages * this.info.pagination.PageSize));\r\n\t\t\t\t}\r\n\t\t\t}, 678);\r\n\t\t}\r\n\t\t*/\r\n\t\tthis.books = this.get(false);\r\n\t\t\r\n\t\t// ratings & stocks\r\n\t\tnew List(this.books).ForEach(b => {\r\n\t\t\tif (!this.ratings[b.ID]) {\r\n\t\t\t\tlet rating = b.RatingPoints.getValue(\"General\");\r\n\t\t\t\tthis.ratings[b.ID] = rating != undefined ? rating.Average : 0;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// post handler\r\n\t\tonPostCompleted != undefined && onPostCompleted();\r\n\t}\r\n\r\n\t// actions\r\n\ttrackBy(index: number, book: AppModels.Book) {\r\n\t\treturn book.ID;\r\n\t}\r\n\r\n\topenBook(book: AppModels.Book) {\r\n\t\tthis.navCtrl.push(ReadBookPage, { ID: book.ID });\r\n\t}\r\n\r\n\tshowActions() {\r\n\t\tvar actionSheet = this.actionSheetCtrl.create({\r\n\t\t\tenableBackdropDismiss: true,\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Mở tìm kiếm\",\r\n\t\t\t\t\ticon: this.info.isAppleOS ? undefined : \"search\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tAppEvents.broadcast(\"OpenPage\", { component: SearchPage, params: this.info.filterBy, doPush: true });\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Lọc/Tìm nhanh\",\r\n\t\t\t\t\ticon: this.info.isAppleOS ? undefined : \"funnel\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.showFilter();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Thay đổi cách sắp xếp\",\r\n\t\t\t\t\ticon: this.info.isAppleOS ? undefined : \"list-box\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.showSorts();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\r\n\t\tif (this.info.pagination != null && this.info.pageNumber < this.info.pagination.PageNumber) {\r\n\t\t\tactionSheet.addButton({\r\n\t\t\t\ttext: \"Hiển thị toàn bộ \" + AppData.Paginations.computeTotal(this.info.pagination.PageNumber, this.info.pagination) + \" kết quả\",\r\n\t\t\t\ticon: this.info.isAppleOS ? undefined : \"eye\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.info.pageNumber = this.info.pagination.PageNumber;\r\n\t\t\t\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\t\t\t\tthis.build();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tactionSheet.addButton({\r\n\t\t\ttext: \"Huỷ bỏ\",\r\n\t\t\ticon: this.info.isAppleOS ? undefined : \"close\",\r\n\t\t\trole: \"cancel\"\r\n\t\t});\r\n\t\t\r\n\t\tactionSheet.present();\r\n\t}\r\n\r\n\tshowFilter() {\r\n\t\tthis.info.filtering = true;\r\n\t\tAppUtility.focus(this.searchBarCtrl, this.keyboard);\r\n\t}\r\n\r\n\tshowSorts() {\r\n\t\tvar alert = this.alertCtrl.create({\r\n\t\t\ttitle: \"Sắp xếp theo\",\r\n\t\t\tenableBackdropDismiss: true,\r\n\t\t\tbuttons: [\r\n\t\t\t{\r\n\t\t\t\ttext: \"Huỷ\",\r\n\t\t\t\trole: \"cancel\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: \"Đặt\",\r\n\t\t\t\thandler: (sortBy: string) => {\r\n\t\t\t\t\tthis.onSort(sortBy);\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t});\r\n\r\n\t\tnew List(this.sorts).ForEach(o => alert.addInput({ type: \"radio\", label: o.label, value: o.value, checked: this.info.sortBy == o.value}));\r\n\t\talert.present();\r\n\t}\r\n\r\n\t// event handlers\r\n\tonFilter() {\r\n\t\tthis.books = this.get(false);\r\n\t}\r\n\r\n\tonCancel() {\r\n\t\tthis.info.filterBy.Query = \"\";\r\n\r\n\t\tvar request = AppData.buildRequest(this.info.filterBy, undefined, this.info.pagination, r => {\r\n\t\t\tif (!AppUtility.isNotEmpty(r.FilterBy.And.Category.Equals)) {\r\n\t\t\t\tr.FilterBy.And.Category.Equals = undefined;\r\n\t\t\t}\r\n\t\t\tif (!AppUtility.isNotEmpty(r.FilterBy.And.Author.Equals)) {\r\n\t\t\t\tr.FilterBy.And.Author.Equals = undefined;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.info.pagination = AppData.Paginations.get(request, \"B\");\r\n\r\n\t\tthis.info.pageNumber = 1;\r\n\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\tthis.books = this.get();\r\n\r\n\t\tAppUtility.setTimeout(() => {\r\n\t\t\tthis.info.filtering = false;\r\n\t\t}, 234);\r\n\t}\r\n\r\n\tonSort(sortBy: string) {\r\n\t\tif (this.info.sortBy == sortBy) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.info.processing = true;\r\n\t\tthis.info.sortBy = sortBy;\r\n\t\tthis.contentCtrl.scrollTo(0, this.info.offset / 2).then(() => {\r\n\t\t\tthis.info.pageNumber = 1;\r\n\t\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\t\tthis.books = this.get();\r\n\t\t\tAppUtility.setTimeout(() => {\r\n\t\t\t\tthis.info.processing = false;\r\n\t\t\t}, 234);\r\n\t\t});\r\n\t}\r\n\r\n\t// handle the scroll\r\n\tonInfiniteScroll(infiniteScroll: InfiniteScroll) {\r\n\t\tif (this.info.filtering) {\r\n\t\t\tinfiniteScroll.complete();\r\n\t\t}\r\n\t\telse if (!this.info.processing) {\r\n\t\t\t// update state\r\n\t\t\tthis.info.processing = true;\r\n\r\n\t\t\t/*\r\n\t\t\t// scroll up\r\n\t\t\tif (infiniteScroll._position != \"bottom\") {\r\n\t\t\t\tthis.info.pageNumber = this.info.pageNumber > this.info.displayPages\r\n\t\t\t\t\t? this.info.pageNumber - 1\r\n\t\t\t\t\t: this.info.displayPages;\r\n\t\t\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\t\t\t\r\n\t\t\t\tthis.build(\"up\",\r\n\t\t\t\t\t() => { },\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tinfiniteScroll.complete();\r\n\t\t\t\t\t\tthis.info.processing = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// scroll down\r\n\t\t\telse {\r\n\t\t\t\t// data is avalable\r\n\t\t\t\tif (this.info.pageNumber < this.info.pagination.PageNumber) {\r\n\t\t\t\t\tthis.info.pageNumber++;\r\n\t\t\t\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.build(\"down\",\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tif (AppUtility.isAppleSafari()) {\r\n\t\t\t\t\t\t\t\tthis.scrollDown();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tinfiniteScroll.complete();\r\n\t\t\t\t\t\t\tthis.info.processing = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// data is not available, then search next page\r\n\t\t\t\telse if (this.info.pagination.PageNumber < this.info.pagination.TotalPages) {\r\n\t\t\t\t\tthis.search(\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tif (AppUtility.isAppleSafari()) {\r\n\t\t\t\t\t\t\t\tthis.scrollDown();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tinfiniteScroll.complete();\r\n\t\t\t\t\t\t\tthis.info.processing = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// all data are fetched\r\n\t\t\t\telse {\r\n\t\t\t\t\tinfiniteScroll.complete();\r\n\t\t\t\t\tthis.info.processing = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\t// data is avalable\r\n\t\t\tif (this.info.pageNumber < this.info.pagination.PageNumber) {\r\n\t\t\t\tthis.info.pageNumber++;\r\n\t\t\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\t\t\t\r\n\t\t\t\tthis.build(\"down\",\r\n\t\t\t\t\t() => { },\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tinfiniteScroll.complete();\r\n\t\t\t\t\t\tthis.info.processing = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// data is not available, then search next page\r\n\t\t\telse if (this.info.pagination.PageNumber < this.info.pagination.TotalPages) {\r\n\t\t\t\tthis.search(\r\n\t\t\t\t\t() => { },\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tinfiniteScroll.complete();\r\n\t\t\t\t\t\tthis.info.processing = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// all data are fetched\r\n\t\t\telse {\r\n\t\t\t\tinfiniteScroll.complete();\r\n\t\t\t\tthis.info.processing = false;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tscrollDown() {\r\n\t\ttry {\r\n\t\t\tif (this.info.pageNumber > this.info.displayPages) {\r\n\t\t\t\tthis.contentCtrl.scrollTo(0, this.contentCtrl.scrollTop - (this.info.offset * this.info.pagination.PageSize), 567);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) { }\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/books/surf/surf.ts","import { Component, ViewChild } from \"@angular/core\";\r\nimport { NavController, NavParams, Searchbar, InfiniteScroll } from \"ionic-angular\";\r\nimport { Keyboard } from \"@ionic-native/keyboard\";\r\nimport { List } from \"linqts\";\r\n\r\nimport { AppUtility } from \"../../helpers/utility\";\r\nimport { AppData } from \"../../models/data\";\r\nimport { AppModels } from \"../../models/objects\";\r\n\r\nimport { BooksService } from \"../../providers/books\";\r\nimport { ReadBookPage } from \"../books/read/read\";\r\n\r\n@Component({\r\n\tselector: \"page-search\",\r\n\ttemplateUrl: \"search.html\"\r\n})\r\nexport class SearchPage {\r\n\tconstructor(\r\n\t\tpublic navCtrl: NavController,\r\n\t\tpublic navParams: NavParams,\r\n\t\tpublic keyboard: Keyboard,\r\n\t\tpublic booksSvc: BooksService\r\n\t){\r\n\t}\r\n\r\n\t// attributes\r\n\tinfo = {\r\n\t\tfilterBy: {\r\n\t\t\tQuery: undefined,\r\n\t\t\tAnd: {\r\n\t\t\t\tCategory: {\r\n\t\t\t\t\tEquals: undefined\r\n\t\t\t\t},\r\n\t\t\t\tAuthor: {\r\n\t\t\t\t\tEquals: undefined\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tpagination: AppData.Paginations.default(),\r\n\t\ttotalRecords: 0,\r\n\t\tpageNumber: 0,\r\n\t\ttitle: \"Searching...\"\r\n\t};\r\n\tbooks: Array<AppModels.Book> = null;\r\n\tratings = {};\r\n\r\n\t// controls\r\n\t@ViewChild(Searchbar) searchBarCtrl: Searchbar;\r\n\tinfiniteScrollCtrl: InfiniteScroll = undefined;\r\n\r\n\t// page events\r\n\tionViewDidLoad() {\r\n\t\tvar filterBy = this.navParams.get(\"And\");\r\n\t\tif (AppUtility.isObject(filterBy, true)) {\r\n\t\t\tthis.info.filterBy.And.Category.Equals = filterBy.Category.Equals;\t\r\n\t\t\tthis.info.filterBy.And.Author.Equals = filterBy.Author.Equals;\r\n\t\t}\r\n\r\n\t\tthis.info.filterBy.And.Category.Equals = this.info.filterBy.And.Category.Equals || \"\";\r\n\t\tthis.info.filterBy.And.Author.Equals = this.info.filterBy.And.Author.Equals || \"\";\r\n\t\t\r\n\t\tthis.info.title = \"Tìm kiếm\" + (\r\n\t\t\tthis.info.filterBy.And.Category.Equals != \"\"\r\n\t\t\t\t? \" chỉ trong [\" + this.info.filterBy.And.Category.Equals + \"]\"\r\n\t\t\t\t: this.info.filterBy.And.Author.Equals != \"\"\r\n\t\t\t\t\t? \" chỉ của [\" + this.info.filterBy.And.Author.Equals + \"]\"\r\n\t\t\t\t\t: \"\");\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\tAppUtility.focus(this.searchBarCtrl, this.keyboard);\r\n\t}\r\n\r\n\t// event handlers\r\n\tonSearch() {\r\n\t\tthis.books = [];\r\n\t\tthis.doSearch(() => {\r\n\t\t\tif (this.infiniteScrollCtrl != undefined) {\r\n\t\t\t\tthis.infiniteScrollCtrl.enable(true);\r\n\t\t\t\tthis.infiniteScrollCtrl.complete();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonInfiniteScroll(infiniteScroll: InfiniteScroll) {\r\n\t\t// capture\r\n\t\tif (this.infiniteScrollCtrl == undefined) {\r\n\t\t\tthis.infiniteScrollCtrl = infiniteScroll;\r\n\t\t}\r\n\r\n\t\t// next page\r\n\t\tif (this.info.pagination.PageNumber < this.info.pagination.TotalPages) {\r\n\t\t\tthis.doSearch(() => {\r\n\t\t\t\tthis.infiniteScrollCtrl.complete();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// no more result\r\n\t\telse {\r\n\t\t\tthis.infiniteScrollCtrl.enable(false);\r\n\t\t}\r\n\t}\r\n\r\n\t// search and show the listing of books\r\n\tdoSearch(onCompleted?: () => void) {\r\n\t\t// check\r\n\t\tif (this.info.filterBy.Query == \"\") {\r\n\t\t\tonCompleted != undefined && onCompleted();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// build well-formed request\r\n\t\tvar request = AppData.buildRequest(this.info.filterBy, undefined, this.info.pagination, r => {\r\n\t\t\tif (!AppUtility.isNotEmpty(r.FilterBy.And.Category.Equals)) {\r\n\t\t\t\tr.FilterBy.And.Category.Equals = undefined;\r\n\t\t\t}\r\n\t\t\tif (!AppUtility.isNotEmpty(r.FilterBy.And.Author.Equals)) {\r\n\t\t\t\tr.FilterBy.And.Author.Equals = undefined;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// search e-books\r\n\t\tthis.booksSvc.search(request,\r\n\t\t\t(data: any) => {\r\n\t\t\t\tthis.doBuild(data);\r\n\t\t\t\tif (onCompleted != undefined) {\r\n\t\t\t\t\tonCompleted();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tdoBuild(results?: any) {\r\n\t\t// get pagination\r\n\t\tvar request = AppData.buildRequest(this.info.filterBy, undefined, this.info.pagination, r => {\r\n\t\t\tif (!AppUtility.isNotEmpty(r.FilterBy.And.Category.Equals)) {\r\n\t\t\t\tr.FilterBy.And.Category.Equals = undefined;\r\n\t\t\t}\r\n\t\t\tif (!AppUtility.isNotEmpty(r.FilterBy.And.Author.Equals)) {\r\n\t\t\t\tr.FilterBy.And.Author.Equals = undefined;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.info.pagination = results != undefined && AppUtility.isNotEmpty(this.info.filterBy.Query)\r\n\t\t\t? AppData.Paginations.default(results.Data)\r\n\t\t\t: AppData.Paginations.get(request, \"B\");\r\n\r\n\t\tthis.info.pageNumber = this.info.pagination.PageNumber;\r\n\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\r\n\t\t// initialize\r\n\t\tvar books = AppUtility.isNotEmpty(this.info.filterBy.Query) && results != undefined\r\n\t\t\t? new List<any>(results.Data.Objects).Select(b => AppData.Books.containsKey(b.ID) ? AppData.Books.getValue(b.ID) : AppModels.Book.deserialize(b))\r\n\t\t\t: new List(AppData.Books.values());\r\n\r\n\t\t// filter\r\n\t\tif (!AppUtility.isNotEmpty(this.info.filterBy.Query)) {\r\n\t\t\tlet filterbyCategory = AppUtility.isNotEmpty(this.info.filterBy.And.Category.Equals);\r\n\t\t\tlet filterbyAuthor = AppUtility.isNotEmpty(this.info.filterBy.And.Author.Equals);\r\n\r\n\t\t\tif (filterbyCategory) {\r\n\t\t\t\tbooks = books.Where(b => AppUtility.indexOf(b.Category, this.info.filterBy.And.Category.Equals) == 0);\r\n\t\t\t}\r\n\t\t\telse if (filterbyAuthor) {\r\n\t\t\t\tbooks = books.Where(b => b.Author == this.info.filterBy.And.Author.Equals);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// update the listing of books\r\n\t\tthis.books = AppUtility.isNotEmpty(this.info.filterBy.Query)\r\n\t\t\t? this.books.concat(books.ToArray())\r\n\t\t\t: books.ToArray();\r\n\r\n\t\t// prepare ratings & stocks\r\n\t\tnew List(this.books).ForEach(b => {\r\n\t\t\tif (!this.ratings[b.ID]) {\r\n\t\t\t\tlet rating = b.RatingPoints.getValue(\"General\");\r\n\t\t\t\tthis.ratings[b.ID] = rating != undefined\r\n\t\t\t\t\t? rating.Average\r\n\t\t\t\t\t: 0;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\ttrackBy(index: number, book: AppModels.Book) {\r\n\t\treturn book.ID;\r\n\t}\r\n\r\n\topenBook(book: AppModels.Book) {\r\n\t\tthis.navCtrl.push(ReadBookPage, { ID: book.ID });\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.ts","import { Component, ViewChild } from \"@angular/core\";\nimport { NgForm } from \"@angular/forms\";\nimport { NavController, NavParams, ViewController, AlertController, Loading, LoadingController } from \"ionic-angular\";\nimport { Keyboard } from \"@ionic-native/keyboard\";\n\nimport { AppUtility } from \"../../../helpers/utility\";\nimport { AppEvents } from \"../../../helpers/events\";\nimport { AppData } from \"../../../models/data\";\n\nimport { AuthenticationService } from \"../../../providers/authentication\";\n\n@Component({\n  selector: \"page-signin\",\n  templateUrl: \"signin.html\",\n})\nexport class SignInPage {\n  constructor(\n  \tpublic navCtrl: NavController,\n  \tpublic navParams: NavParams,\n  \tpublic viewCtrl: ViewController,\n  \tpublic alertCtrl: AlertController,\n\t\tpublic loadingCtrl: LoadingController,\n  \tpublic keyboard: Keyboard,\n    public authSvc: AuthenticationService\n  ){\n  }\n\n  // attributes\n  info = {\n  \tstate: {\n  \t\tprocessing: true,\n\t  \tmode: \"SignIn\",\n\t  \ttitle: \"Đăng nhập\",\n\t  \tvalid: true\n  \t},\n\t  account: {\n\t\t\temail: \"\",\n\t\t\tpassword: \"\",\n\t  },\n\t\tcaptcha: {\n\t\t\tcode: \"\",\n\t\t\turi: \"\"\n\t\t}\n  };\n\n\t// controls\n\t@ViewChild(\"email\") emailCtrl;\n\t@ViewChild(\"password\") passwordCtrl;\n\t@ViewChild(\"captcha\") captchaCtrl;\n\tloading: Loading = undefined;\n\n  // page events\n  ionViewDidLoad() {\n  \tthis.info.state.processing = false;\n  }\n\n\tionViewDidEnter() {\n\t\tthis.info.account.email = this.navParams.get(\"email\") || \"\";\n\t\tthis.navParams.get(\"mode\") && this.openRenewPassword();\n\t\tAppUtility.focus(this.emailCtrl, this.keyboard);\n\t}\n\n  ionViewDidLeave() {\n\t\tAppEvents.broadcast(\"SetPreviousPageActive\", { current: \"SignInPage\" });\n  }\n\n  // helpers\n  renewCaptcha(dontFocus?: boolean) {\n  \tthis.authSvc.registerCaptchaAsync(\n  \t\t() => {\n\t  \t\tthis.info.captcha = {\n\t  \t\t\tcode: \"\",\n\t  \t\t\turi: AppData.Configuration.session.captcha.uri\n\t  \t\t};\n\t  \t\tif (AppUtility.isFalse(dontFocus)) {\n\t\t  \t\tAppUtility.focus(\n\t\t  \t\t\t!AppUtility.isValidEmail(this.info.account.email)\n\t\t\t  \t\t\t? this.emailCtrl\n\t\t\t  \t\t\t: this.info.state.mode == \"SignIn\" && !AppUtility.isNotEmpty(this.info.account.password)\n\t\t\t  \t\t\t\t? this.passwordCtrl\n\t\t\t  \t\t\t\t: this.captchaCtrl,\n\t\t  \t\t\tthis.keyboard);\n\t  \t\t}\n\t  \t}\n\t  );\n  }\n\n\tisValidEmail(email: string) {\n\t\treturn AppUtility.isValidEmail(email);\n\t}\n\n  isNotEmpty(value: string) {\n  \treturn AppUtility.isNotEmpty(value);\n  }\n\n\tisValidInfo(form: NgForm) {\n\t\tif (!form.valid) {\n\t\t\tif (!form.controls.email.valid) {\n\t\t\t\tAppUtility.focus(this.emailCtrl, this.keyboard);\n\t\t\t}\n\t\t\telse if (form.controls.password && !form.controls.password.valid) {\n\t\t\t\tAppUtility.focus(this.passwordCtrl, this.keyboard);\n\t\t\t}\n\t\t\telse if (this.info.state.mode != \"SignIn\") {\n\t\t\t\tAppUtility.focus(this.captchaCtrl, this.keyboard);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse {\n\t\t\tif (!AppUtility.isValidEmail(this.info.account.email)) {\n\t\t\t\tAppUtility.focus(this.emailCtrl, this.keyboard);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse if (this.info.state.mode == \"Password\" && !AppUtility.isNotEmpty(this.info.captcha.code)) {\n\t\t\t\tAppUtility.focus(this.captchaCtrl, this.keyboard);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn form.valid;\n\t\t\t}\n\t\t}\n\t}\n\n\tshowLoading(msg: string) {\n\t\tthis.loading = this.loadingCtrl.create({ content: msg });\n\t\tthis.loading.present();\n\t}\n\n\thideLoading() {\n\t\tif (this.loading != undefined) {\n\t\t\tthis.loading.dismiss();\n\t\t\tthis.loading = undefined;\n\t\t}\n\t}\n\n\texit() {\n\t\tthis.hideLoading();\n\t\tthis.navCtrl.pop();\n\t}\n\n\tshowError(data: any) {\n\t\tvar message = \"\", ctrl = null;\n\t\tif (AppUtility.isGotWrongAccountOrPasswordException(data.Error)) {\n\t\t\tmessage = \"Email hoặc mật khẩu không đúng!\";\n\t\t\tctrl = this.emailCtrl;\n\t\t}\n\t\telse {\n\t\t\tif (AppUtility.isGotCaptchaException(data.Error)) {\n\t\t\t\tmessage = \"Mã xác thực không đúng\";\n\t\t\t}\n\t\t\telse if (AppUtility.isObject(data.Error, true)) {\n\t\t\t\tmessage = data.Error.Message;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmessage = \"Đã xảy ra lỗi!\";\n\t\t\t}\n\t\t\tctrl = this.info.state.mode == \"SignIn\" ? this.passwordCtrl : this.captchaCtrl;\n\t\t}\n\n\t\tthis.hideLoading();\n\t\tif (this.info.state.mode != \"SignIn\") {\n\t\t\tthis.renewCaptcha(true);\n\t\t}\n\t\t\n\t\tthis.alertCtrl.create({\n\t    title: \"Lỗi\",\n\t    message: message,\n\t    enableBackdropDismiss: false,\n\t    buttons: [{\n\t      text: \"Đóng\",\n\t      handler: () => {\n\t\t\t\t\tthis.info.state.processing = false;\n\t\t\t\t\tthis.info.account.password = \"\";\n\t      \tAppUtility.focus(ctrl, this.keyboard);\n\t      }\n\t    }]\n\t  }).present();\n\t}\n\n\t// sign in\n\tdoSignIn(form: NgForm) {\n\t\tthis.info.state.valid = this.isValidInfo(form);\n\t\tif (this.info.state.valid) {\n\t\t\tthis.showLoading(\"Đăng nhập...\");\n\t\t\tthis.info.state.processing = true;\n\t\t\tthis.authSvc.signInAsync(this.info.account.email, this.info.account.password,\n\t\t\t\t() => {\n\t\t\t\t\tthis.exit();\n\t\t\t\t},\n\t\t\t\t(error: any) => {\n\t\t\t\t\tthis.showError(error);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\t// renew password\n  openRenewPassword() {\n  \tthis.renewCaptcha();\n  \tthis.info.state.mode = \"Password\";\n  \tthis.info.state.title = \"Lấy mật khẩu mới\";\n  }\n\n\tdoRenewPassword(form: NgForm) {\n\t\tthis.info.state.valid = this.isValidInfo(form);\n\t\tif (this.info.state.valid) {\n\t\t\tthis.showLoading(\"Lấy mật khẩu...\");\n\t\t\tthis.info.state.processing = true;\n\t\t\tthis.authSvc.resetPasswordAsync(this.info.account.email, this.info.captcha.code,\n\t\t\t\t() => {\n\t\t\t\t\tthis.alertCtrl.create({\n\t\t\t      title: \"Mật khẩu mới\",\n\t\t\t      message: \"Vui lòng kiểm tra email và làm theo hướng dẫn để lấy mật khẩu mới!\",\n\t\t\t      enableBackdropDismiss: false,\n\t\t\t      buttons: [{\n\t\t\t        text: \"Đóng\",\n\t\t\t        handler: () => {\n\t\t\t        \tthis.exit();\n\t\t\t        }\n\t\t\t      }]\n\t\t\t    }).present();\n\t\t\t\t},\n\t\t\t\t(error: any) => {\n\t\t\t\t\tthis.showError(error);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/accounts/signin/signin.ts","import { Component, ViewChild } from \"@angular/core\";\r\nimport { NgForm } from \"@angular/forms\";\r\nimport { NavController, NavParams, ViewController, ActionSheetController, AlertController, Loading, LoadingController } from \"ionic-angular\";\r\nimport { Keyboard } from \"@ionic-native/keyboard\";\r\nimport { CompleterService, CompleterData } from \"ng2-completer\";\r\nimport { List } from \"linqts\";\r\n\r\nimport { AppUtility } from \"../../../helpers/utility\";\r\nimport { AppEvents } from \"../../../helpers/events\";\r\nimport { AppData } from \"../../../models/data\";\r\nimport { AppModels } from \"../../../models/objects\";\r\n\r\nimport { ConfigurationService } from \"../../../providers/configuration\";\r\nimport { AuthenticationService } from \"../../../providers/authentication\";\r\n\r\nimport { SignInPage } from \"../signin/signin\";\r\nimport { HomePage } from \"../../home/home\";\r\nimport { ReadBookPage } from \"../../books/read/read\";\r\n\r\n@Component({\r\n\tselector: \"page-profile\",\r\n\ttemplateUrl: \"profile.html\",\r\n})\r\nexport class ProfilePage {\r\n\tconstructor(\r\n\t\tpublic navCtrl: NavController,\r\n\t\tpublic navParams: NavParams,\r\n\t\tpublic viewCtrl: ViewController,\r\n\t\tpublic actionSheetCtrl: ActionSheetController,\r\n\t\tpublic alertCtrl: AlertController,\r\n\t\tpublic loadingCtrl: LoadingController,\r\n\t\tpublic completerSvc: CompleterService,\r\n\t\tpublic keyboard: Keyboard,\r\n\t\tpublic configSvc: ConfigurationService,\r\n\t\tpublic authSvc: AuthenticationService\r\n\t){\r\n\t\tthis.info.state.mode = !this.authSvc.isAuthenticated() && AppUtility.isTrue(this.navParams.get(\"Register\"))\r\n\t\t\t? \"Register\"\r\n\t\t\t: \"Profile\";\r\n\t\tthis.initialize();\r\n\t}\r\n\r\n\t// attributes\r\n\tinfo = {\r\n\t\ttitle: \"Thông tin tài khoản\",\r\n\t\tstate: {\r\n\t\t\tmode: \"Profile\",\r\n\t\t\tprocessing: true,\r\n\t\t\tvalid: true,\r\n\t\t\tcss: \"\"\r\n\t\t},\r\n\t\tid: \"\",\r\n\t\tprofile: undefined,\r\n\t\tavatar: {\r\n\t\t\tcurrent: \"\",\r\n\t\t\tuploaded: undefined\r\n\t\t},\r\n\t\trating: 0.0,\r\n\t\tbookmarks: [],\r\n\t\tcaptcha: {\r\n\t\t\tcode: \"\",\r\n\t\t\turi: \"\"\r\n\t\t},\r\n\t\taddress: {\r\n\t\t\tcurrent: undefined,\r\n\t\t\taddresses: undefined\r\n\t\t},\r\n\t\tvalidBirthDay: {\r\n\t\t\tmin: ((new Date()).getFullYear() - 120) + \"-12-31\",\r\n\t\t\tmax: ((new Date()).getFullYear() - 16) + \"-01-01\"\r\n\t\t},\r\n\t\tchange: {\r\n\t\t\tOldPassword: \"\",\r\n\t\t\tPassword: \"\",\r\n\t\t\tConfirmPassword: \"\",\r\n\t\t\tEmail: \"\",\r\n\t\t\tConfirmEmail: \"\"\r\n\t\t},\r\n\t\tinvitation: {\r\n\t\t\tname: undefined,\r\n\t\t\temail: undefined,\r\n\t\t\turl: undefined\r\n\t\t},\r\n\t\tprivileges: null,\r\n\t\tappMode: AppData.Configuration.app.mode,\r\n\t\tcanSeeOthers: false,\r\n\t\tisAppleOS: AppUtility.isAppleOS()\r\n\t};\r\n\tcompleterData: CompleterData = undefined;\r\n\r\n\t// controls\r\n\t@ViewChild(\"name\") nameCtrl;\r\n\t@ViewChild(\"email\") emailCtrl;\r\n\t@ViewChild(\"confirmEmail\") confirmEmailCtrl;\r\n\t@ViewChild(\"password\") passwordCtrl;\r\n\t@ViewChild(\"confirmPassword\") confirmPasswordCtrl;\r\n\t@ViewChild(\"gender\") genderCtrl;\r\n\t@ViewChild(\"birthDay\") birthDayCtrl;\r\n\t@ViewChild(\"address\") addressCtrl;\r\n\t@ViewChild(\"addresses\") addressesCtrl;\r\n\t@ViewChild(\"mobile\") mobileCtrl;\r\n\t@ViewChild(\"captcha\") captchaCtrl;\r\n\r\n\t@ViewChild(\"oldPassword\") oldPasswordCtrl;\r\n\t@ViewChild(\"newPassword\") newPasswordCtrl;\r\n\t@ViewChild(\"confirmNewPassword\") confirmNewPasswordCtrl;\r\n\t@ViewChild(\"newEmail\") newEmailCtrl;\r\n\t@ViewChild(\"confirmNewEmail\") confirmNewEmailCtrl;\r\n\t@ViewChild(\"changeCaptcha\") changeCaptchaCtrl;\r\n\r\n\t@ViewChild(\"guestname\") guestnameCtrl;\r\n\t@ViewChild(\"guestemail\") guestemailCtrl;\r\n\r\n\tloading: Loading = undefined;\r\n\r\n\t// page events\r\n\tionViewDidLoad() {\r\n\t\tthis.info.state.processing = false;\r\n\t\tthis.info.state.css = \"text-input \"\r\n\t\t\t+ (AppUtility.isAppleOS()\r\n\t\t\t\t? \"text-input-ios\"\r\n\t\t\t\t: AppUtility.isWindowsPhoneOS()\r\n\t\t\t\t\t? \"text-input-wp\"\r\n\t\t\t\t\t: \"text-input-md\");\r\n\t}\r\n\r\n\tionViewCanEnter() {\r\n\t\treturn this.isAdministrator() || this.info.id == \"\";\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\tif (this.info.state.mode == \"Register\") {\r\n\t\t\tthis.setBackButton(false);\r\n\t\t\tthis.renewCaptcha(() => {\r\n\t\t\t\tAppUtility.focus(this.nameCtrl, this.keyboard);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tionViewDidLeave() {\r\n\t\tAppEvents.broadcast(\"SetPreviousPageActive\", { current: \"ProfilePage\" });\r\n\t}\r\n\r\n\t// run initialize\r\n\tinitialize() {\r\n\t\tif (this.info.state.mode == \"Register\") {\r\n\t\t\tthis.info.title = \"Đăng ký tài khoản\";\r\n\t\t\tthis.info.profile = {\r\n\t\t\t\tName: \"\",\r\n\t\t\t\tEmail: \"\",\r\n\t\t\t\tConfirmEmail: \"\",\r\n\t\t\t\tPassword: \"\",\r\n\t\t\t\tConfirmPassword: \"\",\r\n\t\t\t\tGender: \"NotProvided\",\r\n\t\t\t\tBirthDay: \"\",\r\n\t\t\t\tAddress: \"\",\r\n\t\t\t\tCounty: \"\",\r\n\t\t\t\tProvince: \"\",\r\n\t\t\t\tCountry: \"\",\r\n\t\t\t\tMobile: \"\"\r\n\t\t\t};\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.info.id = this.navParams.get(\"ID\");\r\n\t\t\tthis.info.id = AppUtility.isNotEmpty(this.info.id) ? this.info.id : \"\";\r\n\t\t\tthis.info.canSeeOthers = this.info.id == \"\" || this.info.id == AppData.Configuration.session.account.id || this.isAdministrator();\r\n\r\n\t\t\tthis.info.profile = this.info.id == \"\" || this.info.id == AppData.Configuration.session.account.id\r\n\t\t\t\t? AppModels.Account.deserialize(this.configSvc.getAccount().profile)\r\n\t\t\t\t: AppData.Accounts.getValue(this.info.id);\r\n\t\t\t\t\r\n\t\t\tthis.info.avatar.current = AppUtility.getAvatarImage(this.info.profile);\r\n\t\t\tthis.info.title = this.info.id != \"\" && this.info.id != AppData.Configuration.session.account.id\r\n\t\t\t\t? this.info.profile.Name\r\n\t\t\t\t: \"Thông tin tài khoản\";\r\n\r\n\t\t\tvar rating = (this.info.profile as AppModels.Account).RatingPoints.getValue(\"General\");\r\n\t\t\tthis.info.rating = rating != undefined ? rating.Average : 0;\r\n\r\n\t\t\tif (this.info.profile.ID == AppData.Configuration.session.account.id) {\r\n\t\t\t\tthis.buildBookmakrs();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.info.address = AppUtility.initializeAddress(this.info.profile);\r\n\t\tthis.completerData = this.completerSvc.local(this.info.address.addresses, \"title,titleANSI\", \"title\");\r\n\t}\r\n\r\n\t// event handlers\r\n\tshowActions() {\r\n\t\tvar actionSheet = this.actionSheetCtrl.create({\r\n\t\t\tenableBackdropDismiss: true\r\n\t\t});\r\n\r\n\t\tif (this.info.profile.ID == AppData.Configuration.session.account.id) {\r\n\t\t\tactionSheet.addButton({\r\n\t\t\t\ttext: \"Cập nhật\",\r\n\t\t\t\ticon: this.info.isAppleOS ? undefined : \"create\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.openUpdate();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tactionSheet.addButton({\r\n\t\t\t\ttext: \"Đổi mật khẩu\",\r\n\t\t\t\ticon: this.info.isAppleOS ? undefined : \"key\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.openChangePassword();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tactionSheet.addButton({\r\n\t\t\t\ttext: \"Đổi email đăng nhập\",\r\n\t\t\t\ticon: this.info.isAppleOS ? undefined : \"mail\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.openChangeEmail();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if (this.isAdministrator() && this.info.id != \"\" && this.info.id != AppData.Configuration.session.account.id) {\r\n\t\t\tactionSheet.addButton({\r\n\t\t\t\ttext: \"Đặt quyền truy cập\",\r\n\t\t\t\ticon: this.info.isAppleOS ? undefined : \"settings\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.openPrivileges();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.info.id == \"\") {\r\n\t\t\tactionSheet.addButton({\r\n\t\t\t\ttext: \"Đăng xuất\",\r\n\t\t\t\ticon: this.info.isAppleOS ? undefined : \"log-out\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.doSignOut();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tactionSheet.addButton({\r\n\t\t\ttext: \"Huỷ bỏ\",\r\n\t\t\ticon: this.info.isAppleOS ? undefined : \"close\",\r\n\t\t\trole: \"cancel\"\r\n\t\t});\r\n\r\n\t\tactionSheet.present();\r\n\t}\r\n\r\n\topenInvitation() {\r\n\t\tthis.setBackButton(false);\r\n\t\tthis.info.state.mode = \"Invite\";\r\n\t\tthis.info.title = \"Mời bạn bè\";\r\n\t\tthis.info.invitation.url = AppUtility.getUri() + \"#?refer=\" + AppUtility.getBase64UrlParam({ uid: this.info.profile.ID, section: \"WPA\" }) + \"&utm_campaign=WPA-Direct-Invitation&utm_medium=Direct-Invitation-Link\";\r\n\t\tAppUtility.focus(this.guestnameCtrl, this.keyboard);\r\n\t}\r\n\r\n\topenUpdate() {\r\n\t\tthis.setBackButton(false);\r\n\t\tthis.info.state.mode = \"Update\";\r\n\t\tthis.info.title = \"Cập nhật tài khoản\";\r\n\t\tAppUtility.focus(this.nameCtrl, this.keyboard);\r\n\t}\r\n\r\n\topenChangePassword() {\r\n\t\tthis.setBackButton(false);\r\n\t\tthis.info.state.mode = \"ChangePassword\";\r\n\t\tthis.info.title = \"Đổi mật khẩu\";\r\n\t\tAppUtility.focus(this.oldPasswordCtrl, this.keyboard);\r\n\t}\r\n\r\n\topenChangeEmail() {\r\n\t\tthis.setBackButton(false);\r\n\t\tthis.renewCaptcha();\r\n\t\tthis.info.state.mode = \"ChangeEmail\";\r\n\t\tthis.info.title = \"Đổi email\";\r\n\t\tAppUtility.focus(this.oldPasswordCtrl, this.keyboard);\r\n\t}\r\n\r\n\topenPrivileges() {\r\n\t\tthis.setBackButton(false);\r\n\t\tthis.info.state.mode = \"SetPrivileges\";\r\n\t\tthis.info.title = \"Đặt quyền truy cập\";\r\n\t\tthis.info.privileges = {\r\n\t\t\troles: [\r\n\t\t\t\t{ label: \"Người quản trị\", value: \"Administrator\" },\r\n\t\t\t\t{ label: \"Người kiểm duyệt\", value: \"Moderator\" },\r\n\t\t\t\t{ label: \"Người dùng\", value: \"User\" }\r\n\t\t\t],\r\n\t\t\tsections: [\r\n\t\t\t\t{ label: \"Sách điện tử\", serviceName: \"Books\", objectName: \"Book\" },\r\n\t\t\t\t{ label: \"Thông tin thống kê\", serviceName: \"Books\", objectName: \"Statistic\" },\r\n\t\t\t\t{ label: \"Tài khoản người dùng\", serviceName: \"Users\", objectName: \"Profile\" }\r\n\t\t\t],\r\n\t\t\tpermissions: {\r\n\t\t\t\trole: this.authSvc.getRole(this.info.profile),\r\n\t\t\t\tsections: {}\r\n\t\t\t}\r\n\t\t};\r\n\t\tnew List<any>(this.info.privileges.sections).ForEach((s) => {\r\n\t\t\tlet isAdministrator = this.authSvc.isAuthorized(s.serviceName, s.objectName, \"Full\");\r\n\t\t\tlet isModerator = !isAdministrator && (this.authSvc.isAuthorized(s.serviceName, s.objectName, \"Write\") || this.authSvc.isAuthorized(s.serviceName, s.objectName, \"Lock\"));\r\n\t\t\tthis.info.privileges.permissions.sections[s.value] = isAdministrator\r\n\t\t\t\t? \"Administrator\"\r\n\t\t\t\t: isModerator\r\n\t\t\t\t\t? \"Moderator\"\r\n\t\t\t\t\t: \"User\";\r\n\t\t});\r\n\t}\r\n\r\n\t// helpers\r\n\trenewCaptcha(onCompleted?: () => void) {\r\n\t\tthis.authSvc.registerCaptchaAsync(\r\n\t\t\t() => {\r\n\t\t\t\tthis.info.captcha = {\r\n\t\t\t\t\tcode: \"\",\r\n\t\t\t\t\turi: AppData.Configuration.session.captcha.uri\r\n\t\t\t\t};\r\n\t\t\t\tif (onCompleted != undefined) {\r\n\t\t\t\t\tonCompleted();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tselectAddress(item: any) {\r\n\t\tif (AppUtility.isObject(item, null) && AppUtility.isObject(item.originalObject, null)) {\r\n\t\t\tthis.info.address.current = item.originalObject;\r\n\t\t}\r\n\t}\r\n\r\n\tsetBackButton(state: boolean) {\r\n\t\tthis.viewCtrl.showBackButton(state);\r\n\t}\r\n\r\n\tcancel() {\r\n\t\tif (this.info.state.mode == \"Register\") {\r\n\t\t\tthis.exit();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.cancelUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tcancelUpdate() {\r\n\t\tthis.hideLoading();\r\n\t\tthis.info.state.processing = false;\r\n\t\tthis.setBackButton(true);\r\n\t\tthis.info.state.mode = \"Profile\";\r\n\t\tthis.info.title = \"Thông tin tài khoản\";\r\n\t}\r\n\r\n\texit() {\r\n\t\tthis.navCtrl.pop();\r\n\t}\r\n\r\n\topenGoogleMaps() {\r\n\t\tAppUtility.openGoogleMaps(this.info.profile.FullAddress);\r\n\t}\r\n\r\n\tisAdministrator() {\r\n\t\treturn this.authSvc.isAdministrator();\r\n\t}\r\n\r\n\tisNotNull(value: string) {\r\n\t\treturn AppUtility.isNotNull(value);\r\n\t}\r\n\r\n\tisNotEmpty(value: string) {\r\n\t\treturn AppUtility.isNotEmpty(value);\r\n\t}\r\n\r\n\tisValidEmail(email: string) {\r\n\t\treturn AppUtility.isValidEmail(email);\r\n\t}\r\n\r\n\tisValidInfo(form: NgForm) {\r\n\t\tif (!form.valid) {\r\n\t\t\tif (!form.controls.name.valid) {\r\n\t\t\t\tAppUtility.focus(this.nameCtrl, this.keyboard);\r\n\t\t\t}\r\n\t\t\telse if (form.controls.email && !form.controls.email.valid) {\r\n\t\t\t\tAppUtility.focus(this.emailCtrl, this.keyboard);\r\n\t\t\t}\r\n\t\t\telse if (form.controls.confirmEmail && (!form.controls.confirmEmail.valid || !this.isValidEmail(this.info.profile.ConfirmEmail) || this.info.profile.ConfirmEmail != this.info.profile.Email)) {\r\n\t\t\t\tAppUtility.focus(this.confirmEmailCtrl, this.keyboard);\r\n\t\t\t}\r\n\t\t\telse if (form.controls.password && !form.controls.password.valid) {\r\n\t\t\t\tAppUtility.focus(this.passwordCtrl, this.keyboard);\r\n\t\t\t}\r\n\t\t\telse if (form.controls.confirmPassword && (!form.controls.confirmPassword.valid || this.info.profile.ConfirmPassword != this.info.profile.Password)) {\r\n\t\t\t\tAppUtility.focus(this.confirmPasswordCtrl, this.keyboard);\r\n\t\t\t}\r\n\t\t\telse if (this.genderCtrl && !form.controls.gender.valid) {\r\n\t\t\t\tAppUtility.focus(this.genderCtrl, this.keyboard);\r\n\t\t\t}\r\n\t\t\telse if (this.birthDayCtrl && !form.controls.birthYear.valid) {\r\n\t\t\t\tAppUtility.focus(this.birthDayCtrl, this.keyboard);\r\n\t\t\t}\r\n\t\t\telse if (this.addressCtrl && !form.controls.address.valid) {\r\n\t\t\t\tAppUtility.focus(this.addressCtrl, this.keyboard);\r\n\t\t\t}\r\n\t\t\telse if (this.addressesCtrl && !this.info.address.current) {\r\n\t\t\t\tAppUtility.focus(this.addressesCtrl.inputId, this.keyboard);\r\n\t\t\t}\r\n\t\t\telse if (this.mobileCtrl && !form.controls.mobile.valid) {\r\n\t\t\t\tAppUtility.focus(this.mobileCtrl, this.keyboard);\r\n\t\t\t}\r\n\t\t\telse if (this.captchaCtrl && !form.controls.captcha.valid) {\r\n\t\t\t\tAppUtility.focus(this.captchaCtrl, this.keyboard);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.emailCtrl && !this.isValidEmail(this.info.profile.Email)) {\r\n\t\t\t\tAppUtility.focus(this.emailCtrl, this.keyboard);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse if (this.confirmEmailCtrl && (!this.isValidEmail(this.info.profile.ConfirmEmail) || this.info.profile.ConfirmEmail != this.info.profile.Email)) {\r\n\t\t\t\tAppUtility.focus(this.confirmEmailCtrl, this.keyboard);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse if (this.confirmPasswordCtrl && this.info.profile.ConfirmPassword != this.info.profile.Password) {\r\n\t\t\t\tAppUtility.focus(this.confirmPasswordCtrl, this.keyboard);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse if (this.genderCtrl && !this.info.profile.Gender) {\r\n\t\t\t\tAppUtility.focus(this.genderCtrl, this.keyboard);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse if (this.birthDayCtrl && !this.info.profile.BirthDay) {\r\n\t\t\t\tAppUtility.focus(this.birthDayCtrl, this.keyboard);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn form.valid;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tshowLoading(msg: string) {\r\n\t\tthis.loading = this.loadingCtrl.create({ content: msg });\r\n\t\tthis.loading.present();\r\n\t}\r\n\r\n\thideLoading() {\r\n\t\tif (this.loading != undefined) {\r\n\t\t\tthis.loading.dismiss();\r\n\t\t\tthis.loading = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tshowError(data: any, setFocus?: () => void) {\r\n\t\tthis.hideLoading();\r\n\t\tthis.info.state.processing = false;\r\n\t\tvar message = \"\", ctrl = null;\r\n\t\tif (AppUtility.isGotWrongAccountOrPasswordException(data.Error)) {\r\n\t\t\tmessage = \"Mật khẩu hiện tại không đúng!\";\r\n\t\t\tctrl = this.oldPasswordCtrl;\r\n\t\t}\r\n\t\telse if (AppUtility.isGotCaptchaException(data.Error)) {\r\n\t\t\tmessage = \"Mã xác thực không đúng\";\r\n\t\t\tctrl = this.info.state.mode == \"Register\" ? this.captchaCtrl : this.changeCaptchaCtrl;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tmessage = AppUtility.isObject(data.Error) && AppUtility.isNotEmpty(data.Error.Message)\r\n\t\t\t\t? data.Error.Message\r\n\t\t\t\t: \"Đã xảy ra lỗi!\"\r\n\t\t}\r\n\r\n\t\tif (this.info.state.mode != \"Update\" && this.info.state.mode != \"SetPrivileges\") {\r\n\t\t\tthis.renewCaptcha();\r\n\t\t}\r\n\r\n\t\tthis.showAlert(\r\n\t\t\t\"Lỗi!\",\r\n\t\t\tmessage,\r\n\t\t\tsetFocus != undefined\r\n\t\t\t\t? setFocus\r\n\t\t\t\t: () => {\r\n\t\t\t\t\tAppUtility.focus(ctrl, this.keyboard);\r\n\t\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tshowAlert(title: string, message: string, handler?: () => void) {\r\n\t\tthis.hideLoading();\r\n\t\tthis.alertCtrl.create({\r\n\t\t\ttitle: title,\r\n\t\t\tmessage: message,\r\n\t\t\tenableBackdropDismiss: false,\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: \"Đóng\",\r\n\t\t\t\thandler: handler\r\n\t\t\t}]\r\n\t\t}).present();\r\n\t}\r\n\r\n\t// register\r\n\tdoRegister(form: NgForm) {\r\n\t\tthis.info.state.valid = this.isValidInfo(form);\r\n\t\tif (this.info.state.valid) {\r\n\t\t\tthis.info.state.processing = true;\r\n\t\t\tthis.authSvc.registerAccountAsync(this.info.profile, this.info.captcha.code,\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.showAlert(\r\n\t\t\t\t\t\t\"Đăng ký\",\r\n\t\t\t\t\t\t\"Vui lòng kiểm tra email và làm theo hướng dẫn để kích hoạt tài khoản\",\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tthis.exit();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\t(error: any) => {\r\n\t\t\t\t\tif (AppUtility.isObject(error.Error, true) && \"InformationExistedException\" == error.Error.Type) {\r\n\t\t\t\t\t\tthis.renewCaptcha();\r\n\t\t\t\t\t\tthis.hideLoading();\r\n\t\t\t\t\t\tthis.info.state.processing = false;\r\n\t\t\t\t\t\tthis.alertCtrl.create({\r\n\t\t\t\t\t\t\ttitle: \"Chú ý\",\r\n\t\t\t\t\t\t\tmessage: \"Địa chỉ email (\" + this.info.profile.Email + \") đã được sử dụng để đăng ký tài khoản.\\nCó muốn lấy mật khẩu mới cho địa chỉ email này?\",\r\n\t\t\t\t\t\t\tenableBackdropDismiss: false,\r\n\t\t\t\t\t\t\tbuttons: [{\r\n\t\t\t\t\t\t\t\ttext: \"Không\",\r\n\t\t\t\t\t\t\t\trole: \"cancel\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Lấy mật khẩu mới\",\r\n\t\t\t\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\t\t\t\tAppEvents.broadcast(\"OpenPage\", {\r\n\t\t\t\t\t\t\t\t\t\tname: \"SignInPage\",\r\n\t\t\t\t\t\t\t\t\t\tcomponent: SignInPage,\r\n\t\t\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\t\t\tmode: \"Password\",\r\n\t\t\t\t\t\t\t\t\t\t\temail: this.info.profile.Email\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tdoPush: true,\r\n\t\t\t\t\t\t\t\t\t\tpopIfContains: \"ProfilePage,SignInPage\",\r\n\t\t\t\t\t\t\t\t\t\tnoNestedStack: true\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t}).present();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.showError(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t// send an invitation\r\n\tsendInvitation() {\r\n\t\tvar setFocus = () => {\r\n\t\t\tAppUtility.focus(\r\n\t\t\t\t!AppUtility.isNotEmpty(this.info.invitation.name)\r\n\t\t\t\t\t? this.guestnameCtrl\r\n\t\t\t\t\t: this.guestemailCtrl,\r\n\t\t\t\tthis.keyboard\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tif (AppUtility.isNotEmpty(this.info.invitation.name) && AppUtility.isValidEmail(this.info.invitation.email)) {\r\n\t\t\tthis.showLoading(\"Gửi lời mời...\");\r\n\t\t\tthis.info.state.processing = true;\r\n\t\t\tthis.authSvc.sendInvitationAsync(this.info.invitation.name, this.info.invitation.email,\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.showAlert(\r\n\t\t\t\t\t\t\"Mời bạn\",\r\n\t\t\t\t\t\t\"Email lời mời đã được gửi thành công!\",\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tthis.cancelUpdate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\t(error: any) => {\r\n\t\t\t\t\tthis.showError(error, setFocus);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetFocus();\r\n\t\t}\r\n\t}\r\n\r\n\t// update\r\n\tdoUpdate(form: NgForm) {\r\n\t\tthis.info.state.valid = this.isValidInfo(form);\r\n\t\tif (this.info.state.valid) {\r\n\t\t\tthis.showLoading(\"Cập nhật hồ sơ...\");\r\n\t\t\tthis.info.state.processing = true;\r\n\t\t\tthis.info.profile.County = this.info.address.current.county;\r\n\t\t\tthis.info.profile.Province = this.info.address.current.province;\r\n\t\t\tthis.info.profile.Country = this.info.address.current.country;\r\n\t\t\tthis.authSvc.saveProfileAsync(this.info.profile,\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.info.profile = AppUtility.clone(this.configSvc.getAccount().profile);\r\n\t\t\t\t\tthis.info.avatar.current = AppUtility.getAvatarImage(this.info.profile);\r\n\t\t\t\t\tthis.cancelUpdate();\r\n\t\t\t\t},\r\n\t\t\t\t(error: any) => {\r\n\t\t\t\t\tthis.showError(error);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tdoChangePassword() {\r\n\t\tvar setFocus = () => {\r\n\t\t\tAppUtility.focus(!AppUtility.isNotEmpty(this.info.change.OldPassword)\r\n\t\t\t\t? this.oldPasswordCtrl\r\n\t\t\t\t: !AppUtility.isNotEmpty(this.info.change.Password)\r\n\t\t\t\t\t? this.newPasswordCtrl\r\n\t\t\t\t\t: this.confirmNewPasswordCtrl,\r\n\t\t\t\tthis.keyboard);\r\n\t\t};\r\n\r\n\t\tthis.info.state.valid = AppUtility.isNotEmpty(this.info.change.OldPassword)\r\n\t\t\t&& AppUtility.isNotEmpty(this.info.change.Password) && AppUtility.isNotEmpty(this.info.change.ConfirmPassword)\r\n\t\t\t&& this.info.change.ConfirmPassword == this.info.change.Password;\r\n\r\n\t\tif (this.info.state.valid) {\r\n\t\t\tthis.showLoading(\"Đổi mật khẩu đăng nhập...\");\r\n\t\t\tthis.info.state.processing = true;\r\n\t\t\tthis.authSvc.updatePasswordAsync(this.info.change.OldPassword, this.info.change.Password,\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.showAlert(\r\n\t\t\t\t\t\t\"Đổi mật khẩu\",\r\n\t\t\t\t\t\t\"Mật khẩu đăng nhập mới đã được cập nhật thành công!\",\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tthis.info.change.OldPassword = \"\";\r\n\t\t\t\t\t\t\tthis.info.change.Password = \"\";\r\n\t\t\t\t\t\t\tthis.info.change.ConfirmPassword = \"\";\r\n\t\t\t\t\t\t\tthis.cancelUpdate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\t(error: any) => {\r\n\t\t\t\t\tthis.showError(error, setFocus);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetFocus();\r\n\t\t}\r\n\t}\r\n\r\n\tdoChangeEmail() {\r\n\t\tvar setFocus = () => {\r\n\t\t\tAppUtility.focus(!AppUtility.isNotEmpty(this.info.change.OldPassword)\r\n\t\t\t\t? this.oldPasswordCtrl\r\n\t\t\t\t: !AppUtility.isNotEmpty(this.info.change.Email)\r\n\t\t\t\t\t? this.newEmailCtrl\r\n\t\t\t\t\t: this.confirmNewEmailCtrl,\r\n\t\t\t\tthis.keyboard);\r\n\t\t};\r\n\r\n\t\tthis.info.state.valid = AppUtility.isNotEmpty(this.info.change.OldPassword)\r\n\t\t\t&& AppUtility.isNotEmpty(this.info.change.Email) && AppUtility.isNotEmpty(this.info.change.ConfirmEmail)\r\n\t\t\t&& this.info.change.ConfirmEmail == this.info.change.Email;\r\n\r\n\t\tif (this.info.state.valid) {\r\n\t\t\tthis.showLoading(\"Đổi email đăng nhập...\");\r\n\t\t\tthis.info.state.processing = true;\r\n\t\t\tthis.authSvc.updateEmailAsync(this.info.change.OldPassword, this.info.change.Email,\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.showAlert(\r\n\t\t\t\t\t\t\"Đổi email\",\r\n\t\t\t\t\t\t\"Email đăng nhập mới đã được cập nhật thành công!\",\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tthis.info.change.OldPassword = \"\";\r\n\t\t\t\t\t\t\tthis.info.change.Email = \"\";\r\n\t\t\t\t\t\t\tthis.info.change.ConfirmEmail = \"\";\r\n\t\t\t\t\t\t\tthis.cancelUpdate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\t(error: any) => {\r\n\t\t\t\t\tthis.showError(error, setFocus);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetFocus();\r\n\t\t}\r\n\t}\r\n\r\n\tdoSetPrivileges() {\r\n\t\tvar body = {\r\n\t\t\tID: this.info.profile.ID,\r\n\t\t\tRole: this.info.privileges.permissions.role,\r\n\t\t\tSections: {}\r\n\t\t};\r\n\t\tfor (let s in this.info.privileges.permissions.sections) {\r\n\t\t\tbody.Sections[s] = this.info.privileges.permissions.sections[s];\r\n\t\t}\r\n\r\n\t\tthis.showLoading(\"Đặt quyền truy cập...\");\r\n\t\tthis.info.state.processing = true;\r\n\t\tthis.authSvc.setPrivilegesAsync(body,\r\n\t\t\t() => {\r\n\t\t\t\tthis.info.profile = AppData.Accounts.getValue(this.info.id);\r\n\t\t\t\tthis.info.avatar.current = AppUtility.getAvatarImage(this.info.profile);\r\n\t\t\t\tthis.cancelUpdate();\r\n\t\t\t},\r\n\t\t\t(error: any) => {\r\n\t\t\t\tthis.showError(error);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\t// sign-out\r\n\tdoSignOut() {\r\n\t\tthis.alertCtrl.create({\r\n\t\t\ttitle: \"Đăng xuất\",\r\n\t\t\tmessage: \"Đăng xuất khỏi hệ thống?\",\r\n\t\t\tenableBackdropDismiss: false,\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Huỷ bỏ\",\r\n\t\t\t\t\trole: \"cancel\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Đăng xuất\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.authSvc.signOutAsync(\r\n\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\tAppEvents.broadcast(\"OpenPage\", {\r\n\t\t\t\t\t\t\t\t\tname: \"HomePage\",\r\n\t\t\t\t\t\t\t\t\tcomponent: HomePage,\r\n\t\t\t\t\t\t\t\t\tdoPush: false\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t(error: any) => {\r\n\t\t\t\t\t\t\t\tthis.showError(error);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}).present();\r\n\t}\r\n\r\n\t// bookmarks\r\n\tbuildBookmakrs() {\r\n\t\tthis.info.bookmarks = new List(AppData.Configuration.reading.bookmarks.values())\r\n\t\t.Where(b => AppData.Books.getValue(b.ID) != undefined)\r\n\t\t.Select(b => {\r\n\t\t\tlet book = AppData.Books.getValue(b.ID);\r\n\t\t\treturn {\r\n\t\t\t\tid: b.ID,\r\n\t\t\t\ttitle: book.Title + (book.Author != \"\" ? \" - \" + book.Author : \"\"),\r\n\t\t\t\tposition: (b.Chapter > 0 ? \"Chương: \" + b.Chapter + \" - \" : \"\") + \"Vị trí: \" + b.Position,\r\n\t\t\t\ttime: b.Time\r\n\t\t\t};\r\n\t\t})\r\n\t\t.OrderByDescending(b => b.time)\r\n\t\t.ToArray();\r\n\t}\r\n\r\n\ttrackBookmark(index: number, bookmark: any) {\r\n\t\treturn bookmark.id;\r\n\t}\r\n\r\n\topenBookmark(id: string) {\r\n\t\tthis.navCtrl.pop();\r\n\t\tthis.navCtrl.push(ReadBookPage, { ID: id });\r\n\t}\r\n\t\r\n\tdeleteBookmark(id: string) {\r\n\t\tthis.configSvc.deleteBookmark(id, () => {\r\n\t\t\tthis.buildBookmakrs();\r\n\t\t});\r\n\t}\r\n\t\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/accounts/profile/profile.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 221;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 221\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 264;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 264\n// module chunks = 0","import * as Rx from \"rxjs/Rx\";\r\n\r\nimport { AppUtility } from \"./utility\";\r\n\r\nexport namespace AppEvents {\r\n\r\n\tvar handlers: any = {};\r\n\r\n\tvar subject = new Rx.Subject<{ event: string, args: any }>();\r\n\tvar observable = Rx.Observable.from(subject);\r\n\tobservable.subscribe(\r\n\t\t({ event, args }) => {\r\n\t\t\tif (handlers[event]) {\r\n\t\t\t\tfor (let handler of handlers[event]) {\r\n\t\t\t\t\thandler.func({ \"event\": event, \"args\": args });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\t/**\r\n\t  * Registers a handler for processing data when a specified event has been raised/broadcasted\r\n\t  * @param event The string that presents the name of an event\r\n\t  * @param handler The function to handler data when an event was raised\r\n\t  * @param identity The string that presents identity of the handler for unregistering later\r\n\t*/\r\n\texport function on(event: string, handler: (info: any) => void, identity?: string) {\r\n\t\tif (AppUtility.isNotEmpty(event) && handler != undefined) {\r\n\t\t\thandlers[event] = handlers[event] || [];\r\n\t\t\thandlers[event].push({ func: handler, identity: AppUtility.isNotEmpty(identity) ? identity : \"\" });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t  * Unregisters a handler\r\n\t  * @param event The string that presents the name of an event\r\n\t  * @param identity The string that presents the identity of the handler for unregistering\r\n\t*/\r\n\texport function off(event: string, identity: string) {\r\n\t\tif (AppUtility.isNotEmpty(event) && AppUtility.isNotEmpty(identity) && handlers[event]) {\r\n\t\t\tlet index = AppUtility.find<any>(handlers[event], h => h.identity == identity);\r\n\t\t\tif (index != -1) {\r\n\t\t\t\thandlers[event].splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t  * Broadcasts an event message through the app scope\r\n\t  * @param event The string that presents the name of an event\r\n\t  * @param args The JSON object that presents the arguments of an event\r\n\t*/\r\n\texport function broadcast(event: string, args?: any) {\r\n\t\tsubject.next({ event, args });\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/events.ts","import * as Collections from \"typescript-collections\";\r\nimport { List } from \"linqts\";\r\n\r\nimport { AppUtility } from \"../helpers/utility\";\r\nimport { AppData } from \"./data\";\r\n\r\nexport namespace AppModels {\r\n\t/** Base of all model classes */\r\n\texport abstract class Base {\r\n\t\tabstract ID: string = \"\";\r\n\r\n\t\t/** Copys data from source (object or JSON) and fill into this objects' properties */\r\n\t\tcopy(source: any, onCompleted?: (data: any) => void) {\r\n\t\t\tAppUtility.copy(source, this, onCompleted);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Present details information of an account */\r\n\texport class Account extends Base {\r\n\t\tID = \"\";\r\n\t\tName = \"\";\r\n\t\tFirstName = \"\";\r\n\t\tLastName = \"\";\r\n\t\tBirthDay = \"\";\r\n\t\tGender = \"\";\r\n\t\tAddress = \"\";\r\n\t\tCounty = \"\";\r\n\t\tProvince = \"\";\r\n\t\tCountry = \"\";\r\n\t\tPostalCode = \"\";\r\n\t\tEmail = \"\";\r\n\t\tMobile = \"\";\r\n\t\tAvatar = \"\";\r\n\t\tGravatar = \"\";\r\n\t\tAlias = \"\";\r\n\t\tBio = \"\";\r\n\t\tNotes = \"\";\r\n\t\tLevel = \"\";\r\n\t\tReputation = \"\";\r\n\t\tTotalPoints = 0;\r\n\t\tRestPoints = 0;\r\n\t\tTotalRewards = 0;\r\n\t\tTotalContributions = 0;\r\n\t\tLastUpdated = new Date();\r\n\t\tLastSync = new Date();\r\n\t\tRatingPoints = new Collections.Dictionary<string, RatingPoint>();\r\n\r\n\t\tStatus = \"\";\r\n\t\tJoined = new Date();\r\n\t\tLastAccess = new Date();\r\n\t\tReferID = \"\";\r\n\t\tReferSection = \"\";\r\n\r\n\t\tRoles = new Array<string>();\r\n\t\tPrivileges = new Array<Privilege>();\r\n\t\tLibraries = new Array<string>();\r\n\t\tOAuths = new Collections.Dictionary<string, string>();\r\n\t\t\r\n\t\tIsOAuth = false;\r\n\t\tIsOnline = false;\r\n\t\tTitle = \"\";\r\n\t\tFullAddress = \"\";\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\tthis.Gender = \"NotProvided\";\r\n\t\t\tthis.Status = \"Activated\";\r\n\t\t\tthis.Level = \"Normal\";\r\n\t\t\tthis.Reputation = \"Unknown\";\r\n\t\t}\r\n\r\n\t\tstatic deserialize(json: any) {\r\n\t\t\tvar account = new Account();\r\n\t\t\tAppUtility.copy(json, account, (data: any) => {\r\n\t\t\t\taccount.RatingPoints = new Collections.Dictionary<string, RatingPoint>();\r\n\t\t\t\tif (AppUtility.isArray(data.RatingPoints)) {\r\n\t\t\t\t\tnew List<any>(data.RatingPoints).ForEach(r => account.RatingPoints.setValue(r.Type, RatingPoint.deserialize(r)));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (AppUtility.isNotEmpty(account.BirthDay)) {\r\n\t\t\t\t\taccount.BirthDay = account.BirthDay.replace(/--/g, \"01\").replace(/\\//g, \"-\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\taccount.FullAddress = account.Address\r\n\t\t\t\t\t+ (AppUtility.isNotEmpty(account.Province) ? (AppUtility.isNotEmpty(account.Address) ? \", \" : \"\")\r\n\t\t\t\t\t+ account.County + \", \" + account.Province + \", \" + account.Country : \"\");\r\n\t\t\t\taccount.Title = AppUtility.toANSI(account.Name + \" \" + account.FullAddress + \" \" + account.Email + \" \" + account.Mobile).toLowerCase();\r\n\t\t\t});\r\n\t\t\treturn account;\r\n\t\t}\r\n\r\n\t\tstatic update(data: any) {\r\n\t\t\tif (AppUtility.isObject(data, true)) {\r\n\t\t\t\tvar account = data instanceof Account\r\n\t\t\t\t\t? data as Account\r\n\t\t\t\t\t: Account.deserialize(data);\r\n\t\t\t\tif (AppData.Configuration.session.jwt != null && AppData.Configuration.session.jwt.uid == account.ID) {\r\n\t\t\t\t\taccount.IsOnline = true;\r\n\t\t\t\t}\r\n\t\t\t\tAppData.Accounts.setValue(account.ID, account);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/** Present details information of a book */\r\n\texport class Book extends Base {\r\n\t\tID = \"\";\r\n\t\tTitle = \"\";\r\n\t\tAuthor = \"\";\r\n\t\tTranslator = \"\";\r\n\t\tCategory = \"\";\r\n\t\tOriginal = \"\";\r\n\t\tPublisher = \"\";\r\n\t\tProducer = \"\";\r\n\t\tLanguage = \"\";\r\n\t\tStatus = \"\";\r\n\t\tCover = \"\";\r\n\t\tTags = \"\";\r\n\t\tSource = \"\";\r\n\t\tSourceUrl = \"\";\r\n\t\tContributor = \"\";\r\n\t\tTotalChapters = 0;\r\n\t\tCounters: Collections.Dictionary<string, CounterInfo> = undefined;\r\n\t\tRatingPoints: Collections.Dictionary<string, RatingPoint> = undefined;\r\n\t\tLastUpdated = new Date();\r\n\r\n\t\tTOCs = new Array<string>();\r\n\t\tChapters = new Array<string>();\r\n\t\tBody = \"\";\r\n\t\tFiles = {\r\n\t\t\tEpub: {\r\n\t\t\t\tSize: \"generating...\",\r\n\t\t\t\tUrl: \"\"\r\n\t\t\t},\r\n\t\t\tMobi: {\r\n\t\t\t\tSize: \"generating...\",\r\n\t\t\t\tUrl: \"\"\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tANSITitle = \"\";\r\n\t\t\r\n\t\t/** Initializes a new instance of book */\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\tthis.Language = \"vi\";\r\n\t\t}\r\n\r\n\t\tstatic deserialize(json: any, book?: Book) {\r\n\t\t\tbook = book || new Book();\r\n\t\t\tAppUtility.copy(json, book, (data: any) => {\r\n\t\t\t\tbook.Counters = new Collections.Dictionary<string, CounterInfo>();\r\n\t\t\t\tnew List<any>(data.Counters).ForEach(c => book.Counters.setValue(c.Type, CounterInfo.deserialize(c)));\r\n\r\n\t\t\t\tbook.RatingPoints = new Collections.Dictionary<string, RatingPoint>();\r\n\t\t\t\tnew List<any>(data.RatingPoints).ForEach(r => book.RatingPoints.setValue(r.Type, RatingPoint.deserialize(r)));\r\n\t\t\t\r\n\t\t\t\tif (book.SourceUrl != \"\" && AppUtility.isNativeApp()) {\r\n\t\t\t\t\tbook.SourceUrl = \"\";\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbook.Chapters = book.TotalChapters > 1 && book.Chapters.length < 1\r\n\t\t\t\t\t? new List(book.TOCs).Select(t => \"\").ToArray()\r\n\t\t\t\t\t: book.Chapters;\r\n\t\r\n\t\t\t\tbook.ANSITitle = AppUtility.toANSI(book.Title + \" \" + book.Author).toLowerCase();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn book;\r\n\t\t}\r\n\r\n\t\tstatic update(data: any) {\r\n\t\t\tif (AppUtility.isObject(data, true)) {\r\n\t\t\t\tlet book = data instanceof Book\r\n\t\t\t\t\t? data as Book\r\n\t\t\t\t\t: Book.deserialize(data, AppData.Books.getValue(data.ID));\r\n\t\t\t\tAppData.Books.setValue(book.ID, book);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/** Access privilege */\r\n\texport class Privilege {\r\n\t\tServiceName = \"\";\r\n\t\tObjectName = \"\";\r\n\t\tRole = \"\";\r\n\t\tActions: Array<string> = [];\r\n\r\n\t\tstatic deserialize(json: any) {\r\n\t\t\tvar obj = new Privilege();\r\n\t\t\tAppUtility.copy(json, obj);\r\n\t\t\treturn obj;\r\n\t\t}\r\n\t}\r\n\r\n\t/** Contact information */\r\n\texport class ContactInfo {\r\n\t\tName = \"\";\r\n\t\tPhone = \"\";\r\n\t\tEmail = \"\";\r\n\t\tAddress = \"\";\r\n\t\tCounty = \"\";\r\n\t\tProvince = \"\";\r\n\t\tCountry = \"\";\r\n\t\tPostalCode = \"\";\r\n\t\tNotes = \"\";\r\n\t\tGPSLocation = \"\";\r\n\r\n\t\tstatic deserialize(json: any) {\r\n\t\t\tvar obj = new ContactInfo();\r\n\t\t\tAppUtility.copy(json, obj);\r\n\t\t\treturn obj;\r\n\t\t}\r\n\t}\r\n\r\n\t/** Rating information */\r\n\texport class RatingPoint {\r\n\t\tType = \"\";\r\n\t\tTotal = 0;\r\n\t\tPoints = 0.0;\r\n\t\tAverage = 0.0;\r\n\r\n\t\tstatic deserialize(json: any) {\r\n\t\t\tvar obj = new RatingPoint();\r\n\t\t\tAppUtility.copy(json, obj);\r\n\t\t\treturn obj;\r\n\t\t}\r\n\t}\r\n\r\n\t/** Bookmark of an e-book */\r\n\texport class Bookmark {\r\n\t\tID = \"\";\r\n\t\tChapter = 0;\r\n\t\tPosition = 0;\r\n\t\tTime = new Date();\r\n\r\n\t\tstatic deserialize(json: any) {\r\n\t\t\tvar obj = new Bookmark();\r\n\t\t\tAppUtility.copy(json, obj);\r\n\t\t\treturn obj;\r\n\t\t}\r\n\t}\r\n\r\n\t/** Based-Counter information */\r\n\texport class CounterBase {\r\n\t\tType = \"\";\r\n\t\tTotal = 0;\r\n\r\n\t\tconstructor(type?: string, total?: number) {\r\n\t\t\tif (AppUtility.isNotEmpty(type) && total != undefined) {\r\n\t\t\t\tthis.Type = type;\r\n\t\t\t\tthis.Total = total;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tstatic deserialize(json: any) {\r\n\t\t\tvar obj = new CounterBase();\r\n\t\t\tAppUtility.copy(json, obj);\r\n\t\t\treturn obj;\r\n\t\t}\r\n\t}\r\n\r\n\t/** Counter information */\r\n\texport class CounterInfo extends CounterBase {\r\n\t\tLastUpdated = new Date();\r\n\t\tMonth = 0;\r\n\t\tWeek = 0;\r\n\r\n\t\tstatic deserialize(json: any) {\r\n\t\t\tvar obj = new CounterInfo();\r\n\t\t\tAppUtility.copy(json, obj);\r\n\t\t\treturn obj;\r\n\t\t}\r\n\t}\r\n\r\n\t/** Based-Statistic information */\r\n\texport class StatisticBase {\r\n\t\tName = \"\";\r\n\t\tTitle = \"\";\r\n\t\tCounters = 0;\r\n\r\n\t\tstatic deserialize(json: any) {\r\n\t\t\tvar statistic = new StatisticBase();\r\n\t\t\tAppUtility.copy(json, statistic, (d: any) => {\r\n\t\t\t\tstatistic.Title = AppUtility.toANSI(statistic.Name).toLowerCase();\r\n\t\t\t});\r\n\t\t\treturn statistic;\r\n\t\t}\r\n\t}\r\n\r\n\t/** Statistic information */\r\n\texport class StatisticInfo extends StatisticBase {\r\n\t\tFullName = \"\";\r\n\t\tChildren: Array<StatisticInfo> = [];\r\n\r\n\t\tstatic deserialize(json: any) {\r\n\t\t\tvar statistic = new StatisticInfo();\r\n\t\t\tAppUtility.copy(json, statistic, (data: any) => {\r\n\t\t\t\tstatistic.FullName = statistic.Name;\r\n\t\t\t\tstatistic.Title = AppUtility.toANSI(statistic.FullName).toLowerCase();\r\n\t\t\t\tstatistic.Children = !AppUtility.isArray(data.Children)\r\n\t\t\t\t\t? []\r\n\t\t\t\t\t: new List<any>(data.Children)\r\n\t\t\t\t\t\t.Select(c => {\r\n\t\t\t\t\t\t\tlet child = new StatisticInfo();\r\n\t\t\t\t\t\t\tAppUtility.copy(c, child);\r\n\t\t\t\t\t\t\tchild.FullName = statistic.Name + \" > \" + child.Name;\r\n\t\t\t\t\t\t\tchild.Title = AppUtility.toANSI(child.FullName).toLowerCase();\r\n\t\t\t\t\t\t\treturn child;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.ToArray();\r\n\t\t\t});\r\n\t\t\treturn statistic;\r\n\t\t}\r\n\r\n\t\ttoJSON() {\r\n\t\t\tvar json = {\r\n\t\t\t\tName: this.Name,\r\n\t\t\t\tCounters: this.Counters,\r\n\t\t\t\tChildren: []\r\n\t\t\t};\r\n\r\n\t\t\tjson.Children = new List(this.Children)\r\n\t\t\t\t.Select(c => {\r\n\t\t\t\t\treturn { Name: c.Name, Counters: c.Counters }\r\n\t\t\t\t})\r\n\t\t\t\t.ToArray();\r\n\r\n\t\t\treturn JSON.stringify(json);\r\n\t\t}\r\n\t}\r\n\r\n\t/** All available statistics */\r\n\texport class Statistics {\r\n\t\tCategories = new Array<StatisticInfo>();\r\n\t\tAuthors = new Collections.Dictionary<string, Array<StatisticBase>>();\r\n\t\tStatus = new Array<StatisticBase>();\r\n\t}\r\n\t\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/objects.ts","import { Injectable } from \"@angular/core\";\r\nimport { Http } from \"@angular/http\";\r\nimport { Platform } from \"ionic-angular\";\r\nimport { Storage } from \"@ionic/storage\";\r\nimport { Device } from \"@ionic-native/device\";\r\nimport { List } from \"linqts\";\r\nimport * as Collections from \"typescript-collections\";\r\nimport \"rxjs/add/operator/toPromise\";\r\nimport \"rxjs/add/operator/map\";\r\n\r\nimport { AppUtility } from \"../helpers/utility\";\r\nimport { AppCrypto } from \"../helpers/crypto\";\r\nimport { AppAPI } from \"../helpers/api\";\r\nimport { AppEvents } from \"../helpers/events\";\r\nimport { AppRTU } from \"../helpers/rtu\";\r\n\r\nimport { AppData } from \"../models/data\";\r\nimport { AppModels } from \"../models/objects\";\r\n\r\n@Injectable()\r\nexport class ConfigurationService {\r\n\r\n\tconstructor(public http: Http, public platform: Platform, public device: Device, public storage: Storage) {\r\n\t\tAppAPI.setHttp(this.http);\r\n\t\tAppRTU.register(\"Scheduler\", (message: any) => this.syncBookmarks());\r\n\t}\r\n\r\n\t/** Prepare the working environments of the app */\r\n\tprepare(onCompleted?: (data?: any) => void) {\r\n\t\t// app mode\r\n\t\tAppData.Configuration.app.mode = this.platform.is(\"cordova\") && this.device.platform != \"browser\" ? \"NTA\" : \"PWA\";\r\n\r\n\t\t// native app\r\n\t\tif (AppUtility.isNativeApp()) {\r\n\t\t\tAppData.Configuration.app.platform = this.device.platform;\r\n\t\t\tAppData.Configuration.session.device = this.device.uuid;\r\n\t\t}\r\n\r\n\t\t// progressive web app\r\n\t\telse {\r\n\t\t\tAppData.Configuration.app.host = window.location.hostname;\r\n\t\t\tif (AppUtility.indexOf(AppData.Configuration.app.host, \".\") > 0) {\r\n\t\t\t\tlet host = AppUtility.toArray(AppData.Configuration.app.host, \".\");\r\n\t\t\t\tAppData.Configuration.app.host = host[host.length - 2] + \".\" + host[host.length - 1];\r\n\t\t\t\tAppData.Configuration.app.name = AppData.Configuration.app.host;\r\n\t\t\t}\r\n\r\n\t\t\tAppData.Configuration.app.platform = this.device.platform;\r\n\t\t\tif (!AppUtility.isNotEmpty(AppData.Configuration.app.platform) || AppData.Configuration.app.platform == \"browser\") {\r\n\t\t\t\tAppData.Configuration.app.platform =\r\n\t\t\t\t\t/iPhone|iPad|iPod|Windows Phone|Android|BlackBerry|BB10|IEMobile|webOS|Opera Mini/i.test(window.navigator.userAgent)\r\n\t\t\t\t\t\t? /iPhone|iPad|iPod/i.test(window.navigator.userAgent)\r\n\t\t\t\t\t\t\t? \"iOS\"\r\n\t\t\t\t\t\t\t: /Windows Phone/i.test(window.navigator.userAgent)\r\n\t\t\t\t\t\t\t\t? \"Windows Phone\"\r\n\t\t\t\t\t\t\t\t: /Android/i.test(window.navigator.userAgent)\r\n\t\t\t\t\t\t\t\t\t? \"Android\"\r\n\t\t\t\t\t\t\t\t\t: /BlackBerry|BB10/i.test(window.navigator.userAgent)\r\n\t\t\t\t\t\t\t\t\t\t? \"BlackBerry\"\r\n\t\t\t\t\t\t\t\t\t\t: \"Mobile\"\r\n\t\t\t\t\t\t: \"Desktop\";\r\n\t\t\t}\r\n\r\n\t\t\t// add mode when working with progressive web app (PWA)\r\n\t\t\tif (AppData.Configuration.app.mode == \"PWA\") {\r\n\t\t\t\tAppData.Configuration.app.platform += \" \" + AppData.Configuration.app.mode;\r\n\t\t\t}\r\n\r\n\t\t\t// refer\r\n\t\t\tlet refer = this.platform.getQueryParam(\"refer\");\r\n\t\t\tif (AppUtility.isNotEmpty(refer)) {\r\n\t\t\t\trefer = AppUtility.getQueryParamJson(refer);\r\n\t\t\t\tAppData.Configuration.app.refer = {\r\n\t\t\t\t\tid: AppUtility.isNotEmpty(refer.id) ? refer.id : \"\",\r\n\t\t\t\t\tsection: AppUtility.isNotEmpty(refer.section) ? refer.section : \"\"\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tonCompleted != undefined && onCompleted(AppData.Configuration);\r\n\t}\r\n\r\n\t/** Initializes the configuration settings of the app */\r\n\tasync initializeAsync(onNext?: (data?: any) => void, onError?: (error?: any) => void, noInitializeSession?: boolean) {\r\n\t\t// prepare environment\r\n\t\tAppData.Configuration.app.mode == \"\" && this.prepare();\r\n\r\n\t\t// load saved session\r\n\t\tif (AppData.Configuration.session.jwt == null || AppData.Configuration.session.keys == null) {\r\n\t\t\tawait this.loadSessionAsync();\r\n\t\t}\r\n\t\t\r\n\t\t// initialize session\r\n\t\tif (AppUtility.isFalse(noInitializeSession)) {\r\n\t\t\tawait this.initializeSessionAsync(onNext, onError);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tonNext != undefined && onNext();\r\n\t\t}\r\n\t}\r\n\r\n\t/** Initializes the session with REST API */\r\n\tasync initializeSessionAsync(onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet response = await AppAPI.GetAsync(\"users/session\");\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tawait this.updateSessionAsync(data.Data, () => {\r\n\t\t\t\t\tlet isAuthenticated = this.isAuthenticated() && AppUtility.isObject(AppData.Configuration.session.account, true);\r\n\t\t\t\t\tAppData.Configuration.session.account = isAuthenticated\r\n\t\t\t\t\t\t? AppData.Configuration.session.account\r\n\t\t\t\t\t\t: this.getAccount(true);\r\n\t\t\t\t\tAppEvents.broadcast(isAuthenticated ? \"SessionIsRegistered\" : \"SessionIsInitialized\", AppData.Configuration.session);\r\n\t\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Configuration]: Error occurred while initializing the session\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Configuration]: Error occurred while initializing the session\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Registers the initialized session (anonymous) with REST API */\r\n\tasync registerSessionAsync(onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet path = \"users/session\"\r\n\t\t\t\t+ \"?register=\" + AppData.Configuration.session.id\r\n\t\t\tlet response = await AppAPI.GetAsync(path);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tAppData.Configuration.session.account = this.getAccount(true);\r\n\t\t\t\tawait this.saveSessionAsync(() => {\r\n\t\t\t\t\tAppEvents.broadcast(\"SessionIsRegistered\", AppData.Configuration.session);\r\n\t\t\t\t});\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Configuration]: Error occurred while registering the session\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Configuration]: Error occurred while registering the session\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Updates the session and stores into storage */\r\n\tasync updateSessionAsync(session: any, onCompleted?: () => void) {\r\n\t\tif (AppUtility.isNotEmpty(session.ID)) {\r\n\t\t\tAppData.Configuration.session.id = session.ID;\r\n\t\t}\r\n\r\n\t\tif (AppUtility.isNotEmpty(session.DeviceID)) {\r\n\t\t\tAppData.Configuration.session.device = session.DeviceID;\r\n\t\t}\r\n\r\n\t\tif (AppUtility.isObject(session.Keys, true)) {\r\n\t\t\tAppData.Configuration.session.keys = {\r\n\t\t\t\tjwt: session.Keys.JWT,\r\n\t\t\t\taes: {\r\n\t\t\t\t\tkey: session.Keys.AES.Key,\r\n\t\t\t\t\tiv: session.Keys.AES.IV\r\n\t\t\t\t},\r\n\t\t\t\trsa: {\r\n\t\t\t\t\texponent: session.Keys.RSA.Exponent,\r\n\t\t\t\t\tmodulus: session.Keys.RSA.Modulus\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tAppCrypto.initKeys(AppData.Configuration.session.keys);\r\n\t\t}\r\n\r\n\t\tif (AppUtility.isNotEmpty(session.JWT)) {\r\n\t\t\tAppData.Configuration.session.jwt = AppCrypto.jwtDecode(session.JWT, AppUtility.isObject(AppData.Configuration.session.keys, true) ? AppData.Configuration.session.keys.jwt : AppData.Configuration.app.name);\r\n\t\t}\r\n\r\n\t\tawait this.saveSessionAsync(onCompleted);\r\n\t}\r\n\r\n\t/** Loads the session from storage */\r\n\tasync loadSessionAsync(onCompleted?: () => void) {\r\n\t\ttry {\r\n\t\t\tlet data = await this.storage.get(\"VIEApps-Session\");\r\n\t\t\tif (AppUtility.isNotEmpty(data) && data != \"{}\") {\r\n\t\t\t\tAppData.Configuration.session = JSON.parse(data as string);\r\n\t\t\t\tif (AppData.Configuration.session.account != null && AppData.Configuration.session.account.profile != null) {\r\n\t\t\t\t\tAppData.Configuration.session.account.profile == AppModels.Account.deserialize(AppData.Configuration.session.account.profile);\r\n\t\t\t\t}\r\n\t\t\t\tAppEvents.broadcast(\"SessionIsLoaded\", AppData.Configuration.session);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Configuration]: Error occurred while loading the saved/offline session\", e);\r\n\t\t}\r\n\r\n\t\tonCompleted != undefined && onCompleted();\r\n\t}\r\n\r\n\t/** Saves the session into storage */\r\n\tasync saveSessionAsync(onCompleted?: () => void) {\r\n\t\ttry {\r\n\t\t\tawait this.storage.set(\"VIEApps-Session\", JSON.stringify(AppUtility.clone(AppData.Configuration.session, [\"captcha\"])));\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Configuration]: Error occurred while saving/storing the session\", e);\r\n\t\t}\r\n\r\n\t\tonCompleted != undefined && onCompleted();\r\n\t}\r\n\r\n\t/** Deletes the session from storage */\r\n\tasync deleteSessionAsync(onCompleted?: () => void) {\r\n\t\tAppData.Configuration.session.id = null;\r\n\t\tAppData.Configuration.session.jwt = null;\r\n\t\tAppData.Configuration.session.keys = null;\r\n\t\tAppData.Configuration.session.account = this.getAccount(true);\r\n\t\tawait this.storage.remove(\"VIEApps-Session\");\r\n\t\tonCompleted != undefined && onCompleted();\r\n\t}\r\n\r\n\t/** Gets the information of the current/default account */\r\n\tgetAccount(getDefault?: boolean) {\r\n\t\treturn AppUtility.isTrue(getDefault) || AppData.Configuration.session.account == null\r\n\t\t\t? {\r\n\t\t\t\t\tid: null,\r\n\t\t\t\t\tstatus: null,\r\n\t\t\t\t\troles: null,\r\n\t\t\t\t\tprivileges: null,\r\n\t\t\t\t\tprofile: null,\r\n\t\t\t\t\trole: \"Anonymous\",\r\n\t\t\t\t\tfacebook: {\r\n\t\t\t\t\t\tid: null,\r\n\t\t\t\t\t\tname: null,\r\n\t\t\t\t\t\tpictureUrl: null,\r\n\t\t\t\t\t\tprofileUrl: null\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t: AppData.Configuration.session.account;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates information of the account\r\n\t * @param data \r\n\t * @param onCompleted \r\n\t */\r\n\tupdateAccount(data: any, onCompleted?: () => void) {\r\n\t\tif (AppData.Configuration.session.account == null || AppData.Configuration.session.account.id != data.ID) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tAppData.Configuration.session.account.status = data.Status as string;\r\n\t\tAppData.Configuration.session.account.roles = new List<string>(data.Roles)\r\n\t\t\t.Select(r => r.trim())\r\n\t\t\t.Distinct()\r\n\t\t\t.ToArray();\r\n\t\tAppData.Configuration.session.account.privileges = new List<any>(data.Privileges)\r\n\t\t\t.Select(p => AppModels.Privilege.deserialize(p))\r\n\t\t\t.ToArray();\r\n\t\tAppData.Configuration.session.account.role = new List<string>(data.Roles).FirstOrDefault(r => r == \"SystemAdministrator\") != null\r\n\t\t\t? \"Administrator\"\r\n\t\t\t: new List<string>(data.Roles).FirstOrDefault(r => r == \"Authenticated\") != null\r\n\t\t\t\t? \"User\"\r\n\t\t\t\t: \"Anonymous\";\r\n\t\tonCompleted != undefined && onCompleted();\r\n\t}\r\n\r\n\t/**\r\n\t * Call the service to patch information of the account\r\n\t * @param onNext \r\n\t * @param defer \r\n\t */\r\n\tpatchAccount(onNext?: () => void, defer?: number) {\r\n\t\tAppUtility.setTimeout(() => {\r\n\t\t\tAppRTU.send(\r\n\t\t\t\t{\r\n\t\t\t\t\tServiceName: \"users\",\r\n\t\t\t\t\tObjectName: \"account\",\r\n\t\t\t\t\tVerb: \"GET\",\r\n\t\t\t\t\tQuery: {\r\n\t\t\t\t\t\t\"x-status\": \"\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tExtra: {\r\n\t\t\t\t\t\t\"x-status\": \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t() => {\r\n\t\t\t\t\tonNext != undefined && onNext();\r\n\t\t\t\t},\r\n\t\t\t\t(observable) => {\r\n\t\t\t\t\tobservable.map(response => response.json()).subscribe(\r\n\t\t\t\t\t\t(data: any) => {\r\n\t\t\t\t\t\t\tthis.updateAccount(data.Data);\r\n\t\t\t\t\t\t\tonNext != undefined && onNext();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t(error: any) => {\r\n\t\t\t\t\t\t\tconsole.error(\"[Configuration]: Error occurred while patching an account\", error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}, defer || 345);\r\n\t}\r\n\r\n\t/** Loads the reading options from storage */\r\n\tasync loadOptionsAsync(onCompleted?: (data?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet data = await this.storage.get(\"VIEApps-Reading-Options\");\r\n\t\t\tif (AppUtility.isNotEmpty(data) && data != \"{}\") {\r\n\t\t\t\tAppData.Configuration.reading.options = JSON.parse(data as string);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Books]: Error occurred while loading the reading options\", e);\r\n\t\t}\r\n\r\n\t\tonCompleted != undefined && onCompleted(AppData.Configuration.reading.options);\r\n\t}\r\n\r\n\t/** Saves the reading options into storage */\r\n\tasync saveOptionsAsync(onCompleted?: (data?: any) => void) {\r\n\t\ttry {\r\n\t\t\tawait this.storage.set(\"VIEApps-Reading-Options\", JSON.stringify(AppData.Configuration.reading.options));\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Books]: Error occurred while saving the reading options into storage\", e);\r\n\t\t}\r\n\r\n\t\tonCompleted != undefined && onCompleted(AppData.Configuration.reading.options);\r\n\t}\r\n\r\n\t/** Loads the bookmarks from storage */\r\n\tasync loadBookmarksAsync(onCompleted?: () => void) {\r\n\t\tAppData.Configuration.reading.bookmarks = new Collections.Dictionary<string, AppModels.Bookmark>();\r\n\t\ttry {\r\n\t\t\tlet data = await this.storage.get(\"VIEApps-Bookmarks\");\r\n\t\t\tif (AppUtility.isNotEmpty(data) && data != \"{}\" && data != \"[]\") {\r\n\t\t\t\tnew List<any>(JSON.parse(data as string)).ForEach(b => {\r\n\t\t\t\t\tlet bookmark = AppModels.Bookmark.deserialize(b);\r\n\t\t\t\t\tAppData.Configuration.reading.bookmarks.setValue(bookmark.ID, bookmark);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tonCompleted != undefined && onCompleted();\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Books]: Error occurred while loading the bookmarks\", e);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Saves the bookmarks into storage */\r\n\tasync saveBookmarksAsync(onCompleted?: () => void) {\r\n\t\ttry {\r\n\t\t\tlet bookmarks = new List(AppData.Configuration.reading.bookmarks.values())\r\n\t\t\t\t.OrderByDescending(b => b.Time)\r\n\t\t\t\t.Take(30)\r\n\t\t\t\t.ToArray();\r\n\t\t\tawait this.storage.set(\"VIEApps-Bookmarks\", JSON.stringify(bookmarks));\r\n\r\n\t\t\tonCompleted != undefined && onCompleted();\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Books]: Error occurred while saving the bookmarks into storage\", e);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Updates a bookmark */\r\n\tasync updateBookmarksAsync(id: string, chapter: number, offset: number, onCompleted?: () => void) {\r\n\t\tvar bookmark = new AppModels.Bookmark();\r\n\t\tbookmark.ID = id;\r\n\t\tbookmark.Chapter = chapter;\r\n\t\tbookmark.Position = offset;\r\n\t\tAppData.Configuration.reading.bookmarks.setValue(bookmark.ID, bookmark);\r\n\r\n\t\tawait this.saveBookmarksAsync(onCompleted);\r\n\t}\r\n\r\n\t/** Sends the request to get bookmarks from APIs */\r\n\tgetBookmarks(onCompleted?: () => void) {\r\n\t\tAppRTU.send({\r\n\t\t\tServiceName: \"books\",\r\n\t\t\tObjectName: \"bookmarks\",\r\n\t\t\tVerb: \"GET\"\r\n\t\t});\r\n\r\n\t\tonCompleted != undefined && onCompleted();\r\n\t}\r\n\r\n\t/** Syncs the bookmarks with APIs */\r\n\tsyncBookmarks(onCompleted?: () => void) {\r\n\t\tif (this.isAuthenticated()) {\r\n\t\t\tlet bookmarks = new List(AppData.Configuration.reading.bookmarks.values())\r\n\t\t\t\t.OrderByDescending(b => b.Time)\r\n\t\t\t\t.Take(30)\r\n\t\t\t\t.ToArray();\r\n\t\t\r\n\t\t\tAppRTU.send({\r\n\t\t\t\tServiceName: \"books\",\r\n\t\t\t\tObjectName: \"bookmarks\",\r\n\t\t\t\tVerb: \"POST\",\r\n\t\t\t\tBody: JSON.stringify(bookmarks)\r\n\t\t\t});\r\n\r\n\t\t\tonCompleted != undefined && onCompleted();\r\n\t\t}\r\n\t}\r\n\r\n\t/** Merges the bookmarks with APIs */\r\n\tmergeBookmarks(data: any, onCompleted?: () => void) {\r\n\t\tAppData.Configuration.session.account.profile.LastSync = new Date();\r\n\t\tnew List<any>(data.Objects)\r\n\t\t\t.ForEach(b => {\r\n\t\t\t\tlet bookmark = AppModels.Bookmark.deserialize(b);\r\n\t\t\t\tif (!AppData.Configuration.reading.bookmarks.containsKey(bookmark.ID)) {\r\n\t\t\t\t\tAppData.Configuration.reading.bookmarks.setValue(bookmark.ID, bookmark);\r\n\t\t\t\t}\r\n\t\t\t\telse if (bookmark.Time > AppData.Configuration.reading.bookmarks.getValue(bookmark.ID).Time) {\r\n\t\t\t\t\tAppData.Configuration.reading.bookmarks.setValue(bookmark.ID, bookmark);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tnew List(AppData.Configuration.reading.bookmarks.values())\r\n\t\t\t.ForEach((b, i)  => {\r\n\t\t\t\tAppUtility.setTimeout(() => {\r\n\t\t\t\t\tif (!AppData.Books.getValue(b.ID)) {\r\n\t\t\t\t\t\tAppRTU.send({\r\n\t\t\t\t\t\t\tServiceName: \"books\",\r\n\t\t\t\t\t\t\tObjectName: \"book\",\r\n\t\t\t\t\t\t\tVerb: \"GET\",\r\n\t\t\t\t\t\t\tQuery: {\r\n\t\t\t\t\t\t\t\t\"object-identity\": b.ID\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 456 + (i * 10));\r\n\t\t\t});\r\n\r\n\t\tAppUtility.setTimeout(async () => {\r\n\t\t\tawait this.saveBookmarksAsync(onCompleted);\r\n\t\t});\r\n\t}\r\n\r\n\t/** Sends the request to delete a bookmark from APIs */\r\n\tdeleteBookmark(id: string, onCompleted?: () => void) {\r\n\t\tAppRTU.send({\r\n\t\t\tServiceName: \"books\",\r\n\t\t\tObjectName: \"bookmarks\",\r\n\t\t\tVerb: \"DELETE\",\r\n\t\t\tQuery: {\r\n\t\t\t\t\"object-identity\": id\r\n\t\t\t}\r\n\t\t});\r\n\t\tAppData.Configuration.reading.bookmarks.remove(id);\r\n\t\tonCompleted != undefined && onCompleted();\r\n\t}\r\n\r\n\t/** Gets the state that determines the app is ready to go */\r\n\tisReady() {\r\n\t\treturn AppUtility.isObject(AppData.Configuration.session.keys, true) && AppUtility.isObject(AppData.Configuration.session.jwt, true);\r\n\t}\r\n\r\n\t/** Gets the state that determines the current account is authenticated or not */\r\n\tisAuthenticated() {\r\n\t\treturn AppUtility.isObject(AppData.Configuration.session.jwt, true) && AppUtility.isNotEmpty(AppData.Configuration.session.jwt.uid);\r\n\t}\r\n\r\n\t/** Process the messages of RTU */\r\n\tprocessRTU(message: any) {\r\n\t\t// stop on error message\r\n\t\tif (message.Type == \"Error\") {\r\n\t\t\tconsole.warn(\"[Configuration]: got an error message from RTU\", message);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// parse\r\n\t\tvar info = AppRTU.parse(message.Type);\r\n\r\n\t\t// bookmarks\r\n\t\tif (info.ObjectName == \"Bookmarks\") {\r\n\t\t\tif (this.isAuthenticated() && AppData.Configuration.session.account.id == message.Data.ID) {\r\n\t\t\t\tthis.mergeBookmarks(message.Data);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/configuration.ts","import { ReflectiveInjector } from \"@angular/core\";\r\nimport { Http, Headers } from \"@angular/http\";\r\nimport { BrowserXhr, ConnectionBackend, XHRBackend, XSRFStrategy, CookieXSRFStrategy } from \"@angular/http\";\r\nimport { BaseRequestOptions, RequestOptions, BaseResponseOptions, ResponseOptions } from \"@angular/http\";\r\nimport { CompleterData, CompleterItem } from \"ng2-completer\";\r\nimport { List } from \"linqts\";\r\nimport * as Rx from \"rxjs/Rx\";\r\nimport \"rxjs/add/operator/toPromise\";\r\nimport \"rxjs/add/operator/map\";\r\n\r\nimport { AppUtility } from \"./utility\";\r\nimport { AppCrypto } from \"./crypto\";\r\nimport { AppData } from \"../models/data\";\r\n\r\nexport namespace AppAPI {\r\n\r\n\tvar httpInstance: Http = undefined;\r\n\r\n\t/** Sets the instance of the Angular Http service */\r\n\texport function setHttp(http: Http) {\r\n\t\tif (httpInstance == undefined && http != undefined && http != null) {\r\n\t\t\thttpInstance = http;\r\n\t\t}\r\n\t}\r\n\r\n\t/** Gets the instance of the Angular Http service */\r\n\texport function getHttp() {\r\n\t\tif (httpInstance == undefined) {\r\n\t\t\thttpInstance = ReflectiveInjector.resolveAndCreate([\r\n\t\t\t\tHttp,\r\n\t\t\t\tBrowserXhr,\r\n\t\t\t\t{ provide: RequestOptions, useClass: BaseRequestOptions },\r\n\t\t\t\t{ provide: ResponseOptions, useClass: BaseResponseOptions },\r\n\t\t\t\t{ provide: ConnectionBackend, useClass: XHRBackend },\r\n\t\t\t\t{ provide: XSRFStrategy, useFactory: () => new CookieXSRFStrategy() }\r\n\t\t\t]).get(Http);\r\n\t\t}\r\n\t\treturn httpInstance;\r\n\t}\r\n\r\n\t/**\r\n\t\t* Performs a request to APIs with 'GET' method\r\n\t\t* @param path Path of the end-point API's uri to perform the request\r\n\t\t* @param headers Additional headers to perform the request\r\n\t*/\r\n\texport function Get(path: string, headers?: any) {\r\n\t\treturn getHttp().get(AppData.Configuration.app.uris.apis + path, { headers: getHeaders(headers) });\r\n\t}\r\n\r\n\t/**\r\n\t\t* Performs a request to APIs with 'GET' method\r\n\t\t* @param path Path of the end-point API's uri to perform the request\r\n\t\t* @param headers Additional headers to perform the request\r\n\t*/\r\n\texport function GetAsync(path: string, headers?: any) {\r\n\t\treturn Get(path, headers).toPromise();\r\n\t}\r\n\r\n\t/**\r\n\t\t* Performs a request to APIs with 'POST' method\r\n\t\t* @param path Path of the end-point API's uri to perform the request\r\n\t\t* @param body The JSON object that contains the body to perform the request\r\n\t\t* @param headers Additional headers to perform the request\r\n\t*/\r\n\texport function Post(path: string, body: any, headers?: any) {\r\n\t\treturn getHttp().post(AppData.Configuration.app.uris.apis + path, JSON.stringify(body), { headers: getHeaders(AppUtility.isArray(headers) ? headers : true) });\r\n\t}\r\n\r\n\t/**\r\n\t\t* Performs a request to APIs with 'POST' method\r\n\t\t* @param path Path of the end-point API's uri to perform the request\r\n\t\t* @param body The JSON object that contains the body to perform the request\r\n\t\t* @param headers Additional headers to perform the request\r\n\t*/\r\n\texport function PostAsync(path: string, body: any, headers?: any) {\r\n\t\treturn Post(path, body, headers).toPromise();\r\n\t}\r\n\r\n\t/**\r\n\t\t* Performs a request to APIs with 'PUT' method\r\n\t\t* @param path Path of the end-point API's uri to perform the request\r\n\t\t* @param body The JSON object that contains the body to perform the request\r\n\t\t* @param headers Additional headers to perform the request\r\n\t*/\r\n\texport function Put(path: string, body: any, headers?: any) {\r\n\t\treturn getHttp().put(AppData.Configuration.app.uris.apis + path, JSON.stringify(body), { headers: getHeaders(AppUtility.isArray(headers) ? headers : true) });\r\n\t}\r\n\r\n\t/**\r\n\t\t* Performs a request to APIs with 'PUT' method\r\n\t\t* @param path Path of the end-point API's uri to perform the request\r\n\t\t* @param body The JSON object that contains the body to perform the request\r\n\t\t* @param headers Additional headers to perform the request\r\n\t*/\r\n\texport function PutAsync(path: string, body: any, headers?: any) {\r\n\t\treturn Put(path, body, headers).toPromise();\r\n\t}\r\n\r\n\t/**\r\n\t\t* Performs a request to APIs with 'DELETE' method\r\n\t\t* @param path Path of the end-point API's uri to perform the request\r\n\t\t* @param headers Additional headers to perform the request\r\n\t*/\r\n\texport function Delete(path: string, headers?: any) {\r\n\t\treturn getHttp().delete(AppData.Configuration.app.uris.apis + path, { headers: getHeaders(headers) });\r\n\t}\r\n\r\n\t/**\r\n\t\t* Performs a request to APIs with 'DELETE' method\r\n\t\t* @param path Path of the end-point API's uri to perform the request\r\n\t\t* @param headers Additional headers to perform the request\r\n\t*/\r\n\texport function DeleteAsync(path: string, headers?: any) {\r\n\t\treturn Delete(path, headers).toPromise();\r\n\t}\r\n\r\n\t/** Gets the headers for making requests to APIs */\r\n\texport function getHeaders(additional?: any) {\r\n\t\tlet headers = new Headers();\r\n\r\n\t\tlet authHeaders = getAuthHeaders();\r\n\t\tfor (let name in authHeaders) {\r\n\t\t\theaders.append(name, authHeaders[name]);\r\n\t\t}\r\n\r\n\t\tif (additional != undefined) {\r\n\t\t\tif (AppUtility.isTrue(additional)) {\r\n\t\t\t\theaders.append(\"Content-Type\", \"application/json\");\r\n\t\t\t}\r\n\t\t\telse if (AppUtility.isObject(additional, true) && AppUtility.isNotEmpty(additional.name) && AppUtility.isNotEmpty(additional.value)) {\r\n\t\t\t\theaders.append(additional.name as string, additional.value as string);\r\n\t\t\t}\r\n\t\t\telse if (AppUtility.isArray(additional)) {\r\n\t\t\t\tnew List<any>(additional).ForEach(h => {\r\n\t\t\t\t\tif (AppUtility.isObject(h, true) && AppUtility.isNotEmpty(h.name) && AppUtility.isNotEmpty(h.value)) {\r\n\t\t\t\t\t\theaders.append(h.name as string, h.value as string);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse if (AppUtility.isObject(additional, true)) {\r\n\t\t\t\tfor (let name in additional) {\r\n\t\t\t\t\theaders.append(name, additional[name]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn headers;\r\n\t}\r\n\r\n\t/** Gets the authenticated headers (JSON) for making requests to APIs */\r\n\texport function getAuthHeaders(addToken = true, addAppInfo = true, addDeviceID = true): any {\r\n\t\tvar headers = {};\r\n\r\n\t\tif (addToken\r\n\t\t\t&& AppUtility.isObject(AppData.Configuration.session.jwt, true)\r\n\t\t\t&& AppUtility.isObject(AppData.Configuration.session.keys, true)\r\n\t\t\t&& AppUtility.isNotEmpty(AppData.Configuration.session.keys.jwt)) {\r\n\t\t\theaders[\"x-app-token\"] = AppCrypto.jwtEncode(AppData.Configuration.session.jwt, AppData.Configuration.session.keys.jwt);\r\n\t\t}\r\n\r\n\t\tif (addAppInfo) {\r\n\t\t\theaders[\"x-app-name\"] = AppData.Configuration.app.name;\r\n\t\t\theaders[\"x-app-platform\"] = AppData.Configuration.app.platform;\r\n\t\t}\r\n\r\n\t\tif (addDeviceID && AppUtility.isNotEmpty(AppData.Configuration.session.device)) {\r\n\t\t\theaders[\"x-device-id\"] = AppData.Configuration.session.device;\r\n\t\t}\r\n\r\n\t\treturn headers;\r\n\t}\r\n\r\n\t/** Completer custom searching services */\r\n\texport class CompleterCustomSearch extends Rx.Subject<CompleterItem[]> implements CompleterData {\r\n    constructor(\r\n\t\t\tpublic buildRequest: (term: string) => string,\r\n\t\t\tpublic doConvert: (data: any) => CompleterItem[],\r\n\t\t\tpublic doCancel?: () => void\t\t\t\r\n\t\t){\r\n    \tsuper();\r\n    }\r\n\r\n\t\tprivate subscription: Rx.Subscription = undefined;\r\n\r\n    public search(term: string) {\r\n\t\t\tthis.subscription = Get(this.buildRequest(term))\r\n\t\t\t\t.map(response => {\r\n\t\t\t\t\tthis.next(this.doConvert(response.json()));\r\n\t\t\t\t})\r\n\t\t\t\t.subscribe();\r\n    }\r\n \r\n    public cancel() {\r\n\t\t\tif (this.doCancel != undefined) {\r\n\t\t\t\tthis.doCancel();\r\n\t\t\t}\r\n\t\t\tif (this.subscription) {\r\n\t\t\t\tthis.subscription.unsubscribe();\r\n\t\t\t}\r\n    }\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/api.ts","import { Injectable } from \"@angular/core\";\r\nimport { Http } from \"@angular/http\";\r\nimport { List } from \"linqts\";\r\nimport \"rxjs/add/operator/toPromise\";\r\nimport \"rxjs/add/operator/map\";\r\n\r\ndeclare var FB: any;\r\n\r\nimport { AppUtility } from \"../helpers/utility\";\r\nimport { AppCrypto } from \"../helpers/crypto\";\r\nimport { AppAPI } from \"../helpers/api\";\r\nimport { AppRTU } from \"../helpers/rtu\";\r\nimport { AppEvents } from \"../helpers/events\";\r\nimport { AppData } from \"../models/data\";\r\nimport { AppModels } from \"../models/objects\";\r\n\r\nimport { ConfigurationService } from \"./configuration\";\r\n\r\n@Injectable()\r\nexport class AuthenticationService {\r\n\r\n\tconstructor(public http: Http, public configSvc: ConfigurationService) {\r\n\t\tAppAPI.setHttp(this.http);\r\n\t\tAppRTU.register(\"Users\", (message: any) => this.processRTU(message));\r\n\t}\r\n\r\n\t/** Checks to see the current account is authenticated or not */\r\n\tisAuthenticated() {\r\n\t\treturn this.configSvc.isAuthenticated();\r\n\t}\r\n\r\n\t/** Checks to see the account is system administrator or not */\r\n\tisSystemAdministrator(account?: any) {\r\n\t\taccount = account || this.configSvc.getAccount();\r\n\t\treturn account && AppUtility.isNotEmpty(account.id) && AppUtility.isArray(account.roles)\r\n\t\t\t&& (new List<string>(account.roles).FirstOrDefault(r => r == \"SystemAdministrator\")) != undefined;\r\n\t}\r\n\r\n\t/** Checks to see the account is administrator or not */\r\n\tisAdministrator(account?: any) {\r\n\t\taccount = account || this.configSvc.getAccount();\r\n\t\treturn this.isSystemAdministrator(account)\r\n\t\t\t|| (account && AppUtility.isNotEmpty(account.id) && AppUtility.isArray(account.roles)\r\n\t\t\t&& (new List<string>(account.roles).FirstOrDefault(r => r == \"Administrator\")) != undefined);\r\n\t}\r\n\r\n\t/** Gets the working role of an account */\r\n\tgetRole(account?: any) {\r\n\t\taccount = account || this.configSvc.getAccount();\r\n\t\treturn this.isSystemAdministrator(account)\r\n\t\t\t? \"Administrator\"\r\n\t\t\t: account && AppUtility.isNotEmpty(account.id) && AppUtility.isArray(account.roles)\r\n\t\t\t\t&& new List<string>(account.roles).FirstOrDefault(r => r == \"Authenticated\") != undefined\r\n\t\t\t\t? \"User\"\r\n\t\t\t\t: \"Anonymous\";\r\n\t}\r\n\r\n\t/** Checks to see the account is authorized to do a specified action on a specified section */\r\n\tisAuthorized(serviceName: string, objectName: string, action: string) {\r\n\t\tserviceName = AppUtility.isNotEmpty(serviceName) ? serviceName : \"\";\r\n\t\tobjectName = AppUtility.isNotEmpty(objectName) ? objectName : \"\";\r\n\t\taction = AppUtility.isNotEmpty(action) ? action : \"\";\r\n\r\n\t\tvar account = this.configSvc.getAccount();\r\n\t\tvar privileges = account != null && AppUtility.isArray(account.privileges)\r\n\t\t\t? account.privileges as Array<AppModels.Privilege>\r\n\t\t\t: new Array<AppModels.Privilege>();\r\n\t\tvar matched = new List(privileges).FirstOrDefault(p => p.ServiceName == serviceName && p.ObjectName == objectName);\r\n\r\n\t\treturn matched != undefined\r\n\t\t\t? new List(matched.Actions).FirstOrDefault(a => a == \"Full\" || a == action) != undefined\r\n\t\t\t: false;\r\n\t}\r\n\r\n\t/** Registers a captcha with REST API */\r\n\tasync registerCaptchaAsync(onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet path = \"users/captcha\"\r\n\t\t\t\t+ \"?register=\" + AppData.Configuration.session.id;\r\n\t\t\tlet response = await AppAPI.GetAsync(path);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tAppData.Configuration.session.captcha = {\r\n\t\t\t\t\tcode: data.Data.Code,\r\n\t\t\t\t\turi: data.Data.Uri\r\n\t\t\t\t};\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while registering a captcha\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while registering a session captcha\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Registers an account with APIs */\r\n\tasync registerAccountAsync(info: any, captcha: string, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tvar body = AppUtility.clone(info);\r\n\t\t\tdelete body.ConfirmEmail;\r\n\t\t\tdelete body.ConfirmPassword;\r\n\r\n\t\t\tbody.ReferID = AppData.Configuration.app.refer.id;\r\n\t\t\tbody.ReferSection = AppData.Configuration.app.refer.section;\r\n\t\t\tbody.Email = AppCrypto.rsaEncrypt(body.Email);\r\n\t\t\tbody.Password = AppCrypto.rsaEncrypt(body.Password);\r\n\t\t\tbody.Captcha = AppCrypto.aesEncrypt(JSON.stringify({ Registered: AppData.Configuration.session.captcha.code, Input: captcha }));\r\n\r\n\t\t\tlet path = \"users/account\"\r\n\t\t\t\t+ \"?related-service=books\"\r\n\t\t\t\t+ \"&language=vi-VN\"\r\n\t\t\t\t+ \"&host=\" + (AppUtility.isWebApp() ? AppUtility.getHost() : AppData.Configuration.app.name)\r\n\t\t\t\t+ \"&uri=\" + AppCrypto.urlEncode(AppUtility.getUri() + \"#?prego=activate&mode={mode}&code={code}\");\r\n\r\n\t\t\tlet response = await AppAPI.PostAsync(path, body);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while registering an account\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while registering new account\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Signs an account in with APIs */\r\n\tasync signInAsync(email: string, password: string, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet body = {\r\n\t\t\t\tEmail: AppCrypto.rsaEncrypt(email),\r\n\t\t\t\tPassword: AppCrypto.rsaEncrypt(password)\r\n\t\t\t};\r\n\t\t\tlet response = await AppAPI.PostAsync(\"users/session\", body);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tawait this.configSvc.updateSessionAsync(data.Data);\r\n\t\t\t\tif (AppData.Configuration.session.account == null) {\r\n\t\t\t\t\tAppData.Configuration.session.account = this.configSvc.getAccount(true);\r\n\t\t\t\t}\r\n\t\t\t\tAppData.Configuration.session.account.id = AppData.Configuration.session.jwt.uid;\r\n\r\n\t\t\t\tconsole.info(\"[Authentication]: Sign-in successful\", AppUtility.isDebug() ? AppData.Configuration.session : \"\");\r\n\t\t\t\tAppEvents.broadcast(\"SessionIsRegistered\");\r\n\r\n\t\t\t\tthis.patchSession(() => {\r\n\t\t\t\t\tthis.configSvc.patchAccount(() => {\r\n\t\t\t\t\t\tthis.getProfile();\r\n\t\t\t\t\t\tthis.configSvc.getBookmarks();\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 123);\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while signing-in\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while signing-in\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Signs an account out with REST API */\r\n\tasync signOutAsync(onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet response = await AppAPI.DeleteAsync(\"users/session\");\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tawait this.configSvc.updateSessionAsync(data.Data);\r\n\t\t\t\tAppEvents.broadcast(\"AccountIsUpdated\");\r\n\r\n\t\t\t\tawait this.configSvc.registerSessionAsync(() => {\r\n\t\t\t\t\tconsole.info(\"[Authentication]: Sign-out successful\", AppUtility.isDebug() ? AppData.Configuration.session : \"\");\r\n\t\t\t\t\tthis.patchSession();\r\n\t\t\t\t\tonNext != undefined && onNext(AppData.Configuration.session);\r\n\t\t\t\t}, onError);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while signing-out\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while signing-out\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\tpatchSession(onNext?: () => void, defer?: number): void {\r\n\t\tAppUtility.setTimeout(() => {\r\n\t\t\tAppRTU.send(\r\n\t\t\t\t{\r\n\t\t\t\t\tServiceName: \"users\",\r\n\t\t\t\t\tObjectName: \"session\",\r\n\t\t\t\t\tVerb: \"PATCH\",\r\n\t\t\t\t\tExtra: {\r\n\t\t\t\t\t\t\"x-session\": AppData.Configuration.session.id\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t() => {\r\n\t\t\t\t\tonNext != undefined && onNext();\r\n\t\t\t\t},\r\n\t\t\t\t() => {\r\n\t\t\t\t\tonNext != undefined && onNext();\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}, defer || 456);\r\n\t}\r\n\t\r\n\t/** Get profile information */\r\n\tgetProfile(id?: string, onCompleted?: (data?: any) => void) {\r\n\t\tvar request = {\r\n\t\t\tServiceName: \"users\",\r\n\t\t\tObjectName: \"profile\",\r\n\t\t\tVerb: \"GET\",\r\n\t\t\tQuery: {\r\n\t\t\t\t\"related-service\": \"books\",\r\n\t\t\t\t\"language\": \"vi-VN\",\r\n\t\t\t\t\"host\": (AppUtility.isWebApp() ? AppUtility.getHost() : AppData.Configuration.app.name)\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (AppUtility.isNotEmpty(id)) {\r\n\t\t\trequest.Query[\"object-identity\"] = id;\r\n\t\t}\r\n\r\n\t\tAppRTU.send(request,\r\n\t\t\t() => {\r\n\t\t\t\tonCompleted != undefined && onCompleted();\r\n\t\t\t},\r\n\t\t\t(observable) => {\r\n\t\t\t\tobservable.map(response => response.json()).subscribe(\r\n\t\t\t\t\t(data: any) => {\r\n\t\t\t\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\t\t\t\tthis.updateProfileAsync(data.Data, onCompleted);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tconsole.error(\"[Authentication]: Error occurred while fetching account profile\");\r\n\t\t\t\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t(error: any) => {\r\n\t\t\t\t\t\tconsole.error(\"[Authentication]: Error occurred while fetching a profile\", error);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\t/** Get profile information of an account */\r\n\tasync getProfileAsync(dontUseRTU?: boolean, id?: string, onCompleted?: (data?: any) => void) {\r\n\t\tlet useRTU = AppUtility.isFalse(dontUseRTU) && id == undefined && AppRTU.isReady();\r\n\t\tif (useRTU) {\r\n\t\t\tthis.getProfile(id, onCompleted);\r\n\t\t\tAppUtility.setTimeout(() => {\r\n\t\t\t\tAppData.Configuration.session.account != null\r\n\t\t\t\t&& (AppData.Configuration.session.account.profile == null || !(AppData.Configuration.session.account.profile instanceof AppModels.Account))\r\n\t\t\t\t&& this.getProfileAsync(true, id, onCompleted);\r\n\t\t\t}, 1234);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttry {\r\n\t\t\t\tlet path = \"users/profile\" + (AppUtility.isNotEmpty(id) ? \"/\" + id : \"\")\r\n\t\t\t\t\t+ \"?related-service=books\"\r\n\t\t\t\t\t+ \"&language=vi-VN\";\r\n\t\t\t\tlet response = await AppAPI.GetAsync(path);\r\n\t\t\t\tlet data = response.json();\r\n\t\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\t\tthis.updateProfileAsync(data.Data, onCompleted);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.error(\"[Authentication]: Error occurred while fetching account profile\");\r\n\t\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while fetching account profile\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/** Update the information of an account profile */\r\n\tasync updateProfileAsync(profile: any, onCompleted?: (data?: any) => void) {\r\n\t\t// update profile into collection of accounts\r\n\t\tAppModels.Account.update(profile);\r\n\r\n\t\t// update profile of current user\r\n\t\tif (AppData.Configuration.session.jwt != null && AppData.Configuration.session.jwt.uid == profile.ID) {\r\n\t\t\tAppData.Configuration.session.account.id = profile.ID;\r\n\t\t\tAppData.Configuration.session.account.profile = AppData.Accounts.getValue(profile.ID);\r\n\t\t\tawait this.storeProfileAsync(() => {\r\n\t\t\t\tAppUtility.isDebug() && console.info(\"[Authentication]: Account profile is updated\", AppData.Configuration.session.account);\r\n\t\t\t\tonCompleted != undefined && onCompleted(AppData.Configuration.session.account);\r\n\t\t\t});\r\n\t\t\tAppData.Configuration.facebook.token != null && AppData.Configuration.facebook.id != null && this.getFacebookProfile();\r\n\t\t}\r\n\r\n\t\t// callback when the profile is not profile of current user account\r\n\t\telse {\r\n\t\t\tonCompleted != undefined && onCompleted(profile);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Store the information of current account profile into storage */\r\n\tasync storeProfileAsync(onCompleted?: (data?: any) => void) {\r\n\t\tawait this.configSvc.saveSessionAsync();\r\n\t\tAppEvents.broadcast(\"AccountIsUpdated\");\r\n\t\tonCompleted != undefined && onCompleted(AppData.Configuration.session);\r\n\t}\r\n\r\n\t/** Perform save profile information (with REST API) */\r\n\tasync saveProfileAsync(info: any, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet path = \"users/profile\"\r\n\t\t\t\t+ \"?related-service=books\"\r\n\t\t\t\t+ \"&language=vi-VN\";\r\n\t\t\tlet response = await AppAPI.PutAsync(path, info);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tawait this.updateProfileAsync(data.Data, onNext);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while updating account profile\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while updating account profile\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Watch the connection of Facebook */\r\n\twatchFacebookConnect() {\r\n\t\tFB.Event.subscribe(\"auth.authResponseChange\",\r\n\t\t\t(response: any) => {\r\n\t\t\t\tif (response.status === \"connected\") {\r\n\t\t\t\t\tAppData.Configuration.facebook.token = response.authResponse.accessToken;\r\n\t\t\t\t\tAppData.Configuration.facebook.id = response.authResponse.userID;\r\n\t\t\t\t\tconsole.info(\"[Authentication]: Facebook is connected\", !AppUtility.isDebug() ? \"\" : AppData.Configuration.facebook);\r\n\r\n\t\t\t\t\tif (AppData.Configuration.session.account.facebook != null) {\r\n\t\t\t\t\t\tthis.getFacebookProfile();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tAppData.Configuration.facebook.token = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\t/** Get the information of Facebook profile */\r\n\tgetFacebookProfile() {\r\n\t\tFB.api(\"/\" + AppData.Configuration.facebook.version + \"/me?fields=id,name,picture&access_token=\" + AppData.Configuration.facebook.token,\r\n\t\t\t(response: any) => {\r\n\t\t\t\tAppData.Configuration.session.account.facebook = {\r\n\t\t\t\t\tid: response.id,\r\n\t\t\t\t\tname: response.name,\r\n\t\t\t\t\tprofileUrl: \"https://www.facebook.com/app_scoped_user_id/\" + response.id,\r\n\t\t\t\t\tpictureUrl: undefined\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.storeProfileAsync(() => {\r\n\t\t\t\t\tconsole.info(\"[Authentication]: Account profile is updated with information of Facebook profile\", !AppUtility.isDebug() ? \"\" : AppData.Configuration.session.account);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.getFacebookAvatar();\r\n\t\t\t});\r\n\t}\r\n\r\n\t/** Get the avatar picture (large picture) of Facebook profile */\r\n\tgetFacebookAvatar() {\r\n\t\tif (AppData.Configuration.session.account.facebook != null && AppData.Configuration.session.account.facebook.id != null && AppData.Configuration.session.jwt != null && AppData.Configuration.session.jwt.oauths != null\r\n\t\t\t&& AppData.Configuration.session.jwt.oauths[\"facebook\"] && AppData.Configuration.session.jwt.oauths[\"facebook\"] == AppData.Configuration.session.account.facebook.id) {\r\n\t\t\tFB.api(\"/\" + AppData.Configuration.facebook.version + \"/\" + AppData.Configuration.session.account.facebook.id + \"/picture?type=large&redirect=false&access_token=\" + AppData.Configuration.facebook.token,\r\n\t\t\t\t(response: any) => {\r\n\t\t\t\t\tAppData.Configuration.session.account.facebook.pictureUrl = response.data.url;\r\n\t\t\t\t\tthis.storeProfileAsync(() => {\r\n\t\t\t\t\t\tconsole.info(\"[Authentication]: Account is updated with information of Facebook profile (large profile picture)\", !AppUtility.isDebug() ? \"\" : response);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t// privileges\r\n\tasync getLibrariesAsync(onCompleted?: (d: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet response = await AppAPI.GetAsync(\"accounts/libraries\");\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tif (onCompleted != undefined) {\r\n\t\t\t\t\tonCompleted(data);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while fetching accounts' libraries\");\r\n\t\t\t\tif (AppUtility.isObject(data.Error, true)) {\r\n\t\t\t\t\tconsole.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while fetching accounts' libraries\", e);\r\n\t\t}\r\n\t}\r\n\r\n\tasync setPrivilegesAsync(body: any, onNext?: (d: any) => void, onError?: (e: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet response = await AppAPI.PostAsync(\"accounts/privileges\", body);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tAppModels.Account.update(data.Data);\r\n\t\t\t\tif (onNext != undefined) {\r\n\t\t\t\t\tonNext(data);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while updating privileges of the account\");\r\n\t\t\t\tif (AppUtility.isObject(data.Error, true)) {\r\n\t\t\t\t\tconsole.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (onError != undefined) {\r\n\t\t\t\t\tonError(data);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while updating privileges of the account\", e);\r\n\t\t\tif (onError != undefined) {\r\n\t\t\t\tonError(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// invitation\r\n\tasync sendInvitationAsync(name: string, email: string, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet path = \"users/account/invite\"\r\n\t\t\t\t+ \"?related-service=books\"\r\n\t\t\t\t+ \"&language=vi-VN\"\r\n\t\t\t\t+ \"&host=\" + (AppUtility.isWebApp() ? AppUtility.getHost() : AppData.Configuration.app.name)\r\n\t\t\t\t+ \"&uri=\" + AppCrypto.urlEncode(AppUtility.getUri() + \"#?prego=activate&mode={mode}&code={code}\");\r\n\t\t\tlet body = {\r\n\t\t\t\tTimestamp: Math.round(+new Date() / 1000),\r\n\t\t\t\tName: name,\r\n\t\t\t\tEmail: AppCrypto.rsaEncrypt(email),\r\n\t\t\t\tSession: AppCrypto.aesEncrypt(AppData.Configuration.session.id),\r\n\t\t\t\tCampaign: \"Books-Email-Invitation\"\r\n\t\t\t};\r\n\t\t\tlet response = await AppAPI.PostAsync(path, body);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while sending an invitation\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while sending an invitation\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Send the request to reset password */\r\n\tasync resetPasswordAsync(email: string, captcha: string, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet path = \"users/account/reset\"\r\n\t\t\t\t+ \"?related-service=books\"\r\n\t\t\t\t+ \"&language=vi-VN\"\r\n\t\t\t\t+ \"&host=\" + (AppUtility.isWebApp() ? AppUtility.getHost() : AppData.Configuration.app.name)\r\n\t\t\t\t+ \"&uri=\" + AppCrypto.urlEncode(AppUtility.getUri() + \"#?prego=activate&mode={mode}&code={code}\");\r\n\t\t\tlet body = {\r\n\t\t\t\tTimestamp: Math.round(+new Date() / 1000),\r\n\t\t\t\tEmail: AppCrypto.rsaEncrypt(email),\r\n\t\t\t\tSession: AppCrypto.aesEncrypt(AppData.Configuration.session.id),\r\n\t\t\t\tCaptcha: AppCrypto.aesEncrypt(JSON.stringify({ Registered: AppData.Configuration.session.captcha.code, Input: captcha }))\r\n\t\t\t};\r\n\t\t\tlet response = await AppAPI.PutAsync(path, body);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tconsole.info(\"[Authentication]: Send the request to reset password successful\");\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while sending a request to reset password\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while sending a request to reset password\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t// update password\r\n\tasync updatePasswordAsync(oldPassword: string, password: string, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet path = \"users/account/password\"\r\n\t\t\t\t+ \"?related-service=books\"\r\n\t\t\t\t+ \"&language=vi-VN\"\r\n\t\t\t\t+ \"&host=\" + (AppUtility.isWebApp() ? AppUtility.getHost() : AppData.Configuration.app.name);\r\n\t\t\tlet body = {\r\n\t\t\t\tTimestamp: Math.round(+new Date() / 1000),\r\n\t\t\t\tOldPassword: AppCrypto.rsaEncrypt(oldPassword),\r\n\t\t\t\tPassword: AppCrypto.rsaEncrypt(password),\r\n\t\t\t\tSession: AppCrypto.aesEncrypt(AppData.Configuration.session.id)\r\n\t\t\t};\r\n\t\t\tlet response = await AppAPI.PutAsync(path, body);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while updating password\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while updating password\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t// update email\r\n\tasync updateEmailAsync(oldPassword: string, email: string, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet path = \"users/account/email\"\r\n\t\t\t\t+ \"?related-service=books\"\r\n\t\t\t\t+ \"&language=vi-VN\"\r\n\t\t\t\t+ \"&host=\" + (AppUtility.isWebApp() ? AppUtility.getHost() : AppData.Configuration.app.name);\r\n\t\t\tlet body = {\r\n\t\t\t\tTimestamp: Math.round(+new Date() / 1000),\r\n\t\t\t\tOldPassword: AppCrypto.rsaEncrypt(oldPassword),\r\n\t\t\t\tEmail: AppCrypto.rsaEncrypt(email),\r\n\t\t\t\tSession: AppCrypto.aesEncrypt(AppData.Configuration.session.id)\r\n\t\t\t};\t\t\r\n\t\t\tlet response = await AppAPI.PutAsync(path, body);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while updating email\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while updating email\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t// activate (account, password, email)\r\n\tasync activateAsync(mode: string, code: string, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tif (AppData.Configuration.app.mode == \"\") {\r\n\t\t\t\tthis.configSvc.prepare();\r\n\t\t\t}\r\n\t\t\tlet path = \"users/activate\"\r\n\t\t\t\t+ \"?mode=\" + mode\r\n\t\t\t\t+ \"&code=\" + code\r\n\t\t\t\t+ \"&related-service=books\"\r\n\t\t\t\t+ \"&language=vi-VN\"\r\n\t\t\t\t+ \"&host=\" + (AppUtility.isWebApp() ? AppUtility.getHost() : AppData.Configuration.app.name);\r\n\t\t\tlet response = await AppAPI.GetAsync(path);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tAppData.Configuration.session.account = this.configSvc.getAccount(true);\r\n\t\t\t\tawait this.configSvc.updateSessionAsync(data.Data, () => {\r\n\t\t\t\t\tAppData.Configuration.session.account.id = AppData.Configuration.session.jwt.uid;\r\n\t\t\t\t\tthis.configSvc.saveSessionAsync();\r\n\t\t\t\t\tconsole.info(\"Activated...\", AppUtility.isDebug() ? AppData.Configuration.session : \"\");\r\n\t\t\t\t});\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Authentication]: Error occurred while activating (\" + mode + \")\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Authentication]: Error occurred while activating (\" + mode + \")\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t// process RTU message\r\n\tprocessRTU(message: any) {\r\n\t\t// check status\r\n\t\tif (message.Type == \"Error\") {\r\n\t\t\tconsole.warn(\"[Authentication]: got an error message from RTU\", message);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// parse\r\n\t\tvar info = AppRTU.parse(message.Type);\r\n\r\n\t\t// update account\r\n\t\tif (info.ObjectName == \"Account\") {\r\n\t\t\tthis.configSvc.updateAccount(message.Data);\r\n\t\t}\r\n\r\n\t\t// update profile\r\n\t\telse if (info.ObjectName == \"Profile\") {\r\n\t\t\tif (AppData.Configuration.session.account != null && AppData.Configuration.session.account.id == message.Data.ID) {\r\n\t\t\t\tthis.updateProfileAsync(message.Data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tAppModels.Account.update(message.Data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// update status\r\n\t\telse if (info.ObjectName == \"Status\") {\r\n\t\t\tlet account = AppData.Accounts.getValue(message.Data.UserID);\r\n\t\t\tif (account != undefined) {\r\n\t\t\t\taccount.IsOnline = message.Data.IsOnline;\r\n\t\t\t\taccount.LastAccess = new Date();\r\n\t\t\t}\r\n\t\t\tif (AppData.Configuration.session.account != null && AppData.Configuration.session.account.id == message.Data.UserID && AppData.Configuration.session.account.profile != null) {\r\n\t\t\t\tAppData.Configuration.session.account.profile.LastAccess = new Date();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// new permissions (new access token)\r\n\t\telse if (message.Verb == \"Permissions\" && AppData.Configuration.session.account.profile != null) {\r\n\t\t\tthis.updateProfileAsync(message.Data.Profile, () => {\r\n\t\t\t\tthis.configSvc.updateSessionAsync(message.Data, () => {\r\n\t\t\t\t\tAppRTU.restart(\"Re-start when got the new access token...\", 1234);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/authentication.ts","import { Component } from \"@angular/core\";\r\nimport { NavController, NavParams, AlertController, ModalController } from \"ionic-angular\";\r\n\r\nimport { AppUtility } from \"../../../helpers/utility\";\r\nimport { AppAPI } from \"../../../helpers/api\";\r\nimport { AppEvents } from \"../../../helpers/events\";\r\nimport { AppData } from \"../../../models/data\";\r\nimport { AppModels } from \"../../../models/objects\";\r\n\r\nimport { AuthenticationService } from \"../../../providers/authentication\";\r\nimport { BooksService } from \"../../../providers/books\";\r\n\r\n@Component({\r\n\tselector: \"page-book-info\",\t\r\n\ttemplateUrl: \"info.html\"\r\n})\r\nexport class BookInfoPage {\r\n\tconstructor(\r\n\t\tpublic navCtrl: NavController,\r\n\t\tpublic navParams: NavParams,\r\n\t\tpublic alertCtrl: AlertController,\r\n\t\tpublic modalCtrl: ModalController,\r\n\t\tpublic authSvc: AuthenticationService,\r\n\t\tpublic booksSvc: BooksService\r\n\t){\r\n\t}\r\n\r\n\t// attributes\r\n\tinfo = {\r\n\t\tbook: new AppModels.Book(),\r\n\t\tview: undefined,\r\n\t\tdownload: undefined,\r\n\t\ttitle: \"Thông tin\",\r\n\t\trating: 0.0,\r\n\t\tlimit: 260,\r\n\t\turi: \"\",\r\n\t\tqrcode: \"\",\r\n\t\tprocessByApp: AppUtility.isNativeApp()\r\n\t};\r\n\r\n\t// events\r\n\tionViewDidLoad() {\r\n\t\tvar id = this.navParams.get(\"ID\") as string;\r\n\t\tvar existed = AppData.Books.containsKey(id);\r\n\t\t\t\r\n\t\tif (existed) {\r\n\t\t\tthis.prepare(true);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.booksSvc.getAsync(id, () => {\r\n\t\t\t\tthis.prepare(true);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tAppEvents.on(\r\n\t\t\t\"BookStatisticsAreUpdated\",\r\n\t\t\t(info: any) => {\r\n\t\t\t\tif (this.info.book != undefined && this.info.book.ID == info.args.ID) {\r\n\t\t\t\t\tthis.prepare();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"EventHandlerToUpdateBookStatistics\"\r\n\t\t);\r\n\r\n\t\tAppEvents.on(\r\n\t\t\t\"BookFilesAreUpdated\",\r\n\t\t\t(info: any) => {\r\n\t\t\t\tif (this.info.book != undefined && this.info.book.ID == info.args.ID) {\r\n\t\t\t\t\tthis.prepare();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"EventHandlerToUpdateBookFiles\"\r\n\t\t);\r\n\t}\r\n\r\n\tionViewWillUnload() {\r\n\t\tAppEvents.off(\"BookStatisticsAreUpdated\", \"EventHandlerToUpdateBookStatistics\");\r\n\t\tAppEvents.off(\"BookFilesAreUpdated\", \"EventHandlerToUpdateBookFiles\");\r\n\t}\r\n\r\n\tprepare(checkFiles?: boolean) {\r\n\t\tthis.info.book = AppData.Books.getValue(this.navParams.get(\"ID\") as string);\r\n\t\tthis.info.view = this.info.book.Counters.getValue(\"View\");\r\n\t\tthis.info.download = this.info.book.Counters.getValue(\"Download\");\r\n\r\n\t\tvar rating = this.info.book.RatingPoints.getValue(\"General\");\r\n\t\tthis.info.rating = rating != undefined\r\n\t\t\t? rating.Average\r\n\t\t\t: 0.0;\r\n\r\n\t\tthis.info.uri = AppUtility.getUri() + \"#?book=\" + AppUtility.getBase64UrlParam({ ID: this.info.book.ID });\r\n\t\tthis.info.qrcode = this.info.processByApp\r\n\t\t\t? \"vieapps-books://\" + this.info.book.ID\r\n\t\t\t: this.info.uri;\r\n\r\n\t\tif (AppUtility.isTrue(checkFiles) && AppUtility.isObject(this.info.book.Files, true)\r\n\t\t&& (this.info.book.Files.Epub.Size == \"generating...\" || this.info.book.Files.Mobi.Size == \"generating...\")) {\r\n\t\t\tthis.booksSvc.generateFiles(this.info.book.ID);\r\n\t\t}\r\n\t}\r\n\r\n\tdownload(type: string) {\r\n\t\tif (this.authSvc.isAuthenticated()) {\r\n\t\t\twindow.open(this.info.book.Files[type].Url + \"?\" + AppUtility.getQuery(AppAPI.getAuthHeaders()));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.showAlert(\"Chú ý\", \"Cần đăng nhập để có thể tải được file e-book\");\r\n\t\t}\r\n\t}\r\n\r\n\tshowAlert(title: string, message: string, button?: string, func?: () => void) {\r\n\t\tthis.alertCtrl.create({\r\n\t\t\ttitle: title,\r\n\t\t\tmessage: message,\r\n\t\t\tenableBackdropDismiss: true,\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: button != undefined ? button : \"Đóng\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tfunc != undefined && func();\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t}).present();\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/books/info/info.ts","import { Component } from \"@angular/core\";\r\nimport { NavController, NavParams } from \"ionic-angular\";\r\n\r\nimport { AppEvents } from \"../../../helpers/events\";\r\nimport { AppData } from \"../../../models/data\";\r\n\r\nimport { ConfigurationService } from \"../../../providers/configuration\";\r\n\r\n@Component({\r\n\tselector: \"page-book-options\",\r\n\ttemplateUrl: \"options.html\"\r\n})\r\nexport class ReadingOptionsPage {\r\n\tconstructor(\r\n\t\tpublic navCtrl: NavController,\r\n\t\tpublic navParams: NavParams,\r\n\t\tpublic configSvc: ConfigurationService\r\n\t){\r\n\t}\r\n\r\n\t// attributes\r\n\tinfo = {\r\n\t\ttitle: \"Tuỳ chọn đọc\",\r\n\t\toptions: AppData.Configuration.reading.options\r\n\t};\r\n\toptions = {\r\n\t\tcolors: [\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Trắng\",\r\n\t\t\t\tvalue: \"white\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Đen\",\r\n\t\t\t\tvalue: \"black\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Ngả vàng\",\r\n\t\t\t\tvalue: \"sepia\"\r\n\t\t\t}\r\n\t\t],\r\n\t\tfonts: [\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Mặc định\",\r\n\t\t\t\tvalue: \"default\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Gần mặc định\",\r\n\t\t\t\tvalue: \"like-default\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Tròn\",\r\n\t\t\t\tvalue: \"plump\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Béo\",\r\n\t\t\t\tvalue: \"fat\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Khác lạ\",\r\n\t\t\t\tvalue: \"fancy\"\r\n\t\t\t}\r\n\t\t],\r\n\t\tsizes: [\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Nhỏ nhất\",\r\n\t\t\t\tvalue: \"smallest\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Nhỏ hơn\",\r\n\t\t\t\tvalue: \"smaller\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Nhỏ\",\r\n\t\t\t\tvalue: \"small\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Trung bình\",\r\n\t\t\t\tvalue: \"normal\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"To\",\r\n\t\t\t\tvalue: \"big\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"To hơn\",\r\n\t\t\t\tvalue: \"bigger\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Rất là bự\",\r\n\t\t\t\tvalue: \"huge\"\r\n\t\t\t}\r\n\t\t],\r\n\t\tparagraphs: [\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Bình thường\",\r\n\t\t\t\tvalue: \"one\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Thưa\",\r\n\t\t\t\tvalue: \"two\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Rất thưa\",\r\n\t\t\t\tvalue: \"three\"\r\n\t\t\t}\r\n\t\t],\r\n\t\taligns: [\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Trái\",\r\n\t\t\t\tvalue: \"align-left\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Đều hai bên\",\r\n\t\t\t\tvalue: \"align-justify\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Phải\",\r\n\t\t\t\tvalue: \"align-right\"\r\n\t\t\t}\r\n\t\t]\r\n\t};\r\n\r\n\t// events\r\n\tionViewWillUnload() {\r\n\t\twindow.setTimeout(async () => {\r\n\t\t\tawait this.configSvc.saveOptionsAsync(() => {\r\n\t\t\t\tAppEvents.broadcast(\"ReadingOptionsAreUpdated\");\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/books/options/options.ts","import { Component, ViewChild } from \"@angular/core\";\r\nimport { NavController, NavParams, ActionSheetController, AlertController, Searchbar, InfiniteScroll } from \"ionic-angular\";\r\nimport { Keyboard } from \"@ionic-native/keyboard\";\r\nimport { List } from \"linqts\";\r\n\r\nimport { AppUtility } from \"../../../helpers/utility\";\r\nimport { AppData } from \"../../../models/data\";\r\nimport { AppModels } from \"../../../models/objects\";\r\n\r\nimport { AuthenticationService } from \"../../../providers/authentication\";\r\nimport { AccountsService } from \"../../../providers/accounts\";\r\n\r\nimport { ProfilePage } from \"../profile/profile\";\r\n\r\n@Component({\r\n\tselector: \"page-search-profiles\",\r\n\ttemplateUrl: \"search.html\"\r\n})\r\nexport class SearchProfilesPage {\r\n\tconstructor(\r\n\t\tpublic navCtrl: NavController,\r\n\t\tpublic navParams: NavParams,\r\n\t\tpublic actionSheetCtrl: ActionSheetController,\r\n\t\tpublic alertCtrl: AlertController,\r\n\t\tpublic keyboard: Keyboard,\r\n\t\tpublic authSvc: AuthenticationService,\r\n\t\tpublic accountsSvc: AccountsService\r\n\t){\r\n\t}\r\n\r\n\t// attributes\r\n\tinfo = {\r\n\t\tfilterBy: {\r\n\t\t\tQuery: \"\",\r\n\t\t\tAnd: {\r\n\t\t\t\tProvince: {\r\n\t\t\t\t\tEquals: \"\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\torderBy: \"Name\",\r\n\t\tpagination: AppData.Paginations.default(),\r\n\t\tstate: {\r\n\t\t\tsearching: false,\r\n\t\t\tfiltering: false,\r\n\t\t\tcancel: \"Đóng\",\r\n\t\t\tholder: \"Search\"\r\n\t\t},\r\n\t\ttitle: \"Tài khoản người dùng\",\r\n\t\ttotalRecords: 0,\r\n\t\tpageNumber: 0,\r\n\t\tisAppleOS: AppUtility.isAppleOS()\r\n\t};\r\n\torders = [\r\n\t\t{\r\n\t\t\tlabel: \"Tên (A - Z)\",\r\n\t\t\tvalue: \"Name\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Mới truy cập\",\r\n\t\t\tvalue: \"LastAccess\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Mới đăng ký\",\r\n\t\t\tvalue: \"Registered\"\r\n\t\t}\r\n\t];\r\n\taccounts: Array<AppModels.Account> = undefined;\r\n\tratings = {};\r\n\r\n\t// controls\r\n\t@ViewChild(Searchbar) searchBarCtrl: Searchbar;\r\n\tinfiniteScrollCtrl: InfiniteScroll = undefined;\r\n\r\n\t// page events\r\n\tionViewCanEnter() {\r\n\t\treturn this.authSvc.isAdministrator();\r\n\t}\r\n\r\n\tionViewDidEnter() {\r\n\t\tif (this.accounts == undefined) {\r\n\t\t\tthis.info.filterBy = {\r\n\t\t\t\tQuery: this.navParams.get(\"Query\"),\r\n\t\t\t\tAnd: {\r\n\t\t\t\t\tProvince: {\r\n\t\t\t\t\t\tEquals: this.navParams.get(\"Province\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.info.pagination = AppData.Paginations.get(AppData.buildRequest(this.info.filterBy, null, this.info.pagination), \"A\");\r\n\t\t\tif (this.info.pagination == undefined) {\r\n\t\t\t\tthis.doSearch();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (this.info.pageNumber < 1) {\r\n\t\t\t\t\tthis.info.pageNumber = 1;\r\n\t\t\t\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\t\t\t}\r\n\t\t\t\tthis.doBuild();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// search & build the listing of account profiles\r\n\tdoSearch(onCompleted?: () => void) {\r\n\t\tvar request = AppData.buildRequest(this.info.filterBy, undefined, AppUtility.isNotEmpty(this.info.filterBy.Query) ? undefined : this.info.pagination);\r\n\t\tthis.accountsSvc.search(request,\r\n\t\t\t(data?: any) => {\r\n\t\t\t\tthis.info.pagination = this.info.state.searching && data != undefined\r\n\t\t\t\t\t? AppData.Paginations.default(data.Data)\r\n\t\t\t\t\t: AppData.Paginations.get(request, \"A\");\r\n\r\n\t\t\t\tif (!this.info.state.searching && !this.info.state.filtering) {\r\n\t\t\t\t\tthis.info.pageNumber = this.info.pagination.PageNumber;\r\n\t\t\t\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.doBuild(this.info.state.searching && data != undefined ? data.Data.Objects : undefined);\r\n\t\t\t\tonCompleted != undefined && onCompleted();\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tdoBuild(searchResults?: Array<AppModels.Account>) {\r\n\t\t// initialize the list\r\n\t\tvar accounts = new List(\r\n\t\t\tsearchResults != undefined\r\n\t\t\t\t? searchResults\r\n\t\t\t\t: AppData.Accounts.values()\r\n\t\t\t);\r\n\r\n\t\t// apply filter-by\r\n\t\tif (this.info.state.filtering && AppUtility.isNotEmpty(this.info.filterBy.Query)) {\r\n\t\t\tlet query = AppUtility.toANSI(this.info.filterBy.Query).trim().toLowerCase();\r\n\t\t\taccounts = accounts.Where(a => AppUtility.indexOf(a.Title, query) > -1);\r\n\t\t}\r\n\r\n\t\t// transform\r\n\t\tif (searchResults != undefined) {\r\n\t\t\taccounts = accounts.Select(a => AppModels.Account.deserialize(a));\r\n\t\t}\r\n\r\n\t\t// apply order-by\r\n\t\tswitch (this.info.orderBy) {\r\n\t\t\tcase \"LastAccess\":\r\n\t\t\t\taccounts = accounts.OrderByDescending(a => a.LastAccess).ThenBy(a => a.Name);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Joined\":\r\n\t\t\t\taccounts = accounts.OrderByDescending(a => a.Joined).ThenBy(a => a.Name);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\taccounts = accounts.OrderBy(a => a.Name).ThenByDescending(a => a.LastAccess);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// paging\r\n\t\tif (!this.info.state.searching && !this.info.state.filtering && this.info.pageNumber > 0) {\r\n\t\t\taccounts = accounts.Take(this.info.pageNumber * (this.info.pagination != undefined ? this.info.pagination.PageSize : 20));\r\n\t\t}\r\n\r\n\t\t// convert the list of results to array\r\n\t\tthis.accounts = accounts.ToArray();\r\n\r\n\t\t// prepare ratings\r\n\t\tnew List(this.accounts).ForEach((a) => {\r\n\t\t\tif (!this.ratings[a.ID]) {\r\n\t\t\t\tlet rating = a.RatingPoints.getValue(\"General\");\r\n\t\t\t\tthis.ratings[a.ID] = rating != undefined ? rating.Average : 0;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\ttrackBy(index: number, account: AppModels.Account) {\r\n\t\treturn account.ID;\r\n\t}\r\n\r\n\t// event handlers\r\n\tonInfiniteScroll(infiniteScroll: any) {\r\n\t\t// capture\r\n\t\tif (this.infiniteScrollCtrl == undefined) {\r\n\t\t\tthis.infiniteScrollCtrl = infiniteScroll;\r\n\t\t}\r\n\r\n\t\t// searching\r\n\t\tif (this.info.state.searching && AppUtility.isNotEmpty(this.info.filterBy.Query)) {\r\n\t\t\tif (this.info.pagination.PageNumber < this.info.pagination.TotalPages) {\r\n\t\t\t\tthis.doSearch(() => {\r\n\t\t\t\t\tthis.infiniteScrollCtrl.complete();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.infiniteScrollCtrl.complete();\r\n\t\t\t\tthis.infiniteScrollCtrl.enable(false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// filtering\r\n\t\telse if (this.info.state.filtering) {\r\n\t\t\tthis.infiniteScrollCtrl.complete();\r\n\t\t\tthis.infiniteScrollCtrl.enable(false);\r\n\t\t}\r\n\r\n\t\t// surfing\r\n\t\telse {\r\n\t\t\tif (this.info.pageNumber < this.info.pagination.PageNumber) {\r\n\t\t\t\tthis.info.pageNumber++;\r\n\t\t\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\t\t\tthis.doBuild();\r\n\t\t\t\tthis.infiniteScrollCtrl.complete();\r\n\t\t\t}\r\n\t\t\telse if (this.info.pagination.PageNumber < this.info.pagination.TotalPages) {\r\n\t\t\t\tthis.doSearch(() => {\r\n\t\t\t\t\tthis.infiniteScrollCtrl.complete();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.infiniteScrollCtrl.complete();\r\n\t\t\t\tthis.infiniteScrollCtrl.enable(false);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSearch() {\r\n\t\tif (this.info.state.searching) {\r\n\t\t\tthis.accounts = [];\r\n\t\t\tif (AppUtility.isNotEmpty(this.info.filterBy.Query)) {\r\n\t\t\t\tthis.doSearch();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.doBuild();\r\n\t\t}\r\n\t}\r\n\r\n\tonCancel() {\r\n\t\tthis.info.state.searching = false;\r\n\t\tthis.info.state.filtering = false;\r\n\t\tthis.info.filterBy.Query = \"\";\r\n\r\n\t\tthis.info.pagination = AppData.Paginations.get(AppData.buildRequest(this.info.filterBy, null, this.info.pagination), \"A\");\r\n\t\tthis.doBuild();\r\n\r\n\t\tif (this.infiniteScrollCtrl != undefined) {\r\n\t\t\tthis.infiniteScrollCtrl.enable(true);\r\n\t\t}\r\n\t}\r\n\r\n\t// helpers\r\n\tgetAvatar(account: AppModels.Account) {\r\n\t\treturn AppUtility.getAvatarImage(account);\r\n\t}\r\n\r\n\topenProfile(account: AppModels.Account) {\r\n\t\tthis.navCtrl.push(ProfilePage, { ID: account.ID });\r\n\t}\r\n\r\n\tshowSearch() {\r\n\t\tthis.accounts = [];\r\n\t\tthis.info.pagination = null;\r\n\t\tthis.info.state.searching = true;\r\n\t\tthis.info.state.holder = \"Tìm kiếm (không dấu cũng OK)\";\r\n\t\tAppUtility.focus(this.searchBarCtrl, this.keyboard);\r\n\t}\r\n\r\n\tshowActions() {\r\n\t\tvar actionSheet = this.actionSheetCtrl.create({\r\n\t\t\tenableBackdropDismiss: true,\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Tìm kiếm\",\r\n\t\t\t\t\ticon: this.info.isAppleOS ? undefined : \"search\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.showSearch();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Lọc/Tìm nhanh\",\r\n\t\t\t\t\ticon: this.info.isAppleOS ? undefined : \"funnel\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.info.state.filtering = true;\r\n\t\t\t\t\t\tthis.info.state.holder = \"Tìm nhanh (không dấu cũng OK)\";\r\n\t\t\t\t\t\tAppUtility.focus(this.searchBarCtrl, this.keyboard);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Thay đổi cách sắp xếp\",\r\n\t\t\t\t\ticon: this.info.isAppleOS ? undefined : \"list-box\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.showOrders();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\r\n\t\tif (this.info.pagination != null && this.info.pageNumber < this.info.pagination.PageNumber) {\r\n\t\t\tactionSheet.addButton({\r\n\t\t\t\ttext: \"Hiển thị toàn bộ \" + AppData.Paginations.computeTotal(this.info.pagination.PageNumber, this.info.pagination) + \" kết quả\",\r\n\t\t\t\ticon: this.info.isAppleOS ? undefined : \"eye\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.info.pageNumber = this.info.pagination.PageNumber;\r\n\t\t\t\t\tthis.info.totalRecords = AppData.Paginations.computeTotal(this.info.pageNumber, this.info.pagination);\r\n\t\t\t\t\tthis.doBuild();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tactionSheet.addButton({\r\n\t\t\ttext: \"Huỷ bỏ\",\r\n\t\t\ticon: this.info.isAppleOS ? undefined : \"close\",\r\n\t\t\trole: \"cancel\"\r\n\t\t});\r\n\t\t\r\n\t\tactionSheet.present();\r\n\t}\r\n\r\n\tshowOrders() {\r\n\t\tvar alert = this.alertCtrl.create({\r\n\t\t\ttitle: \"Sắp xếp theo\",\r\n\t\t\tenableBackdropDismiss: true,\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Huỷ\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Đặt\",\r\n\t\t\t\t\thandler: (orderBy: string) => {\r\n\t\t\t\t\t\tif (this.info.orderBy != orderBy) {\r\n\t\t\t\t\t\t\tthis.info.orderBy = orderBy;\r\n\t\t\t\t\t\t\tthis.doBuild();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\r\n\t\tnew List<any>(this.orders).ForEach((o) => {\r\n\t\t\talert.addInput({\r\n\t\t\t\ttype: \"radio\",\r\n\t\t\t\tlabel: o.label,\r\n\t\t\t\tvalue: o.value,\r\n\t\t\t\tchecked: this.info.orderBy == o.value\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\talert.present();\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/accounts/search/search.ts","import { Injectable } from \"@angular/core\";\r\nimport { Http } from \"@angular/http\";\r\nimport { List } from \"linqts\";\r\nimport \"rxjs/add/operator/map\";\r\n\r\nimport { AppUtility } from \"../helpers/utility\";\r\nimport { AppAPI } from \"../helpers/api\";\r\nimport { AppData } from \"../models/data\";\r\nimport { AppModels } from \"../models/objects\";\r\n\r\n@Injectable()\r\nexport class AccountsService {\r\n\r\n\tconstructor(public http: Http) {\r\n\t\tAppAPI.setHttp(this.http);\r\n\t}\r\n\r\n\t/** Checks to see the user is online or not */\r\n\tisOnline(id?: string) {\r\n\t\tvar account = AppUtility.isNotEmpty(id)\r\n\t\t\t? AppData.Accounts.getValue(id)\r\n\t\t\t: undefined;\r\n\t\treturn account != undefined && account.IsOnline;\r\n\t}\r\n\r\n\t/** Performs a request to REST API to search account profiles */\r\n\tsearch(request: any, onNext?: (d?: any) => void, onError?: (e: any) => void) {\r\n\t\tvar pagination = AppData.Paginations.get(request, \"A\");\r\n\t\tif (pagination != null && pagination.PageNumber >= pagination.TotalPages) {\r\n\t\t\tonNext != undefined && onNext();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\trequest.Pagination.PageNumber++;\r\n\t\tlet path = \"users/profile/search\"\r\n\t\t\t+ \"?x-request=\" + AppUtility.getBase64UrlParam(request)\r\n\t\t\t+ \"&related-service=books\"\r\n\t\t\t+ \"&language=vi-VN\";\r\n\t\tlet searcher = AppAPI.Get(path);\r\n\t\t\r\n\t\tif (onNext == undefined) {\r\n\t\t\treturn searcher;\r\n\t\t}\r\n\r\n\t\tsearcher.map(response => response.json()).subscribe(\r\n\t\t\t(data: any) => {\r\n\t\t\t\tif (!AppUtility.isObject(data, true)) {\r\n\t\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t\t}\r\n\t\t\t\telse if (data.Status == \"OK\") {\r\n\t\t\t\t\tAppData.Paginations.set(data.Data, \"A\");\r\n\t\t\t\t\tnew List<any>(data.Data.Objects).ForEach(a => AppModels.Account.update(a));\r\n\t\t\t\t\tonNext(data);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.error(\"[Accounts]: Error occurred while searching accounts\");\r\n\t\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t(error: any) => {\r\n\t\t\t\tconsole.error(\"[Accounts]: Error occurred while searching accounts\", error);\r\n\t\t\t\tonError != undefined && onError(error);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tasync fetchAsync(accountIDs: Array<string>, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\tvar ids = new List(accountIDs).Except(new List(AppData.Accounts.keys())).ToArray();\r\n\t\tif (ids.length < 1) {\r\n\t\t\tonNext != undefined && onNext();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tlet path = \"users/profile/fetch\"\r\n\t\t\t\t+ \"?x-request=\" + AppUtility.getBase64UrlParam({ IDs: ids })\r\n\t\t\t\t+ \"&related-service=books\"\r\n\t\t\t\t+ \"&language=vi-VN\";\r\n\t\t\tlet response = await AppAPI.GetAsync(path);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tnew List<any>(data.Data.Objects).ForEach(a => AppModels.Account.update(a));\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Accounts]: Error occurred while searching accounts\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Accounts]: Error occurred while searching accounts\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/accounts.ts","import { platformBrowserDynamic } from \"@angular/platform-browser-dynamic\";\nimport { AppModule } from \"./app.module\";\nimport { enableProdMode } from \"@angular/core\";\n\nenableProdMode();\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from \"@angular/platform-browser\";\r\nimport { ErrorHandler, NgModule } from \"@angular/core\";\r\nimport { HttpModule } from \"@angular/http\";\r\nimport { FormsModule } from \"@angular/forms\";\r\n\r\nimport { IonicApp, IonicErrorHandler, IonicModule } from \"ionic-angular\";\r\nimport { CloudSettings, CloudModule } from \"@ionic/cloud-angular\";\r\nimport { Device } from \"@ionic-native/device\";\r\nimport { StatusBar } from \"@ionic-native/status-bar\";\r\nimport { SplashScreen } from \"@ionic-native/splash-screen\";\r\nimport { Keyboard } from \"@ionic-native/keyboard\";\r\nimport { IonicStorageModule } from \"@ionic/storage\";\r\n\r\nimport { Ng2CompleterModule } from \"ng2-completer\";\r\nimport { RatingModule } from \"ngx-rating\";\r\nimport { QRCodeModule } from \"angular2-qrcode\";\r\n\r\nimport { App } from \"./app.component\";\r\n\r\nimport { ConfigurationService } from \"../providers/configuration\";\r\nimport { AuthenticationService } from \"../providers/authentication\";\r\nimport { AccountsService } from \"../providers/accounts\";\r\nimport { BooksService } from \"../providers/books\";\r\nimport { StatisticsService } from \"../providers/statistics\";\r\nimport { ResourcesService } from \"../providers/resources\";\r\n\r\nimport { HomePage } from \"../pages/home/home\";\r\nimport { SearchPage } from \"../pages/search/search\";\r\nimport { SignInPage } from \"../pages/accounts/signin/signin\";\r\nimport { ProfilePage } from \"../pages/accounts/profile/profile\";\r\nimport { SearchProfilesPage } from \"../pages/accounts/search/search\";\r\nimport { SurfBooksPage } from \"../pages/books/surf/surf\";\r\nimport { ReadBookPage } from \"../pages/books/read/read\";\r\nimport { BookInfoPage } from \"../pages/books/info/info\";\r\nimport { ReadingOptionsPage } from \"../pages/books/options/options\";\r\n\r\nconst cloudSettings: CloudSettings = {\r\n\t\"core\": {\r\n\t\t\"app_id\": \"\"\r\n\t}\r\n};\r\n\r\n@NgModule({\r\n\tdeclarations: [\r\n\t\tApp,\r\n\t\tHomePage,\r\n\t\tSearchPage,\r\n\t\tSignInPage,\r\n\t\tProfilePage,\r\n\t\tSearchProfilesPage,\r\n\t\tSurfBooksPage,\r\n\t\tReadBookPage,\r\n\t\tBookInfoPage,\r\n\t\tReadingOptionsPage,\r\n\t],\r\n\timports: [\r\n\t\tBrowserModule,\r\n\t\tHttpModule,\r\n\t\tFormsModule,\r\n\t\tIonicModule.forRoot(App),\r\n\t\tIonicStorageModule.forRoot({ name: \"vieappsDB\" }),\r\n\t\tCloudModule.forRoot(cloudSettings),\r\n\t\tNg2CompleterModule,\r\n\t\tRatingModule,\r\n\t\tQRCodeModule,\r\n\t],\r\n\tbootstrap: [IonicApp],\r\n\tentryComponents: [\r\n\t\tApp,\r\n\t\tHomePage,\r\n\t\tSearchPage,\r\n\t\tSignInPage,\r\n\t\tProfilePage,\r\n\t\tSearchProfilesPage,\r\n\t\tSurfBooksPage,\r\n\t\tReadBookPage,\r\n\t\tBookInfoPage,\r\n\t\tReadingOptionsPage,\r\n\t],\r\n\tproviders: [\r\n\t\tConfigurationService,\r\n\t\tAuthenticationService,\r\n\t\tResourcesService,\r\n\t\tStatisticsService,\r\n\t\tAccountsService,\r\n\t\tBooksService,\r\n\t\tStatusBar,\r\n\t\tSplashScreen,\r\n\t\tDevice,\r\n\t\tKeyboard,\r\n\t\tNg2CompleterModule,\r\n\t\tRatingModule,\r\n\t\t{ provide: ErrorHandler, useClass: IonicErrorHandler }\r\n\t]\r\n})\r\nexport class AppModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import CryptoJS from \"crypto-js\";\r\ndeclare var RSA: any;\r\n\r\nexport namespace AppCrypto {\r\n\tvar rsa = undefined;\r\n\tvar aes = { key: undefined, iv: undefined };\r\n\r\n\t/** Gets the base64url-encoded string from the base64 string */\r\n\texport function getBase64Url(text: string) {\r\n\t\treturn text.replace(/=+$/, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\r\n\t}\r\n\r\n\t/** Gets the base64 string from the base64url-encoded string */\r\n\texport function getBase64Str(text: string) {\r\n\t\tvar result = text.replace(/\\-/g, \"+\").replace(/\\_/g, \"/\");\r\n\t\tswitch (result.length % 4) {\r\n\t\t\tcase 0:\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tresult += \"==\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tresult += \"=\";\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow \"Illegal base64url string!\";\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/** Hashs the string to MD5 */\r\n\texport function md5(text: string) {\r\n\t\treturn CryptoJS.MD5(text).toString() as string;\r\n\t}\r\n\r\n\t/** Signs the string with the specified key using HMAC SHA256 */\r\n\texport function hmacSign(text: string, key: string) {\r\n\t\treturn CryptoJS.enc.Base64.stringify(CryptoJS.HmacSHA256(text, key)) as string;\r\n\t}\r\n\r\n\t/** Signs the string with the specified key using HMAC SHA256 and encode as Base64Url string */\r\n\texport function urlSign(text: string, key: string) {\r\n\t\treturn getBase64Url(hmacSign(text, key));\r\n\t}\r\n\r\n\t/** Encodes the string by Base64Url */\r\n\texport function urlEncode(text: string) {\r\n\t\treturn getBase64Url(CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(text)));\r\n\t}\r\n\r\n\t/** Decodes the string by Base64Url */\r\n\texport function urlDecode(text: string) {\r\n\t\treturn CryptoJS.enc.Utf8.stringify(CryptoJS.enc.Base64.parse(getBase64Str(text))) as string;\r\n\t}\r\n\r\n\t/** Encodes the JSON Web Token */\r\n\texport function jwtEncode(jwt: any, key: string) {\r\n\t\tjwt.iat = Math.round(+new Date() / 1000);\r\n\t\tlet encoded = urlEncode(JSON.stringify({ typ: \"JWT\", alg: \"HS256\" })) + \".\" + urlEncode(JSON.stringify(jwt));\r\n\t\treturn encoded + \".\" + urlSign(encoded, key);\r\n\t}\r\n\r\n\t/** Decodes the JSON Web Token */\r\n\texport function jwtDecode(jwt: string, key: string) {\r\n\t\tlet elements = jwt.split(\".\");\r\n\t\treturn urlSign(elements[0] + \".\" + elements[1], key) == elements[2]\r\n\t\t\t? JSON.parse(urlDecode(elements[1]))\r\n\t\t\t: null;\r\n\t}\r\n\r\n\texport function rsaInit(exponent: string, modulus: string) {\r\n\t\trsa = rsa || new RSA();\r\n\t\trsa.init(exponent, modulus);\r\n\t}\r\n\r\n\t/** Encrypts the string by RSA */\r\n\texport function rsaEncrypt(text: string) {\r\n\t\treturn rsa.encrypt(text) as string;\r\n\t}\r\n\r\n\texport function aesInit(key: string, iv: string) {\r\n\t\taes.key = CryptoJS.enc.Hex.parse(key);\r\n\t\taes.iv = CryptoJS.enc.Hex.parse(iv);\r\n\t}\r\n\r\n\t/** Encrypts the string by AES */\r\n\texport function aesEncrypt(text: string, key?: any, iv?: any) {\r\n\t\treturn CryptoJS.AES.encrypt(text, key || aes.key, { iv: iv || aes.iv }).ciphertext.toString(CryptoJS.enc.Base64) as string;\r\n\t}\r\n\r\n\t/** Decrypts the string by AES */\r\n\texport function aesDecrypt(text: string, key?: any, iv?: any) {\r\n\t\treturn CryptoJS.AES.decrypt(text, key || aes.key, { iv: iv || aes.iv }).toString(CryptoJS.enc.Utf8) as string;\r\n\t}\r\n\r\n\texport function initKeys(keys: any) {\r\n\t\tif (keys.aes != undefined && keys.aes != null) {\r\n\t\t\taesInit(keys.aes.key, keys.aes.iv);\r\n\t\t}\r\n\t\tif (keys.rsa != undefined && keys.rsa != null) {\r\n\t\t\trsaInit(keys.rsa.exponent, keys.rsa.modulus);\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/crypto.ts","import { Injectable } from \"@angular/core\";\r\nimport { Http } from \"@angular/http\";\r\nimport { List } from \"linqts\";\r\nimport \"rxjs/add/operator/map\";\r\n\r\nimport { AppUtility } from \"../helpers/utility\";\r\nimport { AppAPI } from \"../helpers/api\";\r\nimport { AppCrypto } from \"../helpers/crypto\";\r\nimport { AppEvents } from \"../helpers/events\";\r\nimport { AppRTU } from \"../helpers/rtu\";\r\nimport { AppData } from \"../models/data\";\r\nimport { AppModels } from \"../models/objects\";\r\n\r\nimport { ConfigurationService } from \"./configuration\";\r\nimport { StatisticsService } from \"./statistics\";\r\n\r\n@Injectable()\r\nexport class BooksService {\r\n\r\n\tconstructor(public http: Http, public configSvc: ConfigurationService, public statisticsSvc: StatisticsService) {\r\n\t\tAppAPI.setHttp(this.http);\r\n\t\tAppRTU.register(\"Books\", (message: any) => this.processRTU(message));\r\n\t}\r\n\r\n\tsearch(request: any, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\trequest.Pagination.PageNumber++;\r\n\t\tlet path = \"books/book/search\"\r\n\t\t\t+ \"?x-request=\" + AppUtility.getBase64UrlParam(request);\r\n\t\tvar searcher = AppAPI.Get(path);\r\n\r\n\t\tif (onNext == undefined) {\r\n\t\t\treturn searcher;\r\n\t\t}\r\n\r\n\t\tsearcher.map(response => response.json()).subscribe(\r\n\t\t\t(data: any) => {\r\n\t\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\t\tnew List<any>(data.Data.Objects).ForEach(b => AppModels.Book.update(b));\r\n\t\t\t\t\t!AppUtility.isNotEmpty(request.FilterBy.Query) && AppData.Paginations.set(data.Data, \"B\");\r\n\t\t\t\t\tonNext(data);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.error(\"[Books]: Error occurred while searching books\");\r\n\t\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t(error: any) => {\r\n\t\t\t\tconsole.error(\"[Books]: Error occurred while searching books\", error);\r\n\t\t\t\tonError != undefined && onError(error);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tasync fetchAsync(request: any, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\tvar pagination = AppData.Paginations.get(request, \"B\");\r\n\t\tif (AppUtility.isObject(pagination, true) && pagination.TotalPages && pagination.PageNumber && pagination.PageNumber >= pagination.TotalPages) {\r\n\t\t\tonNext != undefined && onNext();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\trequest.Pagination.PageNumber++;\r\n\t\t\tlet path = \"books/book/search\"\r\n\t\t\t\t+ \"?x-request=\" + AppUtility.getBase64UrlParam(request);\r\n\t\t\tlet response = await AppAPI.GetAsync(path);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tnew List<any>(data.Data.Objects).ForEach(b => AppModels.Book.update(b));\r\n\t\t\t\tAppData.Paginations.set(data.Data, \"B\");\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Books]: Error occurred while fetching books\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Books]: Error occurred while fetching books\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\tasync getAsync(id: string, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\tvar book = AppData.Books.getValue(id);\r\n\t\tif (book != undefined && (book.TOCs.length > 0 || book.Body != \"\")) {\r\n\t\t\tthis.updateCounters(id);\r\n\t\t\tonNext != undefined && onNext();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tlet response = await AppAPI.GetAsync(\"books/book/\" + id);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tAppModels.Book.update(data.Data);\r\n\t\t\t\tthis.updateCounters(id);\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Books]: Error occurred while getting a book\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Books]: Error occurred while getting a book\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\tasync getChapterAsync(id: string, chapter: number, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\tvar book = AppData.Books.getValue(id);\r\n\t\tif (book == undefined || book.TOCs.length < 1) {\r\n\t\t\tonError != undefined && onError();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if (chapter < 1 || chapter > book.Chapters.length || book.Chapters[chapter - 1] != \"\") {\r\n\t\t\tonNext != undefined && onNext();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tlet path = \"books/book/\" + id\r\n\t\t\t\t+ \"?chapter=\" + chapter;\r\n\t\t\tlet response = await AppAPI.GetAsync(path);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tbook.Chapters[chapter - 1] = data.Data.Content;\r\n\t\t\t\tthis.updateCounters(id);\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Books]: Error occurred while fetching chapter of a book\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Books]: Error occurred while fetching a chapter of a book\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\tasync fetchChapterAsync(id: string, chapter: number, onCompleted?: () => void) {\r\n\t\tvar book = AppData.Books.getValue(id);\r\n\t\twhile (chapter < book.TotalChapters && book.Chapters[chapter - 1] != \"\")\r\n\t\t\tchapter += 1;\r\n\r\n\t\tif (book.Chapters[chapter - 1] == \"\") {\r\n\t\t\tif (AppRTU.isReady()) {\r\n\t\t\t\tAppRTU.call(\"books\", \"book\", \"GET\", {\r\n\t\t\t\t\t\"object-identity\": \"chapter\",\r\n\t\t\t\t\t\"id\": id,\r\n\t\t\t\t\t\"chapter\": chapter\r\n\t\t\t\t}, undefined, undefined, undefined, () => {\r\n\t\t\t\t\tAppUtility.setTimeout(() => {\r\n\t\t\t\t\t\tthis.updateCounters(id, \"View\", onCompleted);\r\n\t\t\t\t\t}, 123);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tawait this.getChapterAsync(id, chapter, onCompleted);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (chapter <= book.TotalChapters) {\r\n\t\t\tthis.updateCounters(id, \"View\", onCompleted);\r\n\t\t}\r\n\t}\r\n\r\n\tupdateCounters(id: string, action?: string, onCompleted?: () => void) {\r\n\t\tAppData.Books.getValue(id) != undefined\r\n\t\t&& AppRTU.isReady()\r\n\t\t&& AppRTU.call(\"books\", \"book\", \"GET\", {\r\n\t\t\t\"object-identity\": \"counters\",\r\n\t\t\t\"id\": id,\r\n\t\t\t\"action\": action || \"View\"\r\n\t\t});\r\n\t\tonCompleted != undefined && onCompleted();\r\n\t}\r\n\r\n\tsetCounters(info: any, onCompleted?: () => void) {\r\n\t\tvar book = AppUtility.isObject(info, true)\r\n\t\t\t? AppData.Books.getValue(info.ID)\r\n\t\t\t: undefined;\r\n\r\n\t\tif (book != undefined && AppUtility.isArray(info.Counters)) {\r\n\t\t\tnew List<any>(info.Counters).ForEach(c => book.Counters.setValue(c.Type, AppModels.CounterInfo.deserialize(c)));\r\n\t\t\tAppEvents.broadcast(\"BookStatisticsAreUpdated\", { ID: book.ID });\r\n\t\t}\r\n\r\n\t\tonCompleted != undefined && onCompleted();\r\n\t}\r\n\r\n\tgenerateFiles(id: string, onCompleted?: () => void) {\r\n\t\tAppData.Books.getValue(id) != undefined\r\n\t\t&& AppRTU.send({\r\n\t\t\tServiceName: \"books\",\r\n\t\t\tObjectName: \"book\",\r\n\t\t\tVerb: \"GET\",\r\n\t\t\tQuery: {\r\n\t\t\t\t\"object-identity\": \"files\",\r\n\t\t\t\t\"id\": id\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tupdateFiles(data: any) {\r\n\t\tvar book = data.ID != undefined\r\n\t\t\t? AppData.Books.getValue(data.ID)\r\n\t\t\t: undefined;\r\n\t\tif (book != undefined && AppUtility.isObject(data.Files, true)) {\r\n\t\t\tbook.Files = data.Files;\r\n\t\t\tAppEvents.broadcast(\"BookFilesAreUpdated\", { ID: book.ID });\r\n\t\t}\r\n\t}\r\n\r\n\tasync requestUpdateAsync(info: any, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet response = await AppAPI.PostAsync(\"books/book/\" + AppCrypto.urlEncode(info.ID) + \"/\" + AppUtility.getBase64UrlParam({ ID: info.ID }), info);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Books]: Error occurred while sending request to update an e-book\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Books]: Error occurred while sending request to update an e-book\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\tasync updateAsync(info: any, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet response = await AppAPI.PutAsync(\"ebooks/\" + AppCrypto.urlEncode(info.ID) + \"/\" + AppUtility.getBase64UrlParam({ ID: info.ID }), info);\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Books]: Error occurred while updating an e-book\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Books]: Error occurred while updating an e-book\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\tasync deleteAsync(info, onNext?: (data?: any) => void, onError?: (error?: any) => void) {\r\n\t\ttry {\r\n\t\t\tlet response = await AppAPI.DeleteAsync(\"ebooks/\" + AppCrypto.urlEncode(info.BookID) + \"/\" + AppUtility.getBase64UrlParam({ ID: info.BookID }));\r\n\t\t\tlet data = response.json();\r\n\t\t\tif (data.Status == \"OK\") {\r\n\t\t\t\tAppData.Books.remove(info.BookID);\r\n\t\t\t\tonNext != undefined && onNext(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(\"[Books]: Error occurred while deleting an e-book\");\r\n\t\t\t\tAppUtility.isObject(data.Error, true) && console.log(\"[\" + data.Error.Type + \"]: \" + data.Error.Message);\r\n\t\t\t\tonError != undefined && onError(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(\"[Books]: Error occurred while deleting an e-book\", e);\r\n\t\t\tonError != undefined && onError(e);\r\n\t\t}\r\n\t}\r\n\r\n\tprocessRTU(message: any) {\r\n\t\t// stop on error message\r\n\t\tif (message.Type == \"Error\") {\r\n\t\t\tconsole.warn(\"[Books]: got an error message from RTU\", message);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// parse\r\n\t\tvar info = AppRTU.parse(message.Type);\r\n\r\n\t\t// meta of a book\r\n\t\tif (info.ObjectName == \"Book\") {\r\n\t\t\tAppModels.Book.update(message.Data);\r\n\t\t}\r\n\r\n\t\t// counters\r\n\t\telse if (info.ObjectName == \"Book#Counters\") {\r\n\t\t\tthis.setCounters(message.Data);\r\n\t\t}\r\n\r\n\t\t// chapter\r\n\t\telse if (info.ObjectName == \"Book#Chapter\") {\r\n\t\t\tlet book = AppData.Books.getValue(message.Data.ID);\r\n\t\t\tif (book != undefined) {\r\n\t\t\t\tbook.Chapters[message.Data.Chapter - 1] = message.Data.Content;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// files\r\n\t\telse if (info.ObjectName == \"Book#Files\") {\r\n\t\t\tthis.updateFiles(message.Data);\r\n\t\t}\r\n\r\n\t\t// delete\r\n\t\telse if (info.ObjectName == \"Book#Delete\") {\r\n\t\t\tAppData.Books.remove(message.Data.ID);\r\n\t\t\tAppEvents.broadcast(\"BooksAreUpdated\");\r\n\t\t}\r\n\t\t\r\n\t\t// statistics\r\n\t\telse if (AppUtility.indexOf(info.ObjectName, \"Statistic#\") > -1) {\r\n\t\t\tthis.statisticsSvc.processRTU(message);\r\n\t\t}\r\n\t\t\r\n\t\t// bookmarks\r\n\t\telse if (info.ObjectName == \"Bookmarks\") {\r\n\t\t\tthis.configSvc.processRTU(message);\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/books.ts","import { Component, ViewChild } from \"@angular/core\";\r\nimport { NavController, NavParams, ActionSheetController, Content, Loading, LoadingController, Platform, MenuController } from \"ionic-angular\";\r\nimport { Keyboard } from \"@ionic-native/keyboard\";\r\nimport { List } from \"linqts\"; \r\n\r\nimport { AppUtility } from \"../../../helpers/utility\";\r\nimport { AppEvents } from \"../../../helpers/events\";\r\nimport { AppData } from \"../../../models/data\";\r\nimport { AppModels } from \"../../../models/objects\";\r\n\r\nimport { ConfigurationService } from \"../../../providers/configuration\";\r\nimport { AuthenticationService } from \"../../../providers/authentication\";\r\nimport { BooksService } from \"../../../providers/books\";\r\n\r\nimport { SurfBooksPage } from \"../surf/surf\";\r\nimport { BookInfoPage } from \"../info/info\";\r\nimport { ReadingOptionsPage } from \"../options/options\";\r\n\r\n@Component({\r\n\tselector: \"page-read-book\",\r\n\ttemplateUrl: \"read.html\"\r\n})\r\nexport class ReadBookPage {\r\n\tconstructor(\r\n\t\tpublic navCtrl: NavController,\r\n\t\tpublic navParams: NavParams,\r\n\t\tpublic menuCtrl: MenuController,\r\n\t\tpublic actionSheetCtrl: ActionSheetController,\r\n\t\tpublic keyboard: Keyboard,\r\n\t\tpublic platform: Platform,\r\n\t\tpublic loadingCtrl: LoadingController,\r\n\t\tpublic configSvc: ConfigurationService,\r\n\t\tpublic authSvc: AuthenticationService,\r\n\t\tpublic booksSvc: BooksService\r\n\t){\r\n\t}\r\n\r\n\t// attributes\r\n\tinfo = {\r\n\t\tbook: new AppModels.Book(),\r\n\t\ttitle: \"Loading...\",\r\n\t\trating: 0.0,\r\n\t\tchapter: 0,\r\n\t\toffset: 0,\r\n\t\tisAppleOS: AppUtility.isAppleOS()\r\n\t};\r\n\toptions = {\r\n\t\tcolor: AppData.Configuration.reading.options.color,\r\n\t\tstyle: AppData.Configuration.reading.options.font + \" \" + AppData.Configuration.reading.options.size + \" \" + AppData.Configuration.reading.options.paragraph + \" \" + AppData.Configuration.reading.options.align\r\n\t};\r\n\tloading: Loading = undefined;\r\n\r\n\t// controls\r\n\t@ViewChild(Content) contentCtrl: Content;\r\n\r\n\t// page events\r\n\tionViewDidLoad() {\r\n\t\tthis.showLoading();\r\n\r\n\t\tvar id = this.navParams.get(\"ID\") as string;\r\n\t\tvar chapter = this.navParams.get(\"Chapter\");\r\n\t\tif (AppData.Books.containsKey(id)) {\r\n\t\t\tthis.info.book = AppData.Books.getValue(id);\r\n\t\t}\r\n\r\n\t\tthis.booksSvc.getAsync(\r\n\t\t\tid,\r\n\t\t\t() => {\r\n\t\t\t\tthis.info.book = AppData.Books.getValue(id);\r\n\t\t\t\tthis.info.chapter = chapter as number || 0;\r\n\t\t\t\tthis.prepare();\r\n\t\t\t},\r\n\t\t\t() => {\r\n\t\t\t\tthis.hideLoading();\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tAppEvents.on(\r\n\t\t\t\"OpenChapter\",\r\n\t\t\t(info: any) => {\r\n\t\t\t\tif (this.info.book.ID == info.args.ID) {\r\n\t\t\t\t\tthis.goChapter(info.args.Chapter as number);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"OpenBookChapterEventHandler\"\r\n\t\t);\r\n\r\n\t\tAppEvents.on(\r\n\t\t\t\"ReadingOptionsAreUpdated\",\r\n\t\t\t(info: any) => {\r\n\t\t\t\tthis.options = {\r\n\t\t\t\t\tcolor: AppData.Configuration.reading.options.color,\r\n\t\t\t\t\tstyle: AppData.Configuration.reading.options.font + \" \" + AppData.Configuration.reading.options.size + \" \" + AppData.Configuration.reading.options.paragraph + \" \" + AppData.Configuration.reading.options.align\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t\"UpdateReadingOptionsEventHandler\"\r\n\t\t);\r\n\t}\r\n\r\n\tionViewWillUnload() {\r\n\t\tAppEvents.off(\"OpenChapter\", \"OpenBookChapterEventHandler\");\r\n\t\tAppEvents.off(\"ReadingOptionsAreUpdated\", \"UpdateReadingOptionsEventHandler\");\r\n\t\tAppEvents.broadcast(\"CloseBook\", { ID: this.info.book.ID });\r\n\t}\r\n\r\n\t// prepare\r\n\tprepare() {\r\n\t\tthis.info.title = this.info.book.Title + \" - \" + this.info.book.Author;\r\n\r\n\t\tvar rating = this.info.book.RatingPoints.getValue(\"General\");\r\n\t\tthis.info.rating = rating != undefined ? rating.Average : 0.0;\r\n\r\n\t\tif (this.info.chapter == 0) {\r\n\t\t\tlet bookmark = AppData.Configuration.reading.bookmarks.getValue(this.info.book.ID);\r\n\t\t\tif (bookmark != undefined) {\r\n\t\t\t\tthis.info.chapter = bookmark.Chapter;\r\n\t\t\t\tthis.info.offset = bookmark.Position;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.info.chapter > 0) {\r\n\t\t\tthis.goChapter(this.info.chapter);\r\n\t\t}\r\n\t\telse if (this.info.book.TotalChapters > 1 && this.info.chapter < this.info.book.TotalChapters) {\r\n\t\t\tthis.hideLoading();\r\n\t\t\tthis.booksSvc.fetchChapterAsync(this.info.book.ID, this.info.chapter + 1);\r\n\t\t\tAppEvents.broadcast(\"OpenBook\", { ID: this.info.book.ID, Chapter: this.info.chapter });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.hideLoading();\r\n\t\t}\r\n\t}\r\n\r\n\t// go to a specified chapter\r\n\tgoChapter(chapter: number) {\r\n\t\tif (chapter < 1) {\r\n\t\t\tthis.info.chapter = 0;\r\n\t\t}\r\n\t\telse if (chapter > this.info.book.TotalChapters) {\r\n\t\t\tthis.info.chapter = this.info.book.TotalChapters;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.info.chapter = chapter;\r\n\t\t}\r\n\r\n\t\tif (this.info.chapter > 0) {\r\n\t\t\tif (this.info.book.Chapters[this.info.chapter - 1] == \"\") {\r\n\t\t\t\tthis.showLoading();\r\n\t\t\t\tthis.booksSvc.getChapterAsync(this.info.book.ID, this.info.chapter, () => {\r\n\t\t\t\t\tthis.info.title = this.info.book.Title + \" - \" + this.info.book.TOCs[this.info.chapter - 1];\r\n\t\t\t\t\tAppUtility.setTimeout(async () => {\r\n\t\t\t\t\t\tawait this.scrollAsync(() => {\r\n\t\t\t\t\t\t\tthis.hideLoading();\r\n\t\t\t\t\t\t\tAppEvents.broadcast(\"OpenBook\", { ID: this.info.book.ID, Chapter: this.info.chapter });\r\n\t\t\t\t\t\t\tthis.booksSvc.fetchChapterAsync(this.info.book.ID, this.info.chapter + 1);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.info.title = this.info.book.Title + \" - \" + this.info.book.TOCs[this.info.chapter - 1];\r\n\t\t\t\tAppUtility.setTimeout(async () => {\r\n\t\t\t\t\tawait this.scrollAsync(() => {\r\n\t\t\t\t\t\tthis.hideLoading();\r\n\t\t\t\t\t\tAppEvents.broadcast(\"OpenBook\", { ID: this.info.book.ID, Chapter: this.info.chapter });\r\n\t\t\t\t\t\tthis.booksSvc.fetchChapterAsync(this.info.book.ID, this.info.chapter + 1);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.info.title = this.info.book.Title + \" - \" + this.info.book.Author;\r\n\t\t\tAppUtility.setTimeout(async () => {\r\n\t\t\t\tawait this.scrollAsync(() => {\r\n\t\t\t\t\tAppEvents.broadcast(\"OpenBook\", { ID: this.info.book.ID, Chapter: this.info.chapter });\r\n\t\t\t\t\tthis.contentCtrl.scrollTop = 0;\r\n\t\t\t\t\tthis.onEndScroll();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// event handlers\r\n\tgoPrevious() {\r\n\t\tthis.info.offset = 0;\r\n\t\tif (this.info.book.TotalChapters > 1) {\r\n\t\t\tthis.goPreviousChapter();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.goPreviousBook();\r\n\t\t}\r\n\t}\r\n\r\n\tgoNext() {\r\n\t\tthis.info.offset = 0;\r\n\t\tif (this.info.book.TotalChapters > 1) {\r\n\t\t\tthis.goNextChapter();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.goNextBook();\r\n\t\t}\r\n\t}\r\n\r\n\tgoPreviousChapter() {\r\n\t\tthis.goChapter(this.info.chapter - 1);\r\n\t}\r\n\r\n\tgoNextChapter() {\r\n\t\tthis.goChapter(this.info.chapter + 1);\r\n\t}\r\n\r\n\tgoPreviousBook() {\r\n\t\tthis.showLoading();\r\n\t\tthis.goBook(this.getBook(true));\r\n\t}\r\n\r\n\tgoNextBook() {\r\n\t\tthis.showLoading();\r\n\t\tthis.goBook(this.getBook(false));\r\n\t}\r\n\r\n\tgoBook(book: AppModels.Book) {\r\n\t\tthis.hideLoading();\r\n\t\tif (book != undefined) {\r\n\t\t\tthis.info.book = book;\r\n\t\t\tthis.info.chapter = 0;\r\n\t\t\tthis.prepare();\r\n\t\t}\r\n\t}\r\n\r\n\tgetBook(isPrevious: boolean) {\r\n\t\tvar books = new List(AppData.Books.values());\r\n\t\tvar index = books\r\n\t\t\t.Where(b => b.ID == this.info.book.ID)\r\n\t\t\t.Select((b, index) => index)\r\n\t\t\t.FirstOrDefault();\r\n\t\treturn index != undefined && index > 0 && index < books.Count() - 1\r\n\t\t\t? books.FirstOrDefault((b, index) => index == (isPrevious ? index - 1 : index + 1))\r\n\t\t\t: undefined;\r\n\t}\r\n\r\n\tshowInfo() {\r\n\t\tthis.navCtrl.push(BookInfoPage, { ID: this.info.book.ID });\r\n\t}\r\n\r\n\tshowOptions() {\r\n\t\tthis.navCtrl.push(ReadingOptionsPage);\r\n\t}\r\n\r\n\tonEndScroll() {\r\n\t\t(this.info.book.TotalChapters > 1 || this.info.book.Body != \"\")  && AppUtility.setTimeout(async () => {\r\n\t\t\tawait this.configSvc.updateBookmarksAsync(this.info.book.ID, this.info.chapter, this.contentCtrl.scrollTop);\r\n\t\t});\r\n\t}\r\n\r\n\tshowActions() {\r\n\t\tvar actionSheet = this.actionSheetCtrl.create({\r\n\t\t\tenableBackdropDismiss: true,\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Cùng tác giả\",\r\n\t\t\t\t\ticon: this.info.isAppleOS ? undefined : \"search\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tAppEvents.broadcast(\"OpenPage\", { component: SurfBooksPage, params: { Author: this.info.book.Author } });\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Thông tin\",\r\n\t\t\t\t\ticon: this.info.isAppleOS ? undefined : \"information-circle\",\r\n\t\t\t\t\thandler: () => {\r\n\t\t\t\t\t\tthis.showInfo();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t]\r\n\t\t});\r\n\r\n\t\tif (this.info.book.TOCs.length > 1 && this.platform.width() < 992) {\r\n\t\t\tactionSheet.addButton({\r\n\t\t\t\ttext: \"Mục lục\",\r\n\t\t\t\ticon: this.info.isAppleOS ? undefined : \"list\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.menuCtrl.open();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tactionSheet.addButton({\r\n\t\t\ttext: \"Tuỳ chọn đọc\",\r\n\t\t\ticon: this.info.isAppleOS ? undefined : \"options\",\r\n\t\t\thandler: () => {\r\n\t\t\t\tthis.showOptions();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (this.authSvc.isAdministrator() || this.authSvc.isAuthorized(\"Books\", \"\", \"Full\")) {\r\n\t\t\tactionSheet.addButton({\r\n\t\t\t\ttext: \"Cập nhật\",\r\n\t\t\t\ticon: this.info.isAppleOS ? undefined : \"create\",\r\n\t\t\t\thandler: () => {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tactionSheet.addButton({\r\n\t\t\t\ttext: \"Xoá\",\r\n\t\t\t\ticon: this.info.isAppleOS ? undefined : \"trash\",\r\n\t\t\t\thandler: () => {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tactionSheet.addButton({\r\n\t\t\ttext: \"Huỷ bỏ\",\r\n\t\t\ticon: this.info.isAppleOS ? undefined : \"close\",\r\n\t\t\trole: \"cancel\"\r\n\t\t});\r\n\t\t\r\n\t\tactionSheet.present();\r\n\t}\r\n\r\n\tshowLoading() {\r\n\t\tif (this.loading == undefined) {\r\n\t\t\tthis.loading = this.loadingCtrl.create({\r\n\t\t\t\tcontent: \"Tải dữ liệu....\"\r\n\t\t\t});\r\n\t\t\tthis.loading.present();\r\n\t\t}\r\n\t}\r\n\r\n\thideLoading() {\r\n\t\tif (this.loading != undefined) {\r\n\t\t\tthis.loading.dismiss();\r\n\t\t\tthis.loading = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tasync scrollAsync(onCompleted?: () => void) {\r\n\t\tawait this.contentCtrl.scrollTo(0, this.info.offset);\r\n\t\tonCompleted != undefined && onCompleted();\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/books/read/read.ts","import { Component, ViewChild } from \"@angular/core\";\r\nimport { Platform, MenuController, Nav, AlertController, Loading, LoadingController } from \"ionic-angular\";\r\nimport { StatusBar } from \"@ionic-native/status-bar\";\r\nimport { SplashScreen } from \"@ionic-native/splash-screen\";\r\nimport { Storage } from \"@ionic/storage\";\r\nimport { Device } from \"@ionic-native/device\";\r\n\r\nimport { List } from \"linqts\";\r\n\r\nimport { AppUtility } from \"../helpers/utility\";\r\nimport { AppEvents } from \"../helpers/events\";\r\nimport { AppRTU } from \"../helpers/rtu\";\r\nimport { AppCrypto } from \"../helpers/crypto\";\r\nimport { AppData } from \"../models/data\";\r\n\r\nimport { ConfigurationService } from \"../providers/configuration\";\r\nimport { AuthenticationService } from \"../providers/authentication\";\r\nimport { BooksService } from \"../providers/books\";\r\nimport { StatisticsService } from \"../providers/statistics\";\r\nimport { ResourcesService } from \"../providers/resources\";\r\n\r\nimport { HomePage } from \"../pages/home/home\";\r\n\r\nimport { SignInPage } from \"../pages/accounts/signin/signin\";\r\nimport { ProfilePage } from \"../pages/accounts/profile/profile\";\r\nimport { SearchProfilesPage } from \"../pages/accounts/search/search\";\r\n\r\nimport { SearchPage } from \"../pages/search/search\";\r\nimport { SurfBooksPage } from \"../pages/books/surf/surf\";\r\nimport { ReadBookPage } from \"../pages/books/read/read\";\r\n\r\ndeclare var FB: any;\r\n\r\n@Component({\r\n\ttemplateUrl: \"app.html\"\r\n})\r\nexport class App {\r\n\t// attributes\r\n\tinfo = {\r\n\t\tnav: {\r\n\t\t\tstart: HomePage,\r\n\t\t\tprevious: {\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tcomponent: undefined,\r\n\t\t\t\tparams: undefined\r\n\t\t\t},\r\n\t\t\tactive: {\r\n\t\t\t\tname: \"HomePage\",\r\n\t\t\t\tcomponent: undefined,\r\n\t\t\t\tparams: undefined\r\n\t\t\t}\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\tavatar: undefined,\r\n\t\t\ttop: \"Menu\",\r\n\t\t\tmain: \"Chính\",\r\n\t\t\tsub: \"Thể loại\"\r\n\t\t},\r\n\t\tcategory: {\r\n\t\t\tindex: -1,\r\n\t\t\tparent: {\r\n\t\t\t\tindex: -1,\r\n\t\t\t\ttitle: \"\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tbook: {\r\n\t\t\tid: \"\",\r\n\t\t\ttitle: \"\",\r\n\t\t\tchapter: 0\r\n\t\t},\r\n\t\tiOSPWA: false,\r\n\t\tstartupURI: \"\",\r\n\t\tattemps: 0\r\n\t};\r\n\tpages: Array<{ name: string, component: any, title: string, icon: string, params?: any, doPush?: boolean, popIfContains?: string, noNestedStack?: boolean }> = [];\r\n\tcategories: Array<{ title: string, index: number, gotChildren?: boolean }> = [];\r\n\tchapters: Array<{ title: string, index: number }> = [];\r\n\r\n\t// controls\r\n\t@ViewChild(Nav) nav: Nav;\r\n\tloading: Loading = undefined;\r\n\r\n\tconstructor(\r\n\t\tpublic platform: Platform,\r\n\t\tpublic device: Device,\r\n\t\tpublic menu: MenuController,\r\n\t\tpublic statusBar: StatusBar,\r\n\t\tpublic splashScreen: SplashScreen,\r\n\t\tpublic alertCtrl: AlertController,\r\n\t\tpublic loadingCtrl: LoadingController,\r\n\t\tpublic storage: Storage,\r\n\t\tpublic configSvc: ConfigurationService,\r\n\t\tpublic authSvc: AuthenticationService,\r\n\t\tpublic statisticsSvc: StatisticsService,\r\n\t\tpublic resourcesSvc: ResourcesService,\r\n\t\tpublic booksSvc: BooksService\r\n\t){\r\n\t\t// show loading\r\n\t\tthis.loading = this.loadingCtrl.create({\r\n\t\t\tcontent: \"Tải dữ liệu...\"\r\n\t\t});\r\n\t\tthis.loading.present();\r\n\r\n\t\t// setup event handlers\r\n\t\tthis.setupEvents();\r\n\r\n\t\t// run initialize process when ready\r\n\t\tthis.platform.ready().then(() => {\r\n\t\t\t// prepare\r\n\t\t\tthis.info.startupURI = this.platform.url();\r\n\t\t\t\r\n\t\t\tthis.statusBar.styleDefault();\r\n\t\t\tthis.splashScreen.hide();\r\n\r\n\t\t\t// make sure the storage is ready\r\n\t\t\tthis.storage.ready().then(() => {\r\n\t\t\t\tAppUtility.isDebug() && console.info(\"<Startup>: The storage is ready for serving...\");\r\n\t\t\t});\r\n\r\n\t\t\t// prepare environment\r\n\t\t\tthis.configSvc.prepare();\r\n\t\t\tthis.info.title.top = AppData.Configuration.app.name;\r\n\t\t\tthis.info.iOSPWA = AppData.Configuration.app.platform == \"iOS PWA\";\r\n\r\n\t\t\t// build the listing of pages\r\n\t\t\tthis.buildPages();\r\n\r\n\t\t\t// load statistics\r\n\t\t\tthis.statisticsSvc.loadStatisticsAsync();\r\n\r\n\t\t\t// run initialize process\r\n\t\t\tvar prego = AppUtility.isWebApp()\r\n\t\t\t\t? this.platform.getQueryParam(\"prego\")\r\n\t\t\t\t: \"\";\r\n\r\n\t\t\tswitch (prego) {\r\n\t\t\t\tcase \"activate\":\r\n\t\t\t\t\tthis.activate();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthis.initialize();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// set-up events\r\n\tsetupEvents() {\r\n\t\t// events of page/view navigation\r\n\t\tAppEvents.on(\"OpenHomePage\", () => {\r\n\t\t\tthis.navigateToHomePage();\r\n\t\t});\r\n\r\n\t\tAppEvents.on(\"OpenPreviousPage\", () => {\r\n\t\t\tthis.navigateToPreviousPage();\r\n\t\t});\r\n\r\n\t\tAppEvents.on(\"OpenPage\", (info: any) => {\r\n\t\t\tif (AppUtility.isObject(info, true) != null && AppUtility.isObject(info.args, true)) {\r\n\t\t\t\tthis.navigate(info.args.name as string, info.args.component, info.args.params, info.args.doPush, info.args.popIfContains, info.args.noNestedStack);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tAppEvents.on(\"UpdateActiveNav\", (info: any) => {\r\n\t\t\tif (AppUtility.isObject(info, true) != null && AppUtility.isObject(info.args, true)) {\r\n\t\t\t\tthis.updateActiveNav(info.args.name as string, info.args.component, info.args.params);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tAppEvents.on(\"SetPreviousPageActive\", (info: any) => {\r\n\t\t\tvar previous = (AppUtility.isObject(info, true) != null && AppUtility.isObject(info.args, true))\r\n\t\t\t\t? info.args.current\r\n\t\t\t\t: undefined;\r\n\t\t\tif (this.info.nav.previous.name != previous) {\r\n\t\t\t\tthis.updateActiveNav(this.info.nav.previous.name, this.info.nav.previous.component, this.info.nav.previous.params);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// events to update avatar/title of side menu\r\n\t\tAppEvents.on(\"SessionIsRegistered\", () => {\r\n\t\t\tthis.updateSidebar();\r\n\t\t\tthis.buildPages();\r\n\t\t});\r\n\r\n\t\tAppEvents.on(\"AccountIsUpdated\", () => {\r\n\t\t\tthis.updateSidebar();\r\n\t\t\tthis.buildPages();\r\n\t\t});\r\n\r\n\t\t// events to show categories\r\n\t\tAppEvents.on(\"CategoriesAreUpdated\", (info: any) => {\r\n\t\t\tthis.showCategories();\r\n\t\t});\r\n\r\n\t\tAppEvents.on(\"CloseBook\", () => {\r\n\t\t\tthis.info.book.id = \"\";\r\n\t\t\tthis.chapters = [];\r\n\t\t});\r\n\r\n\t\t// events to show chapters of a book\r\n\t\tAppEvents.on(\"OpenBook\", (info: any) => {\r\n\t\t\tif (AppUtility.isObject(info, true) != null && AppUtility.isObject(info.args, true)) {\r\n\t\t\t\tthis.info.book.id = info.args.ID;\r\n\t\t\t\tthis.info.book.chapter = info.args.Chapter;\r\n\t\t\t\tthis.info.book.id == info.args.ID && this.showChapters();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// navigation\r\n\tnavigate(name: string, component: any, params?: any, doPush?: boolean, popIfContains?: string, noNestedStack?: boolean) {\r\n\t\tif (AppUtility.isTrue(doPush)) {\r\n\t\t\tif (this.info.nav.active.name != name || AppUtility.isFalse(noNestedStack)) {\r\n\t\t\t\tif (AppUtility.indexOf(popIfContains, this.info.nav.active.name) > -1) {\r\n\t\t\t\t\tthis.nav.pop();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updatePreviousNav(this.info.nav.active.name, this.nav.getActive().component, this.nav.getActive().getNavParams().data);\r\n\t\t\t\t}\r\n\t\t\t\tthis.updateActiveNav(name, component, params);\r\n\t\t\t\tthis.nav.push(component, params);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.info.nav.active.name != name) {\r\n\t\t\t\tthis.updatePreviousNav(this.info.nav.active.name, this.nav.getActive().component, this.nav.getActive().getNavParams().data);\r\n\t\t\t}\r\n\t\t\tthis.updateActiveNav(name, component, params);\r\n\t\t\tthis.nav.setRoot(component, params);\r\n\t\t}\r\n\t}\r\n\r\n\tnavigateToHomePage() {\r\n\t\tthis.updatePreviousNav(undefined, undefined);\r\n\t\tthis.updateActiveNav(\"HomePage\", this.info.nav.start);\r\n\t\tthis.nav.setRoot(this.info.nav.start);\r\n\t}\r\n\r\n\tnavigateToPreviousPage() {\r\n\t\tvar name = AppUtility.isNotEmpty(this.info.nav.previous.name)\r\n\t\t\t? this.info.nav.previous.name\r\n\t\t\t: \"HomePage\";\r\n\t\tvar component = AppUtility.isNotNull(this.info.nav.previous.component)\r\n\t\t\t? this.info.nav.previous.component\r\n\t\t\t: this.info.nav.start;\r\n\t\tvar params = AppUtility.isNotNull(this.info.nav.previous.params)\r\n\t\t\t? this.info.nav.previous.params\r\n\t\t\t: undefined;\r\n\r\n\t\tthis.updatePreviousNav(undefined, undefined);\r\n\t\tthis.updateActiveNav(name, component, params);\r\n\t\tthis.nav.setRoot(component, params);\r\n\t}\r\n\r\n\tupdatePreviousNav(name: string, component: any, params?: any) {\r\n\t\tthis.info.nav.previous = {\r\n\t\t\tname: name,\r\n\t\t\tcomponent: component,\r\n\t\t\tparams: params\r\n\t\t};\r\n\t}\r\n\r\n\tupdateActiveNav(name: string, component: any, params?: any) {\r\n\t\tthis.info.nav.active = {\r\n\t\t\tname: name,\r\n\t\t\tcomponent: component,\r\n\t\t\tparams: params\r\n\t\t};\r\n\t}\r\n\r\n\t// activate new account\r\n\tactivate() {\r\n\t\tvar mode = this.platform.getQueryParam(\"mode\");\r\n\t\tvar code = this.platform.getQueryParam(\"code\");\r\n\r\n\t\tif (AppUtility.isNotEmpty(mode) && AppUtility.isNotEmpty(code)) {\r\n\t\t\tthis.authSvc.activateAsync(mode, code,\r\n\t\t\t\t(data: any) => {\r\n\t\t\t\t\tthis.initialize(() => {\r\n\t\t\t\t\t\tthis.showActivationResults({ Status: \"OK\", Mode: mode });\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t},\r\n\t\t\t\t(data: any) => {\r\n\t\t\t\t\tthis.initialize(() => {\r\n\t\t\t\t\t\tthis.showActivationResults({ Status: \"Error\", Mode: mode, Error: data.Error });\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.initialize();\r\n\t\t}\r\n\t}\r\n\r\n\tshowActivationResults(data: any) {\r\n\t\tvar title = data.Status == \"OK\"\r\n\t\t\t? \"Kích hoạt thành công\"\r\n\t\t\t: \"Lỗi kích hoạt\";\r\n\r\n\t\tvar message = data.Status == \"OK\"\r\n\t\t\t? data.Mode == \"account\"\r\n\t\t\t\t? \"Tài khoản đã được kích hoạt thành công\"\r\n\t\t\t\t: \"Mật khẩu đã được kích hoạt thành công\"\r\n\t\t\t: data.Error.Message;\r\n\r\n\t\tthis.alertCtrl.create({\r\n\t\t\ttitle: title,\r\n\t\t\tmessage: message,\r\n\t\t\tenableBackdropDismiss: false,\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: \"Đóng\",\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tif (this.info.startupURI.indexOf(\"#\") > 0) {\r\n\t\t\t\t\t\twindow.location.href = this.info.startupURI.substring(0, this.info.startupURI.indexOf(\"#\") + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t}).present();\r\n\t}\r\n\r\n\t// initialize\r\n\tinitialize(onCompleted?: () => void, noInitializeSession?: boolean) {\r\n\t\tthis.configSvc.initializeAsync(\r\n\t\t\t(d: any) => {\r\n\t\t\t\t// got valid sessions, then run next step\r\n\t\t\t\tif (this.configSvc.isReady() && this.configSvc.isAuthenticated()) {\r\n\t\t\t\t\tconsole.info(\"<Startup>: The session is initialized & registered (user)\");\r\n\t\t\t\t\tthis.prepare(onCompleted);\r\n\t\t\t\t\tdelete this.info.attemps;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// register new session (anonymous)\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.info(\"<Startup>: Register the initialized session (anonymous)\", AppData.Configuration.session);\r\n\t\t\t\t\tthis.configSvc.registerSessionAsync(\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tconsole.info(\"<Startup>: The session is registered (anonymous)\");\r\n\t\t\t\t\t\t\tthis.prepare(onCompleted);\r\n\t\t\t\t\t\t\tdelete this.info.attemps;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t(e: any) => {\r\n\t\t\t\t\t\t\tthis.info.attemps++;\r\n\t\t\t\t\t\t\tif (AppUtility.isGotSecurityException(e.Error) && this.info.attemps < 13) {\r\n\t\t\t\t\t\t\t\tconsole.warn(\"<Startup>: Cannot register, the session is need to be re-initialized (anonymous)\");\r\n\t\t\t\t\t\t\t\tAppUtility.setTimeout(async () => {\r\n\t\t\t\t\t\t\t\t\tawait this.configSvc.deleteSessionAsync(() => {\r\n\t\t\t\t\t\t\t\t\t\tAppUtility.setTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.initialize(onCompleted, noInitializeSession);\r\n\t\t\t\t\t\t\t\t\t\t}, 234);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tconsole.error(\"<Startup>: Got an error while initializing\", e);\r\n\t\t\t\t\t\t\t\tdelete this.info.attemps;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t(e: any) => {\r\n\t\t\t\tthis.info.attemps++;\r\n\t\t\t\tif (AppUtility.isGotSecurityException(e.Error) && this.info.attemps < 13) {\r\n\t\t\t\t\tconsole.warn(\"<Startup>: Cannot initialize, the session is need to be re-initialized (anonymous)\");\r\n\t\t\t\t\tAppUtility.setTimeout(async () => {\r\n\t\t\t\t\t\tawait this.configSvc.deleteSessionAsync(() => {\r\n\t\t\t\t\t\t\tAppUtility.setTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.initialize(onCompleted, noInitializeSession);\r\n\t\t\t\t\t\t\t}, 234);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.error(\"<Startup>: Got an error while initializing\", e);\r\n\t\t\t\t\tdelete this.info.attemps;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnoInitializeSession\r\n\t\t);\r\n\t}\r\n\r\n\t// prepare the app\r\n\tprepare(onCompleted?: () => void) {\r\n\t\t// special for PWA (Progressive Web Apps) only\r\n\t\tif (AppUtility.isWebApp()) {\r\n\t\t\t// facebook\r\n\t\t\tif (AppUtility.isNotEmpty(AppData.Configuration.facebook.id)) {\r\n\t\t\t\tlet fbVersion = AppUtility.isNotEmpty(AppData.Configuration.facebook.version) ? AppData.Configuration.facebook.version : \"v2.8\";\r\n\t\t\t\tif (!window.document.getElementById(\"facebook-jssdk\")) {\r\n\t\t\t\t\tlet js = window.document.createElement(\"script\");\r\n\t\t\t\t\tjs.id = \"facebook-jssdk\";\r\n\t\t\t\t\tjs.async = true;\r\n\t\t\t\t\tjs.src = \"https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=\" + fbVersion;\r\n\r\n\t\t\t\t\tlet ref = window.document.getElementsByTagName(\"script\")[0];\r\n\t\t\t\t\tref.parentNode.insertBefore(js, ref);\r\n\t\t\t\t}\r\n\t\t\t\twindow[\"fbAsyncInit\"] = function () {\r\n\t\t\t\t\tFB.init({\r\n\t\t\t\t\t\tappId: AppData.Configuration.facebook.id,\r\n\t\t\t\t\t\tchannelUrl: \"/assets/facebook.html\",\r\n\t\t\t\t\t\tstatus: true,\r\n\t\t\t\t\t\tcookie: true,\r\n\t\t\t\t\t\txfbml: true,\r\n\t\t\t\t\t\tversion: fbVersion\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.auth.watchFacebookConnect();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t// scrollbars on Windows\r\n\t\t\tif (/Windows/i.test(window.navigator.userAgent)) {\r\n\t\t\t\tlet css = window.document.createElement(\"style\");\r\n\t\t\t\tcss.type = \"text/css\";\r\n\t\t\t\tcss.innerText = \"::-webkit-scrollbar{height:14px;width:10px;background:#eee;border-left:solid1px#ddd;}::-webkit-scrollbar-thumb{background:#ddd;border:solid1px#cfcfcf;}::-webkit-scrollbar-thumb:hover{background:#b2b2b2;border:solid1px#b2b2b2;}::-webkit-scrollbar-thumb:active{background:#b2b2b2;border:solid1px#b2b2b2;}\";\r\n\r\n\t\t\t\tlet ref = window.document.getElementsByTagName(\"link\")[0];\r\n\t\t\t\tref.parentNode.insertBefore(css, ref);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// start the real-time updater\r\n\t\tAppRTU.start(() => {\r\n\t\t\t// get profile\r\n\t\t\tif (this.configSvc.isAuthenticated()) {\r\n\t\t\t\tthis.configSvc.patchAccount(() => {\r\n\t\t\t\t\tthis.authSvc.getProfile();\r\n\t\t\t\t}, 345);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// load & get/merge bookmarks\r\n\t\t\tthis.configSvc.loadBookmarksAsync();\r\n\t\t\tif (this.configSvc.isAuthenticated()) {\r\n\t\t\t\tthis.configSvc.getBookmarks();\r\n\t\t\t}\r\n\r\n\t\t\t// load reading options\r\n\t\t\tthis.configSvc.loadOptionsAsync();\r\n\t\t\t\r\n\t\t\t// load geo-meta\r\n\t\t\tthis.resourcesSvc.loadGeoMetaAsync();\r\n\r\n\t\t\t// load statistics\r\n\t\t\tthis.statisticsSvc.fetchStatistics();\r\n\r\n\t\t\t// raise an event when done\r\n\t\t\tAppEvents.broadcast(\"AppIsInitialized\");\r\n\t\t\tconsole.info(\"<Startup>: The app is initialized\", AppUtility.isDebug() ? AppData.Configuration : \"\");\r\n\r\n\t\t\t// hide loading\r\n\t\t\tthis.loading.dismiss();\r\n\t\t\t\r\n\t\t\t// callback on completed\r\n\t\t\tif (onCompleted != undefined) {\r\n\t\t\t\tonCompleted();\r\n\t\t\t}\r\n\r\n\t\t\t// navigate to the requested book\r\n\t\t\telse if (AppUtility.isWebApp() && this.platform.getQueryParam(\"book\") != undefined) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet params = JSON.parse(AppCrypto.urlDecode(this.platform.getQueryParam(\"book\")));\r\n\t\t\t\t\tAppUtility.isDebug() && console.info(\"<Startup>: Open the requested book\", params);\r\n\t\t\t\t\tthis.navigate(\"ReadBookPage\", ReadBookPage, params, true);\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) { }\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// update side bar (avatar & title)\r\n\tupdateSidebar() {\r\n\t\tthis.info.title.top = AppData.Configuration.app.name;\r\n\t\tthis.info.title.avatar = undefined;\r\n\t\tif (this.authSvc.isAuthenticated()) {\r\n\t\t\tthis.info.title.top = AppUtility.isObject(AppData.Configuration.session.account.profile, true)\r\n\t\t\t\t? AppData.Configuration.session.account.profile.Name\r\n\t\t\t\t: AppData.Configuration.app.name;\r\n\t\t\tthis.info.title.avatar = AppUtility.getAvatarImage(AppData.Configuration.session.account.profile);\r\n\t\t}\r\n\t}\r\n\r\n\t// main section (pages)\r\n\tbuildPages() {\r\n\t\tthis.pages = [\r\n\t\t\t{ name: \"HomePage\", component: HomePage, title: \"Trang nhất\", icon: \"home\" }\r\n\t\t];\r\n\r\n\t\tif (this.authSvc.isAuthenticated()) {\r\n\t\t\tthis.pages.push({ name: \"ProfilePage\", component: ProfilePage, title: \"Thông tin tài khoản\", icon: \"person\", doPush: true, noNestedStack: true });\r\n\t\t\tif (this.authSvc.isAdministrator()) {\r\n\t\t\t\tthis.pages.push({ name: \"ProfileListPage\", component: SearchProfilesPage, title: \"Tài khoản người dùng\", icon: \"people\" });\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.pages = this.pages.concat([\r\n\t\t\t\t{ name: \"SignInPage\", component: SignInPage, title: \"Đăng nhập\", icon: \"log-in\", doPush: true, popIfContains: \"ProfilePage\", noNestedStack: true },\r\n\t\t\t\t{ name: \"ProfilePage\", component: ProfilePage, title: \"Đăng ký tài khoản\", icon: \"person-add\", params: { Register: true }, doPush: true, popIfContains: \"SignInPage\", noNestedStack: true }\r\n\t\t\t]);\r\n\t\t}\r\n\r\n\t\tthis.pages.push({ name: \"SearchPage\", component: SearchPage, title: \"Tìm kiếm\", icon: \"search\" });\r\n\t}\r\n\r\n\tisPageActive(page: any) {\r\n\t\treturn this.info.nav.active.name == page.name;\r\n\t}\r\n\r\n\topenPage(page: any) {\r\n\t\tthis.navigate(page.name as string, page.component, page.params, page.doPush, page.popIfContains, page.noNestedStack);\r\n\t}\r\n\r\n\ttrackPage(index: number, page: any) {\r\n\t\treturn page.title;\r\n\t}\r\n\r\n\t// sub section: categories\r\n\tshowCategories() {\r\n\t\tthis.categories = new List(AppData.Statistics.Categories)\r\n\t\t\t.Select((category, index) => {\r\n\t\t\t\treturn { title: category.Name, index: index, gotChildren: category.Children.length > 0 }\r\n\t\t\t})\r\n\t\t\t.ToArray();\r\n\t}\r\n\r\n\ttrackCategory(index: number, category: any) {\r\n\t\treturn category.index;\r\n\t}\r\n\r\n\tisCategoryActive(category: any) {\r\n\t\treturn this.info.category.index == category.index && this.info.nav.active.name == \"SurfBooksPage\";\r\n\t}\r\n\r\n\topenCategory(category: any) {\r\n\t\tvar title = category.title;\r\n\t\tthis.info.category.index = category.index;\r\n\t\tthis.navigate(\"SurfBooksPage\", SurfBooksPage, { Category: title });\r\n\t}\r\n\r\n\t// sub section: chapters\r\n\tshowChapters() {\r\n\t\tlet book = AppData.Books.getValue(this.info.book.id);\r\n\t\tthis.info.book.title = book.Title;\r\n\r\n\t\tif (book.TotalChapters > 1) {\r\n\t\t\tthis.chapters = new List(book.TOCs)\r\n\t\t\t\t.Select((toc, index) => {\r\n\t\t\t\t\treturn { title: toc, index: index };\r\n\t\t\t\t})\r\n\t\t\t\t.ToArray();\r\n\t\t}\r\n\t}\r\n\r\n\ttrackChapter(index: number, chapter: any) {\r\n\t\treturn chapter.index;\r\n\t}\r\n\r\n\tisChapterActive(chapter: any) {\r\n\t\treturn this.info.book.chapter == chapter.index + 1;\r\n\t}\r\n\r\n\topenChapter(chapter: any) {\r\n\t\tthis.info.book.chapter = chapter.index + 1;\r\n\t\tAppEvents.broadcast(\"OpenChapter\", { ID: this.info.book.id, Chapter: this.info.book.chapter });\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { Response } from \"@angular/http\";\r\nimport * as Rx from \"rxjs/Rx\";\r\n\r\nimport { AppUtility } from \"./utility\";\r\nimport { AppCrypto } from \"./crypto\";\r\nimport { AppAPI } from \"./api\";\r\nimport { AppData } from \"../models/data\";\r\n\r\nexport namespace AppRTU {\r\n\r\n\tvar status: { receiver: string, sender: string } = { receiver: \"initializing\", sender: \"initializing\" };\r\n\tvar uri: string = null;\r\n\tvar receiver: any = null;\r\n\tvar sender: any = null;\r\n\tvar handlers: any = {};\r\n\r\n\tvar subject = new Rx.Subject<{ type: string, message: any }>();\r\n\tvar observable = Rx.Observable.from(subject);\r\n\tobservable.subscribe(\r\n\t\t({ type, message }) => {\r\n\t\t\tif (handlers[type]) {\r\n\t\t\t\tfor (let handler of handlers[type]) {\r\n\t\t\t\t\thandler.func(message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tAppUtility.isDebug() && console.warn(\"[RTU]: Got a message but no suitable handler is found\", \"<\" + type + \">\", message);\r\n\t\t\t}\r\n\t\t},\r\n\t\t(error: any) => {\r\n\t\t\tconsole.error(\"[RTU]: Got an error\", error);\r\n\t\t}\r\n\t);\r\n\r\n\t/**\r\n\t  * Registers a handler for processing when got a message from APIs\r\n\t  * @param type The string that presents type of a message\r\n\t  * @param handler The function for processing when got a message from APIs\r\n\t  * @param identity The string that presents identity of the handler for unregistering later\r\n\t*/\r\n\texport function register(type: string, handler: (message: any) => void, identity?: string) {\r\n\t\tif (AppUtility.isNotEmpty(type) && handler != undefined) {\r\n\t\t\thandlers[type] = handlers[type] || [];\r\n\t\t\thandlers[type].push({ func: handler, identity: AppUtility.isNotEmpty(identity) ? identity : \"\" });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t  * Unregisters a handler\r\n\t  * @param type The string that presents type of a message\r\n\t  * @param identity The string that presents identity of the handler for unregistering\r\n\t*/\r\n\texport function unregister(type: string, identity: string) {\r\n\t\tif (AppUtility.isNotEmpty(type) && AppUtility.isNotEmpty(identity) && handlers[type]) {\r\n\t\t\tlet index = AppUtility.find<any>(handlers[type], h => h.identity == identity);\r\n\t\t\tif (index != -1) {\r\n\t\t\t\thandlers[type].splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/** Starts */\r\n\texport function start(onCompleted?: (info?: any) => void, isRestart?: boolean) {\r\n\t\t// check\r\n\t\tif (typeof WebSocket === undefined) {\r\n\t\t\tconsole.warn(\"[RTU]: Your browser is outdated, its requires a modern browser that supports WebSocket (like Chrome, Safari, Firefox, Microsoft Edge/IE 10/11, ...)\");\r\n\t\t\tonCompleted != undefined && AppUtility.setTimeout(() => {\r\n\t\t\t\tonCompleted({ r: receiver, s: sender });\r\n\t\t\t}, status == null || status.receiver == \"ready\" ? 13 : 567);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if (receiver != null) {\r\n\t\t\tonCompleted != undefined && AppUtility.setTimeout(() => {\r\n\t\t\t\tonCompleted({ r: receiver, s: sender });\r\n\t\t\t}, status == null || status.receiver == \"ready\" ? 13 : 567);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// initialize\r\n\t\tstatus = { receiver: \"initializing\", sender: \"initializing\" };\r\n\t\turi = AppData.Configuration.app.uris.apis.replace(\"http://\", \"ws://\").replace(\"https://\", \"wss://\")\r\n\t\t\t+ \"rtu/\" + AppCrypto.urlEncode(Math.random() + \"\").toLowerCase()\r\n\t\t\t+ \"?x-request=\" + AppUtility.getBase64UrlParam(AppAPI.getAuthHeaders())\r\n\t\t\t+ (AppUtility.isTrue(isRestart) ? \"&x-restart=\" : \"\");\r\n\r\n\t\t// receiver\r\n\t\treceiver = new WebSocket(uri);\r\n\r\n\t\treceiver.onopen = (event) => {\r\n\t\t\tstatus.receiver = \"ready\";\r\n\t\t\tAppUtility.isDebug() && console.info(\"[RTU]: Receiver is opened...\");\r\n\t\t};\r\n\r\n\t\treceiver.onclose = (event) => {\r\n\t\t\tstatus.receiver = \"close\";\r\n\t\t\tAppUtility.isDebug() && console.info(\"[RTU]: Receiver is closed...\");\r\n\t\t\tAppUtility.isNotEmpty(uri) && restart();\r\n\t\t};\r\n\r\n\t\treceiver.onerror = (event) => {\r\n\t\t\tstatus.receiver = \"error\";\r\n\t\t\tAppUtility.isDebug() && console.warn(\"[RTU]: Receiver got an error\", event);\r\n\t\t};\r\n\r\n\t\treceiver.onmessage = (event) => {\r\n\t\t\tlet message = JSON.parse(event.data);\r\n\t\t\tif (AppUtility.isNotEmpty(message.Type) && message.Type == \"Error\" && AppUtility.isGotSecurityException(message.Error)) {\r\n\t\t\t\tconsole.info(\"[RTU]: Stop when receiver got a security issue\");\r\n\t\t\t\tstop();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tprocess(message);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// sender\r\n\t\tsender = new WebSocket(uri + \"&x-receiver=\" + AppData.Configuration.session.id);\r\n\r\n\t\tsender.onopen = (event) => {\r\n\t\t\tstatus.sender = \"ready\";\r\n\t\t\tAppUtility.isDebug() && console.info(\"[RTU]: Sender is opened...\");\r\n\t\t};\r\n\r\n\t\tsender.onclose = (event) => {\r\n\t\t\tstatus.sender = \"close\";\r\n\t\t\tAppUtility.isDebug() && console.info(\"[RTU]: Sender is closed...\");\r\n\t\t};\r\n\r\n\t\tsender.onerror = (event) => {\r\n\t\t\tstatus.sender = \"error\";\r\n\t\t\tAppUtility.isDebug() && console.warn(\"[RTU]: Sender got an error\", event);\r\n\t\t};\r\n\r\n\t\tsender.onmessage = (event) => {\r\n\t\t\tlet message = JSON.parse(event.data);\r\n\t\t\tif (AppUtility.isNotEmpty(message.Type) && message.Type == \"Error\" && AppUtility.isGotSecurityException(message.Error)) {\r\n\t\t\t\tconsole.info(\"[RTU]: Stop when sender got a security issue\");\r\n\t\t\t\tstop();\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\t// callback when done\r\n\t\tonCompleted != undefined && AppUtility.setTimeout(() => {\r\n\t\t\tonCompleted({ r: receiver, s: sender });\r\n\t\t}, status.receiver == \"ready\" && status.sender == \"ready\" ? 13 : 567);\r\n\t}\r\n\r\n\t/** Restarts */\r\n\texport function restart(reason?: string, defer?: number) {\r\n\t\tconsole.warn(\"[RTU]: \" + (reason || \"Re-start because the WebSocket connection is broken\"));\r\n\t\twindow.setTimeout(() => {\r\n\t\t\tconsole.info(\"[RTU]: Re-starting...\");\r\n\r\n\t\t\tstatus.receiver = \"restarting\";\r\n\t\t\tif (receiver != null) {\r\n\t\t\t\treceiver.close();\r\n\t\t\t\treceiver = null;\r\n\t\t\t}\r\n\r\n\t\t\tstatus.sender = \"restarting\";\r\n\t\t\tif (sender != null) {\r\n\t\t\t\tsender.close();\r\n\t\t\t\tsender = null;\r\n\t\t\t}\r\n\r\n\t\t\tstart(() => {\r\n\t\t\t\tconsole.info(\"[RTU]: The updater is re-started successful...\", AppUtility.isDebug() ? { r: receiver, s: sender } : \"\");\r\n\t\t\t}, true);\r\n\t\t}, defer || 123);\r\n\t}\r\n\r\n\t/** Stops */\r\n\texport function stop(onCompleted?: (data?: any) => void) {\r\n\t\turi = null;\r\n\r\n\t\tstatus.receiver = \"closed\";\r\n\t\tif (receiver != null) {\r\n\t\t\treceiver.close();\r\n\t\t\treceiver = null;\r\n\t\t}\r\n\r\n\t\tstatus.sender = \"closed\";\r\n\t\tif (sender != null) {\r\n\t\t\tsender.close();\r\n\t\t\tsender = null;\r\n\t\t}\r\n\r\n\t\tonCompleted != undefined && onCompleted({ r: receiver, s: sender });\r\n\t}\r\n\r\n\t/** Gets the ready state */\r\n\texport function isReady() {\r\n\t\treturn receiver != null && status.receiver == \"ready\" && sender != null && status.sender == \"ready\";\r\n\t}\r\n\r\n\t/** Sends the request to a service */\r\n\texport function send(request: any, rtuNext?: () => void, ajaxNext?: (observable?: Rx.Observable<Response>) => void): void {\r\n\t\tif (!AppUtility.isObject(request, true)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if (isReady()) {\r\n\t\t\tsender.send(JSON.stringify(request));\r\n\t\t\trtuNext != undefined && rtuNext();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet path = request.ServiceName + \"/\" + request.ObjectName;\r\n\t\t\tif (AppUtility.isObject(request.Query, true)) {\r\n\t\t\t\tpath += \"?\"\r\n\t\t\t\tfor (let name in request.Query) {\r\n\t\t\t\t\tpath += name + \"=\" + encodeURIComponent(request.Query[name]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet observable: Rx.Observable<Response> = null;\r\n\t\t\tif (request.Verb == \"POST\") {\r\n\t\t\t\tobservable = AppAPI.Post(path, request.Body, request.Header);\r\n\t\t\t}\r\n\t\t\telse if (request.Verb == \"PUT\") {\r\n\t\t\t\tobservable = AppAPI.Put(path, request.Body, request.Header);\r\n\t\t\t}\r\n\t\t\telse if (request.Verb == \"DELETE\") {\r\n\t\t\t\tobservable = AppAPI.Delete(path, request.Header);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tobservable = AppAPI.Get(path, request.Header);\r\n\t\t\t}\r\n\r\n\t\t\tajaxNext != undefined && ajaxNext(observable);\r\n\t\t}\r\n\t}\r\n\t\t\r\n\t/** Calls a service */\r\n\texport function call(serviceName: string, objectName: string, verb?: string, query?: any, header?: any, body?: string, extra?: any, rtuNext?: () => void, ajaxNext?: (observable?: Rx.Observable<Response>) => void): void {\r\n\t\tsend({\r\n\t\t\tServiceName: serviceName,\r\n\t\t\tObjectName: objectName,\r\n\t\t\tVerb: verb || \"GET\",\r\n\t\t\tQuery: query,\r\n\t\t\tHeader: header,\r\n\t\t\tBody: body,\r\n\t\t\tExtra: extra\r\n\t\t}, rtuNext, ajaxNext);\r\n\t}\r\n\t\t\r\n\t/** Parses the type of the message */\r\n\texport function parse(type: string): { ServiceName: string, ObjectName: string } {\r\n\t\tvar pos = AppUtility.indexOf(type, \"#\");\r\n\t\treturn {\r\n\t\t\tServiceName: pos > 0 ? type.substring(0, pos) : type,\r\n\t\t\tObjectName:  pos > 0 ? type.substring(pos + 1) : \"\"\r\n\t\t};\r\n\t}\r\n\r\n\t/** Process the message */\r\n\tfunction process(message: any) {\r\n\t\tlet info = parse(message.Type);\r\n\t\tAppUtility.isDebug() && console.info(\"[RTU]: Got a message \" + (info.ObjectName != \"\" ? \"(\" + info.ObjectName + \")\" : \"\"), message);\r\n\t\t\r\n\t\tif (info.ServiceName == \"Knock\") {\r\n\t\t\tAppUtility.isDebug() && console.log(\"[RTU]: Knock, Knock, Knock ... => Yes, I'm right here (\" + (new Date()).toJSON() + \")\");\r\n\t\t}\r\n\t\telse if (info.ServiceName == \"OnlineStatus\") {\r\n\t\t\tAppUtility.isDebug() && console.log(\"[RTU]: Got a flag to update online status\");\r\n\t\t\tcall(\"users\", \"status\");\r\n\t\t\tif (handlers[\"Scheduler\"]) {\r\n\t\t\t\tsubject.next({ \"type\": \"Scheduler\", \"message\": message });\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (AppUtility.isNotEmpty(message.ExcludedDeviceID) && message.ExcludedDeviceID == AppData.Configuration.session.device) {\r\n\t\t\tAppUtility.isDebug() && console.warn(\"[RTU]: The device is excluded\", AppData.Configuration.session.device);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsubject.next({ \"type\": info.ServiceName, \"message\": message });\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/rtu.ts"],"sourceRoot":""}